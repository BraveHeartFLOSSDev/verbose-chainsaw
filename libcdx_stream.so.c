#include "libcdx_stream.so.h"



void __cxa_finalize(void)

{
  __cxa_finalize();
  return;
}



void __cxa_atexit(void)

{
  __cxa_atexit();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void * malloc(size_t __size)

{
  void *pvVar1;
  
  pvVar1 = malloc(__size);
  return pvVar1;
}



void CdxListAddTail(void)

{
  CdxListAddTail();
  return;
}



void __android_log_print(void)

{
  __android_log_print();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void * memset(void *__s,int __c,size_t __n)

{
  void *pvVar1;
  
  pvVar1 = memset(__s,__c,__n);
  return pvVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

char * strchr(char *__s,int __c)

{
  char *pcVar1;
  
  pcVar1 = strchr(__s,__c);
  return pcVar1;
}



void __android_log_assert(void)

{
  __android_log_assert();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int strcasecmp(char *__s1,char *__s2)

{
  int iVar1;
  
  iVar1 = strcasecmp(__s1,__s2);
  return iVar1;
}



void __memcpy_chk(void)

{
  __memcpy_chk();
  return;
}



void __stack_chk_fail(void)

{
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



// WARNING: Unknown calling convention yet parameter storage is locked

int pthread_mutex_lock(pthread_mutex_t *__mutex)

{
  int iVar1;
  
  iVar1 = pthread_mutex_lock(__mutex);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int pthread_mutex_unlock(pthread_mutex_t *__mutex)

{
  int iVar1;
  
  iVar1 = pthread_mutex_unlock(__mutex);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void free(void *__ptr)

{
  free(__ptr);
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void * memcpy(void *__dest,void *__src,size_t __n)

{
  void *pvVar1;
  
  pvVar1 = memcpy(__dest,__src,__n);
  return pvVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

in_addr_t inet_addr(char *__cp)

{
  in_addr_t iVar1;
  
  iVar1 = inet_addr(__cp);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

hostent * gethostbyname(char *__name)

{
  hostent *phVar1;
  
  phVar1 = gethostbyname(__name);
  return phVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

char * strncpy(char *__dest,char *__src,size_t __n)

{
  char *pcVar1;
  
  pcVar1 = strncpy(__dest,__src,__n);
  return pcVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int select(int __nfds,fd_set *__readfds,fd_set *__writefds,fd_set *__exceptfds,timeval *__timeout)

{
  int iVar1;
  
  iVar1 = select(__nfds,__readfds,__writefds,__exceptfds,__timeout);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

ssize_t send(int __fd,void *__buf,size_t __n,int __flags)

{
  ssize_t sVar1;
  
  sVar1 = send(__fd,__buf,__n,__flags);
  return sVar1;
}



void __errno(void)

{
  __errno();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int snprintf(char *__s,size_t __maxlen,char *__format,...)

{
  int iVar1;
  
  iVar1 = snprintf(__s,__maxlen,__format);
  return iVar1;
}



void __aeabi_idiv(void)

{
  __aeabi_idiv();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

ssize_t recv(int __fd,void *__buf,size_t __n,int __flags)

{
  ssize_t sVar1;
  
  sVar1 = recv(__fd,__buf,__n,__flags);
  return sVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int strncmp(char *__s1,char *__s2,size_t __n)

{
  int iVar1;
  
  iVar1 = strncmp(__s1,__s2,__n);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int strncasecmp(char *__s1,char *__s2,size_t __n)

{
  int iVar1;
  
  iVar1 = strncasecmp(__s1,__s2,__n);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

char * strstr(char *__haystack,char *__needle)

{
  char *pcVar1;
  
  pcVar1 = strstr(__haystack,__needle);
  return pcVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int atoi(char *__nptr)

{
  int iVar1;
  
  iVar1 = atoi(__nptr);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void * realloc(void *__ptr,size_t __size)

{
  void *pvVar1;
  
  pvVar1 = realloc(__ptr,__size);
  return pvVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

void * calloc(size_t __nmemb,size_t __size)

{
  void *pvVar1;
  
  pvVar1 = calloc(__nmemb,__size);
  return pvVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int memcmp(void *__s1,void *__s2,size_t __n)

{
  int iVar1;
  
  iVar1 = memcmp(__s1,__s2,__n);
  return iVar1;
}



void __strlen_chk(void)

{
  __strlen_chk();
  return;
}



void __aeabi_l2d(void)

{
  __aeabi_l2d();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int close(int __fd)

{
  int iVar1;
  
  iVar1 = close(__fd);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

long lrand48(void)

{
  long lVar1;
  
  lVar1 = lrand48();
  return lVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int socket(int __domain,int __type,int __protocol)

{
  int iVar1;
  
  iVar1 = socket(__domain,__type,__protocol);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int fcntl(int __fd,int __cmd,...)

{
  int iVar1;
  
  iVar1 = fcntl(__fd,__cmd);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int connect(int __fd,sockaddr *__addr,socklen_t __len)

{
  int iVar1;
  
  iVar1 = connect(__fd,__addr,__len);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int setsockopt(int __fd,int __level,int __optname,void *__optval,socklen_t __optlen)

{
  int iVar1;
  
  iVar1 = setsockopt(__fd,__level,__optname,__optval,__optlen);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int pthread_create(pthread_t *__newthread,pthread_attr_t *__attr,__start_routine *__start_routine,
                  void *__arg)

{
  int iVar1;
  
  iVar1 = pthread_create(__newthread,__attr,__start_routine,__arg);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int pthread_cond_wait(pthread_cond_t *__cond,pthread_mutex_t *__mutex)

{
  int iVar1;
  
  iVar1 = pthread_cond_wait(__cond,__mutex);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int usleep(__useconds_t __useconds)

{
  int iVar1;
  
  iVar1 = usleep(__useconds);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

size_t strlen(char *__s)

{
  size_t sVar1;
  
  sVar1 = strlen(__s);
  return sVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

char * strcpy(char *__dest,char *__src)

{
  char *pcVar1;
  
  pcVar1 = strcpy(__dest,__src);
  return pcVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int sscanf(char *__s,char *__format,...)

{
  int iVar1;
  
  iVar1 = sscanf(__s,__format);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

long strtol(char *__nptr,char **__endptr,int __base)

{
  long lVar1;
  
  lVar1 = strtol(__nptr,__endptr,__base);
  return lVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

double strtod(char *__nptr,char **__endptr)

{
  double dVar1;
  
  dVar1 = strtod(__nptr,__endptr);
  return dVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int pthread_cond_signal(pthread_cond_t *__cond)

{
  int iVar1;
  
  iVar1 = pthread_cond_signal(__cond);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int pthread_mutex_destroy(pthread_mutex_t *__mutex)

{
  int iVar1;
  
  iVar1 = pthread_mutex_destroy(__mutex);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int pthread_cond_destroy(pthread_cond_t *__cond)

{
  int iVar1;
  
  iVar1 = pthread_cond_destroy(__cond);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int pthread_mutex_init(pthread_mutex_t *__mutex,pthread_mutexattr_t *__mutexattr)

{
  int iVar1;
  
  iVar1 = pthread_mutex_init(__mutex,__mutexattr);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int pthread_cond_init(pthread_cond_t *__cond,pthread_condattr_t *__cond_attr)

{
  int iVar1;
  
  iVar1 = pthread_cond_init(__cond,__cond_attr);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int sprintf(char *__s,char *__format,...)

{
  int iVar1;
  
  iVar1 = sprintf(__s,__format);
  return iVar1;
}



void CdxUrlNew(void)

{
  CdxUrlNew();
  return;
}



void __sprintf_chk(void)

{
  __sprintf_chk();
  return;
}



void CdxUrlFree(void)

{
  CdxUrlFree();
  return;
}



void __strncpy_chk(void)

{
  __strncpy_chk();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int printf(char *__format,...)

{
  int iVar1;
  
  iVar1 = printf(__format);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int puts(char *__s)

{
  int iVar1;
  
  iVar1 = puts(__s);
  return iVar1;
}



void __aeabi_uldivmod(void)

{
  __aeabi_uldivmod();
  return;
}



void __aeabi_ldivmod(void)

{
  __aeabi_ldivmod();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

char * strdup(char *__s)

{
  char *pcVar1;
  
  pcVar1 = strdup(__s);
  return pcVar1;
}



void CdxAsynSocket(void)

{
  CdxAsynSocket();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int inet_aton(char *__cp,in_addr *__inp)

{
  int iVar1;
  
  iVar1 = inet_aton(__cp,__inp);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int getsockopt(int __fd,int __level,int __optname,void *__optval,socklen_t *__optlen)

{
  int iVar1;
  
  iVar1 = getsockopt(__fd,__level,__optname,__optval,__optlen);
  return iVar1;
}



void CdxSockAsynSend(void)

{
  CdxSockAsynSend();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int fflush(FILE *__stream)

{
  int iVar1;
  
  iVar1 = fflush(__stream);
  return iVar1;
}



void __memset_chk(void)

{
  __memset_chk();
  return;
}



void CdxUrlUnescapeString(void)

{
  CdxUrlUnescapeString();
  return;
}



void CdxCheck4Proxies(void)

{
  CdxCheck4Proxies();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

__off64_t lseek64(int __fd,__off64_t __offset,int __whence)

{
  __off64_t _Var1;
  
  _Var1 = lseek64(__fd,__offset,__whence);
  return _Var1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

long syscall(long __sysno,...)

{
  long lVar1;
  
  lVar1 = syscall(__sysno);
  return lVar1;
}



void CdxDumpThreadStack(void)

{
  CdxDumpThreadStack();
  return;
}



// WARNING: Unknown calling convention yet parameter storage is locked

ssize_t read(int __fd,void *__buf,size_t __nbytes)

{
  ssize_t sVar1;
  
  sVar1 = read(__fd,__buf,__nbytes);
  return sVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int strcmp(char *__s1,char *__s2)

{
  int iVar1;
  
  iVar1 = strcmp(__s1,__s2);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int open(char *__file,int __oflag,...)

{
  int iVar1;
  
  iVar1 = open(__file,__oflag);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

int dup(int __fd)

{
  int iVar1;
  
  iVar1 = dup(__fd);
  return iVar1;
}



// WARNING: Unknown calling convention yet parameter storage is locked

ssize_t readlink(char *__path,char *__buf,size_t __len)

{
  ssize_t sVar1;
  
  sVar1 = readlink(__path,__buf,__len);
  return sVar1;
}



void FUN_00012e50(void)

{
  __cxa_finalize(&PTR_LOOP_00023000);
  return;
}



undefined4 FUN_00012e70(undefined4 param_1)

{
  undefined4 uVar1;
  
  uVar1 = __cxa_atexit(param_1,0,&PTR_LOOP_00023000);
  return uVar1;
}



undefined4 AwStreamRegister(undefined4 param_1,undefined4 param_2)

{
  void *pvVar1;
  
  pvVar1 = malloc(0x10);
  *(undefined4 *)((int)pvVar1 + 0xc) = param_1;
  *(undefined4 *)((int)pvVar1 + 8) = param_2;
  CdxListAddTail(pvVar1,streamList);
  streamList._8_4_ = streamList._8_4_ + 1;
  return 0;
}



int CdxStreamCreate(char **param_1)

{
  char *pcVar1;
  int iVar2;
  char *__s2;
  int *piVar3;
  char **__s;
  code **unaff_r8;
  undefined1 *unaff_r9;
  undefined4 uVar4;
  char acStack52 [16];
  int local_24;
  
  __s2 = acStack52;
  piVar3 = &__stack_chk_guard;
  local_24 = __stack_chk_guard;
  memset(__s2,0,0x10);
  __s = (char **)*param_1;
  pcVar1 = strchr((char *)__s,0x3a);
  if ((pcVar1 != (char *)0x0) && ((int)(pcVar1 + -(int)__s) < 0x10)) {
    __memcpy_chk(__s2,__s,pcVar1 + -(int)__s,0x10);
    unaff_r9 = streamList;
    __s = streamList._0_4_;
    goto LAB_00012fde;
  }
  pcVar1 = "!(colon && (colon - source->uri < 16))";
  uVar4 = 0x68;
  __s2 = "colon && (colon - source->uri < 16)";
LAB_00012fc4:
  do {
    __android_log_assert
              (pcVar1,"awplayer","<%s:%d>CDX_CHECK(%s) failed.","CdxStreamCreate",uVar4,__s2);
    do {
      iVar2 = strcasecmp(__s[2],__s2);
      if (iVar2 == 0) {
        if (*unaff_r8 != (code *)0x0) {
          iVar2 = (**unaff_r8)(param_1);
          if (iVar2 == 0) {
            __android_log_print(6,"awplayer",&DAT_0001ea38,"CdxStreamCreate",0x7f,*param_1);
          }
LAB_00013020:
          if (local_24 != *piVar3) {
                    // WARNING: Subroutine does not return
            __stack_chk_fail();
          }
          return iVar2;
        }
        piVar3 = (int *)0x7b;
        pcVar1 = "!(ctor->create)";
        uVar4 = 0x7b;
        __s2 = "ctor->create";
        goto LAB_00012fc4;
      }
      __s = (char **)*__s;
LAB_00012fde:
      if (__s == (char **)unaff_r9) {
        __android_log_print(6,"awplayer",&DAT_0001ea67,"CdxStreamCreate",0x77,__s2);
        iVar2 = 0;
        goto LAB_00013020;
      }
      unaff_r8 = (code **)__s[3];
    } while (unaff_r8 != (code **)0x0);
    param_1 = (char **)0x6d;
    pcVar1 = "!(streamNode->creator)";
    uVar4 = 0x6d;
    __s2 = "streamNode->creator";
  } while( true );
}



int CdxStreamOpen(char **param_1,pthread_mutex_t *param_2,int *param_3,undefined **param_4,
                 undefined4 *param_5)

{
  undefined *puVar1;
  int iVar2;
  code **ppcVar3;
  char *pcVar4;
  char *pcVar5;
  code *pcVar6;
  char *pcVar7;
  undefined8 uVar8;
  undefined4 uVar9;
  pthread_mutex_t *ppVar10;
  
  ppVar10 = param_2;
  pthread_mutex_lock(param_2);
  if ((param_3 == (int *)0x0) || (*param_3 == 0)) {
    puVar1 = (undefined *)CdxStreamCreate(param_1);
    *param_4 = puVar1;
    pthread_mutex_unlock(param_2);
    if (*param_4 != (undefined *)0x0) {
      while( true ) {
        ppcVar3 = (code **)*param_4;
        if (param_5 == (undefined4 *)0x0) {
          if (ppcVar3 == (code **)0x0) {
            pcVar4 = "!(stream)";
            uVar9 = 0x143;
            pcVar5 = "CdxStreamConnect";
            pcVar7 = "stream";
          }
          else {
            if ((code **)*ppcVar3 == (code **)0x0) {
              pcVar4 = "!(stream->ops)";
              pcVar5 = "CdxStreamConnect";
              uVar9 = 0x144;
              pcVar7 = "stream->ops";
            }
            else {
              pcVar6 = *(code **)*ppcVar3;
              if (pcVar6 != (code *)0x0) {
                iVar2 = (*pcVar6)();
                return iVar2;
              }
              param_5 = (undefined4 *)0x145;
              pcVar4 = "!(stream->ops->connect)";
              pcVar5 = "CdxStreamConnect";
              uVar9 = 0x145;
              pcVar7 = "stream->ops->connect";
            }
          }
        }
        else {
          uVar8 = CONCAT44(*param_5,ppcVar3);
          if (ppcVar3 == (code **)0x0) {
            pcVar4 = "!(stream)";
            pcVar5 = "CdxStreamControl";
            uVar9 = 0x17d;
            pcVar7 = "stream";
          }
          else {
            pcVar5 = (char *)*ppcVar3;
            if ((code *)pcVar5 != (code *)0x0) goto LAB_0001317c;
            param_5 = (undefined4 *)0x17e;
            pcVar4 = "!(stream->ops)";
            pcVar5 = "CdxStreamControl";
            uVar9 = 0x17e;
            pcVar7 = "stream->ops";
          }
        }
        while( true ) {
          uVar8 = __android_log_assert
                            (pcVar4,"awplayer","<%s:%d>CDX_CHECK(%s) failed.",pcVar5,uVar9,pcVar7);
LAB_0001317c:
          if (*(code **)((code *)pcVar5 + 0x18) != (code *)0x0) break;
          param_4 = (code **)0x17f;
          pcVar4 = "!(stream->ops->control)";
          pcVar5 = "CdxStreamControl";
          uVar9 = 0x17f;
          pcVar7 = "stream->ops->control";
        }
        iVar2 = (**(code **)((code *)pcVar5 + 0x18))((int)uVar8,(int)((ulonglong)uVar8 >> 0x20));
        if (iVar2 < 0) break;
        param_5 = (undefined4 *)param_5[2];
      }
      __android_log_print(6,"awplayer",&DAT_0001eb32,"CdxStreamOpen",0x9c,*param_5);
      return iVar2;
    }
    __android_log_print(5,"awplayer","<%s:%u>: open stream failure.","CdxStreamOpen",0x93,ppVar10);
  }
  else {
    __android_log_print(5,"awplayer","<%s:%u>: open stream user cancel.","CdxStreamOpen",0x8b,
                        ppVar10);
    pthread_mutex_unlock(param_2);
  }
  return -1;
}



undefined4 _edata(undefined4 param_1,int param_2,int param_3,int param_4,undefined4 param_5)

{
  pthread_mutex_t *unaff_r4;
  
  __android_log_print(5,param_2 + 0x130f4,param_3 + 0x130f8,param_4 + 0x130fa);
  pthread_mutex_unlock(unaff_r4);
  return 0xffffffff;
}



undefined4 _end(pthread_mutex_t *param_1)

{
  pthread_mutex_unlock(param_1);
  return 0xffffffff;
}



void FUN_000132cc(int param_1,int *param_2,int param_3,int param_4)

{
  undefined4 *puVar1;
  int iVar2;
  
  if (param_4 != 0) {
    free(*(void **)(param_1 + param_3 * 0xc));
  }
  *param_2 = *param_2 + -1;
  puVar1 = (undefined4 *)((param_3 + 1) * 0xc + param_1);
  while (param_3 < *param_2) {
    param_3 = param_3 + 1;
    puVar1[-3] = *puVar1;
    puVar1[-2] = puVar1[1];
    puVar1[-1] = puVar1[2];
    puVar1 = puVar1 + 3;
  }
  iVar2 = param_1 + param_3 * 0xc;
  *(undefined4 *)(param_1 + param_3 * 0xc) = 0;
  *(undefined4 *)(iVar2 + 4) = 0;
  *(undefined4 *)(iVar2 + 8) = 0;
  return;
}



// WARNING: Type propagation algorithm not settling

hostent * FUN_0001331c(int param_1,char **param_2,uint param_3)

{
  char *__cp;
  in_addr_t iVar1;
  hostent *phVar2;
  char *__n;
  char *__src;
  
  __src = *param_2;
  __n = param_2[1];
  __cp = __src;
  if (__src[(int)__n] != '\0') {
    __cp = (char *)malloc((size_t)(__n + 1));
    memcpy(__cp,__src,(size_t)__n);
    __cp[(int)param_2[1]] = '\0';
  }
  iVar1 = inet_addr(__cp);
  *(in_addr_t *)(param_1 + 4) = iVar1;
  if (iVar1 == 0xffffffff) {
    phVar2 = gethostbyname(__cp);
    if ((phVar2 == (hostent *)0x0) ||
       (phVar2 = (hostent *)((hostent *)phVar2->h_addr_list)->h_name, phVar2 == (hostent *)0x0))
    goto LAB_0001337a;
    *(char **)(param_1 + 4) = phVar2->h_name;
  }
  *(ushort *)(param_1 + 2) = (ushort)((param_3 & 0xff) << 8) | (ushort)(param_3 >> 8) & 0xff;
  phVar2 = (hostent *)0x1;
LAB_0001337a:
  if (__cp != *param_2) {
    free(__cp);
  }
  return phVar2;
}



void aw_set_rtmp_parameter(int param_1)

{
  *(undefined4 *)(param_1 + 0x4a0) = 3;
  *(void **)(param_1 + 0x49c) = (void *)(param_1 + 0x7c);
  memcpy((void *)(param_1 + 0x7c),&DAT_0001eb92,4);
  *(undefined4 *)(param_1 + 0x4a8) = 7;
  *(void **)(param_1 + 0x4a4) = (void *)(param_1 + 0x80);
  memcpy((void *)(param_1 + 0x80),"connect",8);
  *(undefined4 *)(param_1 + 0x4b0) = 8;
  *(void **)(param_1 + 0x4ac) = (void *)(param_1 + 0x88);
  memcpy((void *)(param_1 + 0x88),"flashVer",9);
  *(undefined4 *)(param_1 + 0x4b8) = 6;
  *(void **)(param_1 + 0x4b4) = (void *)(param_1 + 0x91);
  memcpy((void *)(param_1 + 0x91),"swfUrl",7);
  *(undefined4 *)(param_1 + 0x4c0) = 7;
  *(void **)(param_1 + 0x4bc) = (void *)(param_1 + 0x98);
  memcpy((void *)(param_1 + 0x98),"pageUrl",8);
  *(undefined4 *)(param_1 + 0x4c8) = 5;
  *(void **)(param_1 + 0x4c4) = (void *)(param_1 + 0xa0);
  memcpy((void *)(param_1 + 0xa0),"tcUrl",6);
  *(undefined4 *)(param_1 + 0x4d0) = 4;
  *(void **)(param_1 + 0x4cc) = (void *)(param_1 + 0xa6);
  memcpy((void *)(param_1 + 0xa6),&DAT_0001ebbc,5);
  *(undefined4 *)(param_1 + 0x4d8) = 0xc;
  *(void **)(param_1 + 0x4d4) = (void *)(param_1 + 0xab);
  memcpy((void *)(param_1 + 0xab),"capabilities",0xd);
  *(undefined4 *)(param_1 + 0x4e0) = 0xb;
  *(void **)(param_1 + 0x4dc) = (void *)(param_1 + 0xb8);
  memcpy((void *)(param_1 + 0xb8),"audioCodecs",0xc);
  *(undefined4 *)(param_1 + 0x4e8) = 0xb;
  *(void **)(param_1 + 0x4e4) = (void *)(param_1 + 0xc4);
  memcpy((void *)(param_1 + 0xc4),"videoCodecs",0xc);
  *(void **)(param_1 + 0x4ec) = (void *)(param_1 + 0xd0);
  *(undefined4 *)(param_1 + 0x4f0) = 0xd;
  memcpy((void *)(param_1 + 0xd0),"videoFunction",0xe);
  *(undefined4 *)(param_1 + 0x4f8) = 0xe;
  *(void **)(param_1 + 0x4f4) = (void *)(param_1 + 0xde);
  memcpy((void *)(param_1 + 0xde),"objectEncoding",0xf);
  *(undefined4 *)(param_1 + 0x500) = 0xb;
  *(void **)(param_1 + 0x4fc) = (void *)(param_1 + 0xed);
  memcpy((void *)(param_1 + 0xed),"secureToken",0xc);
  *(undefined4 *)(param_1 + 0x508) = 0x13;
  *(void **)(param_1 + 0x504) = (void *)(param_1 + 0xf9);
  memcpy((void *)(param_1 + 0xf9),"secureTokenResponse",0x14);
  *(undefined4 *)(param_1 + 0x510) = 4;
  *(void **)(param_1 + 0x50c) = (void *)(param_1 + 0x10d);
  memcpy((void *)(param_1 + 0x10d),&DAT_0001ec23,5);
  *(void **)(param_1 + 0x514) = (void *)(param_1 + 0x112);
  *(undefined4 *)(param_1 + 0x518) = 10;
  memcpy((void *)(param_1 + 0x112),"nonprivate",0xb);
  *(undefined4 *)(param_1 + 0x520) = 5;
  *(void **)(param_1 + 0x51c) = (void *)(param_1 + 0x11d);
  memcpy((void *)(param_1 + 0x11d),"pause",6);
  *(undefined4 *)(param_1 + 0x528) = 8;
  *(void **)(param_1 + 0x524) = (void *)(param_1 + 0x123);
  memcpy((void *)(param_1 + 0x123),"_checkbw",9);
  *(undefined4 *)(param_1 + 0x530) = 7;
  *(void **)(param_1 + 0x52c) = (void *)(param_1 + 300);
  memcpy((void *)(param_1 + 300),"_result",8);
  *(undefined4 *)(param_1 + 0x538) = 4;
  *(void **)(param_1 + 0x534) = (void *)(param_1 + 0x134);
  memcpy((void *)(param_1 + 0x134),&DAT_0001ec4a,5);
  *(undefined4 *)(param_1 + 0x540) = 4;
  *(void **)(param_1 + 0x53c) = (void *)(param_1 + 0x139);
  memcpy((void *)(param_1 + 0x139),&DAT_0001ec4f,5);
  *(undefined4 *)(param_1 + 0x548) = 4;
  *(void **)(param_1 + 0x544) = (void *)(param_1 + 0x13e);
  memcpy((void *)(param_1 + 0x13e),&DAT_0001ec54,5);
  *(undefined4 *)(param_1 + 0x550) = 0xc;
  *(void **)(param_1 + 0x54c) = (void *)(param_1 + 0x143);
  memcpy((void *)(param_1 + 0x143),"set_playlist",0xd);
  *(undefined4 *)(param_1 + 0x558) = 1;
  *(void **)(param_1 + 0x554) = (void *)(param_1 + 0x150);
  memcpy((void *)(param_1 + 0x150),&DAT_0001ec66,2);
  *(undefined4 *)(param_1 + 0x560) = 8;
  *(void **)(param_1 + 0x55c) = (void *)(param_1 + 0x152);
  memcpy((void *)(param_1 + 0x152),"onBWDone",9);
  *(undefined4 *)(param_1 + 0x568) = 0xd;
  *(void **)(param_1 + 0x564) = (void *)(param_1 + 0x15b);
  memcpy((void *)(param_1 + 0x15b),"onFCSubscribe",0xe);
  *(undefined4 *)(param_1 + 0x570) = 0xf;
  *(void **)(param_1 + 0x56c) = (void *)(param_1 + 0x169);
  memcpy((void *)(param_1 + 0x169),"onFCUnsubscribe",0x10);
  *(undefined4 *)(param_1 + 0x570) = 0xf;
  *(void **)(param_1 + 0x56c) = (void *)(param_1 + 0x179);
  memcpy((void *)(param_1 + 0x179),"onFCUnsubscribe",0x10);
  *(undefined4 *)(param_1 + 0x578) = 10;
  *(void **)(param_1 + 0x574) = (void *)(param_1 + 0x189);
  memcpy((void *)(param_1 + 0x189),"_onbwcheck",0xb);
  *(void **)(param_1 + 0x57c) = (void *)(param_1 + 0x194);
  *(undefined4 *)(param_1 + 0x580) = 9;
  memcpy((void *)(param_1 + 0x194),"_onbwdone",10);
  *(undefined4 *)(param_1 + 0x588) = 6;
  *(void **)(param_1 + 0x584) = (void *)(param_1 + 0x19e);
  memcpy((void *)(param_1 + 0x19e),"_error",7);
  *(undefined4 *)(param_1 + 0x590) = 5;
  *(void **)(param_1 + 0x58c) = (void *)(param_1 + 0x1a5);
  memcpy((void *)(param_1 + 0x1a5),"close",6);
  *(undefined4 *)(param_1 + 0x598) = 4;
  *(void **)(param_1 + 0x594) = (void *)(param_1 + 0x1ab);
  memcpy((void *)(param_1 + 0x1ab),&DAT_0001ecb1,5);
  *(undefined4 *)(param_1 + 0x5a0) = 5;
  *(void **)(param_1 + 0x59c) = (void *)(param_1 + 0x1b0);
  memcpy((void *)(param_1 + 0x1b0),"level",6);
  *(undefined4 *)(param_1 + 0x5a8) = 8;
  *(void **)(param_1 + 0x5a4) = (void *)(param_1 + 0x1b6);
  memcpy((void *)(param_1 + 0x1b6),"onStatus",9);
  *(undefined4 *)(param_1 + 0x5b0) = 0xe;
  *(void **)(param_1 + 0x5ac) = (void *)(param_1 + 0x1bf);
  memcpy((void *)(param_1 + 0x1bf),"playlist_ready",0xf);
  *(void **)(param_1 + 0x5b4) = (void *)(param_1 + 0x1ce);
  *(undefined4 *)(param_1 + 0x5b8) = 10;
  memcpy((void *)(param_1 + 0x1ce),"onMetaData",0xb);
  *(undefined4 *)(param_1 + 0x5c0) = 8;
  *(void **)(param_1 + 0x5bc) = (void *)(param_1 + 0x1d9);
  memcpy((void *)(param_1 + 0x1d9),"duration",9);
  *(undefined4 *)(param_1 + 0x5c8) = 5;
  *(void **)(param_1 + 0x5c4) = (void *)(param_1 + 0x1e2);
  memcpy((void *)(param_1 + 0x1e2),"video",6);
  *(undefined4 *)(param_1 + 0x5d0) = 5;
  *(void **)(param_1 + 0x5cc) = (void *)(param_1 + 0x1e8);
  memcpy((void *)(param_1 + 0x1e8),"audio",6);
  *(undefined4 *)(param_1 + 0x5d0) = 5;
  *(void **)(param_1 + 0x5cc) = (void *)(param_1 + 0x1ee);
  memcpy((void *)(param_1 + 0x1ee),"audio",6);
  *(void **)(param_1 + 0x5d4) = (void *)(param_1 + 500);
  *(undefined4 *)(param_1 + 0x5d8) = 9;
  memcpy((void *)(param_1 + 500),"FCPublish",10);
  *(undefined4 *)(param_1 + 0x5e0) = 0xb;
  *(void **)(param_1 + 0x5dc) = (void *)(param_1 + 0x1fe);
  memcpy((void *)(param_1 + 0x1fe),"FCUnpublish",0xc);
  *(undefined4 *)(param_1 + 0x5e8) = 0xd;
  *(void **)(param_1 + 0x5e4) = (void *)(param_1 + 0x20a);
  memcpy((void *)(param_1 + 0x20a),"releaseStream",0xe);
  *(undefined4 *)(param_1 + 0x5f0) = 7;
  *(void **)(param_1 + 0x5ec) = (void *)(param_1 + 0x218);
  memcpy((void *)(param_1 + 0x218),"publish",8);
  *(void **)(param_1 + 0x5f4) = (void *)(param_1 + 0x220);
  *(undefined4 *)(param_1 + 0x5f8) = 4;
  memcpy((void *)(param_1 + 0x220),&DAT_0001ed20,5);
  *(undefined4 *)(param_1 + 0x600) = 6;
  *(void **)(param_1 + 0x5fc) = (void *)(param_1 + 0x225);
  memcpy((void *)(param_1 + 0x225),"record",7);
  *(undefined4 *)(param_1 + 0x608) = 4;
  *(void **)(param_1 + 0x604) = (void *)(param_1 + 0x22c);
  memcpy((void *)(param_1 + 0x22c),&DAT_0001ed2c,5);
  *(undefined4 *)(param_1 + 0x610) = 0xc;
  *(void **)(param_1 + 0x60c) = (void *)(param_1 + 0x231);
  memcpy((void *)(param_1 + 0x231),"createStream",0xd);
  *(undefined4 *)(param_1 + 0x618) = 0xb;
  *(void **)(param_1 + 0x614) = (void *)(param_1 + 0x23e);
  memcpy((void *)(param_1 + 0x23e),"FCSubscribe",0xc);
  *(undefined4 *)(param_1 + 0x620) = 0xc;
  *(void **)(param_1 + 0x61c) = (void *)(param_1 + 0x24a);
  memcpy((void *)(param_1 + 0x24a),"deleteStream",0xd);
  *(undefined4 *)(param_1 + 0x628) = 0x27;
  *(char **)(param_1 + 0x624) = (char *)(param_1 + 599);
  strncpy((char *)(param_1 + 599),"NetStream.Authenticate.UsherToken",0x28);
  *(undefined4 *)(param_1 + 0x630) = 0x10;
  *(void **)(param_1 + 0x62c) = (void *)(param_1 + 0x27f);
  memcpy((void *)(param_1 + 0x27f),"NetStream.Failed",0x11);
  *(void **)(param_1 + 0x634) = (void *)(param_1 + 0x290);
  *(undefined4 *)(param_1 + 0x638) = 0x15;
  memcpy((void *)(param_1 + 0x290),"NetStream.Play.Failed",0x16);
  *(undefined4 *)(param_1 + 0x640) = 0x1d;
  *(void **)(param_1 + 0x63c) = (void *)(param_1 + 0x2a6);
  memcpy((void *)(param_1 + 0x2a6),"NetStream.Play.StreamNotFound",0x1e);
  *(undefined4 *)(param_1 + 0x648) = 0x20;
  *(void **)(param_1 + 0x644) = (void *)(param_1 + 0x2c4);
  memcpy((void *)(param_1 + 0x2c4),"NetConnection.Connect.InvalidApp",0x21);
  *(undefined4 *)(param_1 + 0x650) = 0x14;
  *(void **)(param_1 + 0x64c) = (void *)(param_1 + 0x2e5);
  memcpy((void *)(param_1 + 0x2e5),"NetStream.Play.Start",0x15);
  *(void **)(param_1 + 0x654) = (void *)(param_1 + 0x2fa);
  *(undefined4 *)(param_1 + 0x658) = 0x17;
  memcpy((void *)(param_1 + 0x2fa),"NetStream.Play.Complete",0x18);
  *(undefined4 *)(param_1 + 0x660) = 0x13;
  *(void **)(param_1 + 0x65c) = (void *)(param_1 + 0x312);
  memcpy((void *)(param_1 + 0x312),"NetStream.Play.Stop",0x14);
  *(undefined4 *)(param_1 + 0x668) = 0x15;
  *(void **)(param_1 + 0x664) = (void *)(param_1 + 0x326);
  memcpy((void *)(param_1 + 0x326),"NetStream.Seek.Notify",0x16);
  *(void **)(param_1 + 0x66c) = (void *)(param_1 + 0x33c);
  *(undefined4 *)(param_1 + 0x670) = 0x16;
  memcpy((void *)(param_1 + 0x33c),"NetStream.Pause.Notify",0x17);
  *(undefined4 *)(param_1 + 0x678) = 0x1c;
  *(void **)(param_1 + 0x674) = (void *)(param_1 + 0x353);
  memcpy((void *)(param_1 + 0x353),"NetStream.Play.PublishNotify",0x1d);
  *(void **)(param_1 + 0x67c) = (void *)(param_1 + 0x370);
  *(undefined4 *)(param_1 + 0x680) = 0x1e;
  memcpy((void *)(param_1 + 0x370),"NetStream.Play.UnpublishNotify",0x1f);
  *(undefined4 *)(param_1 + 0x688) = 0x17;
  *(void **)(param_1 + 0x684) = (void *)(param_1 + 0x38f);
  memcpy((void *)(param_1 + 0x38f),"NetStream.Publish.Start",0x18);
  return;
}



int aw_rtmp_sockBuf_send(uint *param_1,int param_2,int param_3,int param_4)

{
  uint uVar1;
  int iVar2;
  ssize_t sVar3;
  int *piVar4;
  int iVar5;
  timeval local_a8;
  int aiStack160 [33];
  
  if (param_4 != 1) {
    iVar5 = 0;
LAB_00013afe:
    do {
      do {
        memset(aiStack160,0,0x80);
        uVar1 = *param_1;
        local_a8.tv_usec = 100000;
        local_a8.tv_sec = 0;
        aiStack160[(int)uVar1 >> 5] = 1 << (uVar1 & 0x1f);
        iVar2 = select(uVar1 + 1,(fd_set *)0x0,(fd_set *)aiStack160,(fd_set *)0x0,&local_a8);
      } while (iVar2 < 1);
      while( true ) {
        sVar3 = send(*param_1,(void *)(param_2 + iVar5),param_3 - iVar5,0);
        if (sVar3 < 0) break;
        if (sVar3 == 0) goto LAB_00013afe;
        iVar5 = iVar5 + sVar3;
        if (iVar5 == param_3) {
          return iVar5;
        }
      }
      piVar4 = (int *)__errno();
    } while (*piVar4 == 0xb);
  }
  return -1;
}



void FUN_00013b74(int param_1,int param_2,int param_3,int param_4)

{
  int iVar1;
  undefined *puVar2;
  char acStack548 [512];
  int local_24;
  
  local_24 = __stack_chk_guard;
  puVar2 = *(undefined **)(param_1 + 0xc0a04);
  if (puVar2 == (undefined *)0x0) {
    puVar2 = &DAT_0001eea1;
  }
  iVar1 = snprintf(acStack548,0x200,
                                      
                   "POST /%s%s/%d HTTP/1.1\r\nHost: %.*s:%d\r\nAccept: */*\r\nUser-Agent: Shockwave Flash\nConnection: Keep-Alive\nCache-Control: no-cache\r\nContent-type: application/x-fcs\r\nContent-length: %d\r\n\r\n"
                   ,(&PTR_DAT_00022b7c)[param_2],puVar2,*(undefined4 *)(param_1 + 0xc09f8),
                   *(undefined4 *)(param_1 + 0xc4a50),*(undefined4 *)(param_1 + 0xc4a4c),
                   (uint)*(ushort *)(param_1 + 0xc4ada),param_4);
  aw_rtmp_sockBuf_send((uint *)(param_1 + 0xc0a38),(int)acStack548,iVar1,*(int *)(param_1 + 0x54));
  aw_rtmp_sockBuf_send((uint *)(param_1 + 0xc0a38),param_3,param_4,*(int *)(param_1 + 0x54));
  *(int *)(param_1 + 0xc09f8) = *(int *)(param_1 + 0xc09f8) + 1;
  iVar1 = __stack_chk_guard;
  *(int *)(param_1 + 0xc0a00) = *(int *)(param_1 + 0xc0a00) + 1;
  if (local_24 != iVar1) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



int FUN_00013c3c(int param_1,int param_2,uint param_3)

{
  int iVar1;
  
  do {
    if ((int)param_3 < 1) {
LAB_00013c84:
      iVar1 = 1 - param_3;
      if (1 < param_3) {
        iVar1 = 0;
      }
      return iVar1;
    }
    if (*(int *)(param_1 + 0xc4ad0) << 0x1f < 0) {
      iVar1 = FUN_00013b74(param_1,1,param_2,param_3);
    }
    else {
      iVar1 = aw_rtmp_sockBuf_send
                        ((uint *)(param_1 + 0xc0a38),param_2,param_3,*(int *)(param_1 + 0x54));
    }
    if (iVar1 < 0) {
      param_3 = 1;
      goto LAB_00013c84;
    }
    if (iVar1 == 0) goto LAB_00013c84;
    param_3 = param_3 - iVar1;
    param_2 = param_2 + iVar1;
  } while( true );
}



int CdxRecv(uint param_1,int param_2,int param_3,int param_4,int *param_5)

{
  int iVar1;
  int *piVar2;
  ssize_t sVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  timeval local_b0;
  int aiStack168 [33];
  
  iVar6 = 0x7fffffff;
  if (param_4 != 0) {
    iVar6 = __aeabi_idiv(param_4,100000);
  }
  iVar5 = 0;
  do {
    if (iVar6 <= iVar5) {
      return 0;
    }
    if ((param_5 != (int *)0x0) && (*param_5 != 0)) {
      return -1;
    }
    iVar4 = 0;
    memset(aiStack168,0,0x80);
    local_b0.tv_sec = 0;
    aiStack168[(int)param_1 >> 5] = 1 << (param_1 & 0x1f);
    local_b0.tv_usec = 100000;
    iVar1 = select(param_1 + 1,(fd_set *)aiStack168,(fd_set *)0x0,(fd_set *)0x0,&local_b0);
    if (iVar1 < 0) {
      piVar2 = (int *)__errno();
      if (*piVar2 != 4) {
        return -1;
      }
    }
    else {
      if (iVar1 != 0) {
        while( true ) {
          if ((param_5 != (int *)0x0) && (*param_5 != 0)) {
            return -1;
          }
          sVar3 = recv(param_1,(void *)(param_2 + iVar4),param_3 - iVar4,0);
          if (sVar3 < 0) break;
          if (sVar3 == 0) goto LAB_00013d3a;
          iVar4 = iVar4 + sVar3;
          if (iVar4 == param_3) {
            return iVar4;
          }
        }
        piVar2 = (int *)__errno();
        if (*piVar2 != 0xb) {
          return -1;
        }
LAB_00013d3a:
        if (iVar4 != 0) {
          return iVar4;
        }
      }
    }
    iVar5 = iVar5 + 1;
  } while( true );
}



undefined8 aw_rtmp_sockbuf_fill(uint *param_1,int *param_2)

{
  int iVar1;
  uint extraout_r1;
  uint uVar2;
  
  uVar2 = param_1[1];
  if (uVar2 == 0) {
    param_1[2] = (uint)(param_1 + 3);
  }
  iVar1 = CdxRecv(*param_1,param_1[2] + uVar2,(int)param_1 + ((0x400c - param_1[2]) - uVar2),0,
                  param_2);
  uVar2 = extraout_r1;
  if (iVar1 != -1) {
    uVar2 = param_1[1] + iVar1;
  }
  if (iVar1 != -1) {
    param_1[1] = uVar2;
  }
  else {
    iVar1 = 0;
    param_1[0x1003] = 1;
  }
  return CONCAT44(param_2,iVar1);
}



undefined4 FUN_00013da4(int param_1,int param_2)

{
  int iVar1;
  char *pcVar2;
  undefined *puVar3;
  char *__s1;
  char *pcVar4;
  int iVar5;
  undefined8 uVar6;
  
  if ((param_2 == 0) ||
     (uVar6 = aw_rtmp_sockbuf_fill((uint *)(param_1 + 0xc0a38),(int *)(param_1 + 0x54)),
     -1 < (int)uVar6)) {
    iVar5 = *(int *)(param_1 + 0xc0a3c);
    if (iVar5 < 0x90) {
      return 0xfffffffe;
    }
    __s1 = *(char **)(param_1 + 0xc0a40);
    iVar1 = strncmp(__s1,"HTTP/1.1 200 ",0xd);
    if (iVar1 == 0) {
      pcVar4 = __s1 + 0xd;
      do {
        pcVar2 = strstr(pcVar4,"Content-");
        if (pcVar2 == (char *)0x0) {
          return 0xffffffff;
        }
        pcVar4 = pcVar2 + 8;
        iVar1 = strncasecmp(pcVar4,"length:",7);
      } while (iVar1 != 0);
      iVar1 = atoi(pcVar2 + 0x10);
      pcVar4 = strstr(pcVar2 + 0x10,"\r\n\r\n");
      if (pcVar4 != (char *)0x0) {
        pcVar2 = pcVar4 + 4;
        *(char **)(param_1 + 0xc0a3c) = __s1 + (iVar5 - (int)pcVar2);
        *(char **)(param_1 + 0xc0a40) = pcVar2;
        *(int *)(param_1 + 0xc0a00) = *(int *)(param_1 + 0xc0a00) + -1;
        if (*(int *)(param_1 + 0xc0a04) != 0) {
          *(int *)(param_1 + 0xc09fc) = iVar1 + -1;
          *(char **)(param_1 + 0xc0a40) = pcVar4 + 5;
          *(char **)(param_1 + 0xc0a3c) = __s1 + (iVar5 - (int)pcVar2) + -1;
          return 0;
        }
        *(int *)(param_1 + 0xc0a08) = iVar1;
        puVar3 = (undefined *)malloc(iVar1 + 1);
        *(undefined **)(param_1 + 0xc0a04) = puVar3;
        if (puVar3 != (undefined *)0x0) {
          *puVar3 = 0x2f;
          memcpy(puVar3 + 1,pcVar2,iVar1 - 1);
          *(undefined *)(*(int *)(param_1 + 0xc0a04) + iVar1) = 0;
          *(undefined4 *)(param_1 + 0xc0a3c) = 0;
          return 0;
        }
        return 0xffffffff;
      }
    }
  }
  return 0xffffffff;
}



undefined * aw_amf_encode_int16(undefined *param_1,undefined *param_2,undefined4 param_3)

{
  if (param_1 + 2 <= param_2) {
    param_1[1] = (char)param_3;
    *param_1 = (char)((uint)param_3 >> 8);
    return param_1 + 2;
  }
  return (undefined *)0x0;
}



undefined * aw_amf_encode_int24(undefined *param_1,undefined *param_2,undefined4 param_3)

{
  if (param_1 + 3 <= param_2) {
    param_1[2] = (char)param_3;
    param_1[1] = (char)((uint)param_3 >> 8);
    *param_1 = (char)((uint)param_3 >> 0x10);
    return param_1 + 3;
  }
  return (undefined *)0x0;
}



undefined * aw_amf_encode_int32(undefined *param_1,undefined *param_2,undefined4 param_3)

{
  if (param_1 + 4 <= param_2) {
    param_1[3] = (char)param_3;
    param_1[2] = (char)((uint)param_3 >> 8);
    param_1[1] = (char)((uint)param_3 >> 0x10);
    *param_1 = (char)((uint)param_3 >> 0x18);
    return param_1 + 4;
  }
  return (undefined *)0x0;
}



undefined4 aw_encode_int32Le(undefined *param_1,undefined4 param_2)

{
  *param_1 = (char)param_2;
  param_1[1] = (char)((uint)param_2 >> 8);
  param_1[2] = (char)((uint)param_2 >> 0x10);
  param_1[3] = (char)((uint)param_2 >> 0x18);
  return 4;
}



undefined * aw_amf_encode_string(undefined *param_1,undefined *param_2,void **param_3)

{
  undefined *__dest;
  void *pvVar1;
  
  pvVar1 = param_3[1];
  if (((int)pvVar1 < 0x10000) && (param_2 < param_1 + (int)pvVar1 + 3)) {
    return (undefined *)0x0;
  }
  if (param_1 + (int)pvVar1 + 5 <= param_2) {
    if ((int)pvVar1 < 0x10000) {
      *param_1 = 2;
      __dest = aw_amf_encode_int16(param_1 + 1,param_2,(int)*(short *)(param_3 + 1));
    }
    else {
      *param_1 = 0xc;
      __dest = aw_amf_encode_int32(param_1 + 1,param_2,param_3[1]);
    }
    memcpy(__dest,*param_3,(size_t)param_3[1]);
    return __dest + (int)param_3[1];
  }
  return (undefined *)0x0;
}



undefined *
aw_amf_encode_number(undefined *param_1,undefined *param_2,undefined4 param_3,undefined4 param_4)

{
  undefined *puVar1;
  undefined local_8;
  undefined uStack7;
  undefined uStack6;
  undefined uStack5;
  undefined local_4;
  undefined local_3;
  undefined local_2;
  undefined local_1;
  
  puVar1 = param_1 + 9;
  if (param_2 < puVar1) {
    puVar1 = (undefined *)0x0;
  }
  else {
    *param_1 = 0;
    local_1 = (undefined)((uint)param_4 >> 0x18);
    local_2 = (undefined)((uint)param_4 >> 0x10);
    local_3 = (undefined)((uint)param_4 >> 8);
    param_1[1] = local_1;
    param_1[2] = local_2;
    local_4 = (undefined)param_4;
    uStack5 = (undefined)((uint)param_3 >> 0x18);
    param_1[3] = local_3;
    param_1[4] = local_4;
    param_1[5] = uStack5;
    uStack6 = (undefined)((uint)param_3 >> 0x10);
    uStack7 = (undefined)((uint)param_3 >> 8);
    local_8 = (undefined)param_3;
    param_1[6] = uStack6;
    param_1[7] = uStack7;
    param_1[8] = local_8;
  }
  return puVar1;
}



undefined * aw_amf_encode_boolean(undefined *param_1,undefined *param_2,int param_3)

{
  if (param_1 + 2 <= param_2) {
    *param_1 = 1;
    if (param_3 != 0) {
      param_3 = 1;
    }
    param_1[1] = (char)param_3;
    return param_1 + 2;
  }
  return (undefined *)0x0;
}



undefined *
aw_amf_encode_named_string(undefined *param_1,undefined *param_2,void **param_3,void **param_4)

{
  undefined *puVar1;
  
  if (param_1 + (int)param_3[1] + 2 <= param_2) {
    puVar1 = aw_amf_encode_int16(param_1,param_2,(int)(short)param_3[1]);
    memcpy(puVar1,*param_3,(size_t)param_3[1]);
    puVar1 = aw_amf_encode_string(puVar1 + (int)param_3[1],param_2,param_4);
    return puVar1;
  }
  return (undefined *)0x0;
}



undefined *
aw_amf_encode_named_number
          (undefined *param_1,undefined *param_2,void **param_3,undefined4 param_4,
          undefined4 param_5,undefined4 param_6)

{
  undefined *puVar1;
  
  if (param_1 + (int)param_3[1] + 2 <= param_2) {
    puVar1 = aw_amf_encode_int16(param_1,param_2,(int)(short)param_3[1]);
    memcpy(puVar1,*param_3,(size_t)param_3[1]);
    puVar1 = aw_amf_encode_number(puVar1 + (int)param_3[1],param_2,param_5,param_6);
    return puVar1;
  }
  return (undefined *)0x0;
}



undefined *
aw_amf_encode_named_boolean(undefined *param_1,undefined *param_2,void **param_3,int param_4)

{
  undefined *__dest;
  undefined *puVar1;
  
  if (param_2 < param_1 + (int)param_3[1] + 2) {
    return (undefined *)0x0;
  }
  __dest = aw_amf_encode_int16(param_1,param_2,(int)(short)param_3[1]);
  memcpy(__dest,*param_3,(size_t)param_3[1]);
  puVar1 = __dest + (int)param_3[1];
  if (puVar1 + 2 <= param_2) {
    __dest[(int)param_3[1]] = 1;
    if (param_4 != 0) {
      param_4 = 1;
    }
    puVar1[1] = (char)param_4;
    return puVar1 + 2;
  }
  return (undefined *)0x0;
}



void aw_amf_prop_get_name(undefined4 *param_1,undefined4 *param_2)

{
  undefined4 uVar1;
  
  uVar1 = param_1[1];
  *param_2 = *param_1;
  param_2[1] = uVar1;
  return;
}



char aw_amf_decode_boolean(char *param_1)

{
  char cVar1;
  
  cVar1 = *param_1;
  if (cVar1 != '\0') {
    cVar1 = '\x01';
  }
  return cVar1;
}



undefined2 aw_amf_decode_int16(undefined *param_1)

{
  return CONCAT11(*param_1,param_1[1]);
}



uint aw_amf_decode_int24(byte *param_1)

{
  return (uint)param_1[1] << 8 | (uint)*param_1 << 0x10 | (uint)param_1[2];
}



uint aw_amf_decode_int32(byte *param_1)

{
  return (uint)param_1[1] << 0x10 | (uint)*param_1 << 0x18 | (uint)param_1[3] |
         (uint)param_1[2] << 8;
}



void aw_amf_decode_string(undefined *param_1,undefined4 *param_2)

{
  undefined *puVar1;
  
  puVar1 = (undefined *)(uint)CONCAT11(*param_1,param_1[1]);
  param_2[1] = puVar1;
  if (puVar1 != (undefined *)0x0) {
    puVar1 = param_1 + 2;
  }
  *param_2 = puVar1;
  return;
}



undefined8 aw_amf_decode_number(undefined *param_1)

{
  return CONCAT17(*param_1,CONCAT16(param_1[1],
                                    CONCAT15(param_1[2],
                                             CONCAT14(param_1[3],
                                                      CONCAT13(param_1[4],
                                                               CONCAT12(param_1[5],
                                                                        CONCAT11(param_1[6],
                                                                                 param_1[7])))))));
}



void * aw_rtmp_send_packet(int param_1,int *param_2,int param_3)

{
  bool bVar1;
  undefined *puVar2;
  int iVar3;
  void *pvVar4;
  int iVar5;
  uint uVar6;
  uint uVar7;
  int iVar8;
  byte *__src;
  int iVar9;
  int iVar10;
  int iVar11;
  void *pvVar12;
  undefined *puVar13;
  byte *pbVar14;
  ulonglong uVar15;
  byte local_70;
  int local_6c;
  void *local_58;
  size_t local_54;
  int local_50 [5];
  byte abStack58 [12];
  undefined auStack46 [2];
  int local_2c;
  
  local_2c = __stack_chk_guard;
  local_50[0] = 0xc;
  local_50[1] = 8;
  local_50[2] = 4;
  local_50[3] = 1;
  uVar7 = *(uint *)(param_1 + (*param_2 + 0x101f4) * 4);
  uVar6 = uVar7;
  if ((uVar7 != 0) && (uVar6 = (uint)*(byte *)(param_2 + 2), uVar6 != 0)) {
    if ((*(int *)(uVar7 + 0x10) == param_2[4]) &&
       ((*(char *)(uVar7 + 9) == *(char *)((int)param_2 + 9) && (uVar6 == 1)))) {
      *(undefined *)(param_2 + 2) = 2;
    }
    if ((*(int *)(uVar7 + 0xc) == param_2[3]) && (*(char *)(param_2 + 2) == '\x02')) {
      *(undefined *)(param_2 + 2) = 3;
    }
    uVar6 = *(uint *)(uVar7 + 0xc);
  }
  uVar7 = (uint)*(byte *)(param_2 + 2);
  pvVar12 = (void *)0x0;
  if (uVar7 < 4) {
    puVar13 = (undefined *)param_2[7];
    uVar6 = param_2[3] - uVar6;
    iVar11 = local_50[uVar7];
    __src = puVar13 + -iVar11;
    if (puVar13 == (undefined *)0x0) {
      puVar13 = auStack46;
      __src = abStack58;
    }
    iVar5 = *param_2;
    iVar9 = 2;
    if ((iVar5 < 0x140) && (iVar9 = 1, iVar5 < 0x40)) {
      iVar9 = 0;
      iVar10 = iVar11;
    }
    else {
      __src = __src + -iVar9;
      iVar10 = iVar11 + iVar9;
    }
    bVar1 = 0xfffffe < uVar6 && 1 < iVar11;
    if (bVar1) {
      __src = __src + -4;
      iVar10 = iVar10 + 4;
    }
    local_70 = (byte)((uVar7 & 3) << 6);
    if (iVar9 == 0) {
      local_70 = local_70 | (byte)iVar5;
    }
    else {
      if (iVar9 == 2) {
        local_70 = local_70 | 1;
      }
    }
    pbVar14 = __src + 1;
    *__src = local_70;
    if (iVar9 != 0) {
      iVar5 = *param_2;
      __src[1] = (byte)(iVar5 + -0x40);
      if (iVar9 == 2) {
        pbVar14 = __src + 3;
        __src[2] = (byte)((uint)(iVar5 + -0x40) >> 8);
      }
      else {
        pbVar14 = __src + 2;
      }
    }
    if (1 < iVar11) {
      uVar7 = 0xffffff;
      if (uVar6 < 0xffffff) {
        uVar7 = uVar6;
      }
      pbVar14 = aw_amf_encode_int24(pbVar14,puVar13,uVar7);
      if (4 < iVar11) {
        puVar2 = aw_amf_encode_int24(pbVar14,puVar13,param_2[4]);
        pbVar14 = puVar2 + 1;
        *puVar2 = *(undefined *)((int)param_2 + 9);
        if (8 < iVar11) {
          iVar11 = aw_encode_int32Le(pbVar14,param_2[1]);
          pbVar14 = pbVar14 + iVar11;
        }
      }
    }
    if (bVar1) {
      aw_amf_encode_int32(pbVar14,puVar13,uVar6);
    }
    local_6c = param_2[7];
    iVar5 = param_2[4];
    pvVar12 = (void *)(*(uint *)(param_1 + 0xc4ad0) & 1);
    iVar11 = *(int *)(param_1 + 0x690);
    if (pvVar12 != (void *)0x0) {
      iVar3 = __aeabi_idiv(iVar5 + iVar11 + -1,iVar11);
      if (iVar3 < 2) {
        pvVar12 = (void *)0x0;
      }
      else {
        pvVar12 = malloc((iVar9 + 1) * iVar3 + iVar5 + iVar10);
        if (pvVar12 == (void *)0x0) goto LAB_00014470;
      }
    }
    iVar3 = iVar9 + 1;
    pvVar4 = pvVar12;
    while (iVar5 + iVar10 != 0) {
      if (iVar5 <= iVar11) {
        iVar11 = iVar5;
      }
      uVar6 = iVar10 + iVar11;
      if (pvVar12 == (void *)0x0) {
        iVar10 = FUN_00013c3c(param_1,(int)__src,uVar6);
        if (iVar10 == 0) goto LAB_00014470;
      }
      else {
        memcpy(pvVar4,__src,uVar6);
        pvVar4 = (void *)((int)pvVar4 + uVar6);
      }
      iVar5 = iVar5 - iVar11;
      local_6c = local_6c + iVar11;
      if (iVar5 < 1) {
        iVar10 = 0;
      }
      else {
        __src = (byte *)(local_6c + -1);
        if (iVar9 != 0) {
          __src = __src + -iVar9;
        }
        *__src = local_70 | 0xc0;
        iVar10 = iVar3;
        if (iVar9 != 0) {
          iVar8 = *param_2;
          __src[1] = (byte)(iVar8 + -0x40);
          if (iVar9 == 2) {
            __src[2] = (byte)((uint)(iVar8 + -0x40) >> 8);
          }
        }
      }
    }
    if (pvVar12 != (void *)0x0) {
      pvVar4 = (void *)FUN_00013c3c(param_1,(int)pvVar12,(uint)((int)pvVar4 - (int)pvVar12));
      free(pvVar12);
      pvVar12 = pvVar4;
      if (pvVar4 == (void *)0x0) goto LAB_00014470;
    }
    if (*(char *)((int)param_2 + 9) == '\x14') {
      iVar11 = param_2[7];
      aw_amf_decode_string((undefined *)(iVar11 + 1),&local_58);
      if (param_3 != 0) {
        uVar15 = aw_amf_decode_number((undefined *)(iVar11 + 1) + local_54 + 3);
        if ((*(uint *)(param_1 + 0x6c8) & 0xf) == 0) {
          pvVar12 = realloc(*(void **)(param_1 + 0x6cc),(*(uint *)(param_1 + 0x6c8) + 0x10) * 0xc);
          *(void **)(param_1 + 0x6cc) = pvVar12;
        }
        pvVar12 = malloc(local_54 + 1);
        memcpy(pvVar12,local_58,local_54);
        *(undefined *)((int)pvVar12 + local_54) = 0;
        *(int *)(*(int *)(param_1 + 0x6c8) * 0xc + *(int *)(param_1 + 0x6cc) + 8) =
             SUB84(ROUND((double)((uVar15 & 0xffffffff00000000) + (uVar15 & 0xffffffff))),0);
        *(size_t *)(*(int *)(param_1 + 0x6c8) * 0xc + *(int *)(param_1 + 0x6cc) + 4) = local_54;
        iVar11 = *(int *)(param_1 + 0x6c8);
        *(void **)(*(int *)(param_1 + 0x6cc) + iVar11 * 0xc) = pvVar12;
        *(int *)(param_1 + 0x6c8) = iVar11 + 1;
      }
    }
    iVar11 = *param_2;
    if (*(int *)(param_1 + (iVar11 + 0x101f4) * 4) == 0) {
      pvVar12 = malloc(0x20);
      *(void **)(param_1 + (iVar11 + 0x101f4) * 4) = pvVar12;
    }
    memcpy(*(void **)(param_1 + (*param_2 + 0x101f4) * 4),param_2,0x20);
    pvVar12 = (void *)0x1;
  }
LAB_00014470:
  if (local_2c == __stack_chk_guard) {
    return pvVar12;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void FUN_00014494(int param_1)

{
  undefined *puVar1;
  int iVar2;
  double dVar3;
  int local_43c;
  undefined4 local_438;
  undefined local_434;
  undefined local_433;
  undefined local_432;
  undefined4 local_430;
  undefined *local_42c;
  undefined *local_420;
  undefined auStack1034 [1006];
  int local_1c [2];
  
  local_420 = auStack1034;
  local_1c[0] = __stack_chk_guard;
  local_430 = 0;
  local_438 = 0;
  local_43c = 3;
  local_434 = 1;
  local_433 = 0x14;
  local_432 = 0;
  puVar1 = aw_amf_encode_string(local_420,(undefined *)local_1c,(void **)(param_1 + 0x5dc));
  iVar2 = *(int *)(param_1 + 0x6c4) + 1;
  dVar3 = (double)(longlong)iVar2;
  *(int *)(param_1 + 0x6c4) = iVar2;
  puVar1 = aw_amf_encode_number
                     (puVar1,(undefined *)local_1c,SUB84(dVar3,0),(int)((ulonglong)dVar3 >> 0x20));
  *puVar1 = 5;
  puVar1 = aw_amf_encode_string(puVar1 + 1,(undefined *)local_1c,(void **)(param_1 + 0xc4a64));
  if (puVar1 != (undefined *)0x0) {
    local_42c = puVar1 + -(int)local_420;
    aw_rtmp_send_packet(param_1,&local_43c,0);
  }
  if (local_1c[0] != __stack_chk_guard) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void FUN_00014538(undefined4 param_1,undefined4 param_2,int param_3)

{
  undefined *puVar1;
  int iVar2;
  double dVar3;
  int local_144;
  undefined4 local_140;
  undefined local_13c;
  undefined local_13b;
  undefined local_13a;
  undefined4 local_138;
  undefined *local_134;
  undefined *local_128;
  undefined auStack274 [238];
  int local_24 [2];
  
  local_128 = auStack274;
  local_24[0] = __stack_chk_guard;
  local_138 = 0;
  local_140 = 0;
  local_144 = 3;
  local_13a = 0;
  local_13c = 1;
  local_13b = 0x14;
  puVar1 = aw_amf_encode_string(local_128,(undefined *)local_24,(void **)(param_3 + 0x61c));
  iVar2 = *(int *)(param_3 + 0x6c4) + 1;
  dVar3 = (double)(longlong)iVar2;
  *(int *)(param_3 + 0x6c4) = iVar2;
  puVar1 = aw_amf_encode_number
                     (puVar1,(undefined *)local_24,SUB84(dVar3,0),(int)((ulonglong)dVar3 >> 0x20));
  *puVar1 = 5;
  local_134 = aw_amf_encode_number(puVar1 + 1,(undefined *)local_24,param_1,param_2);
  local_134 = local_134 + -(int)local_128;
  aw_rtmp_send_packet(param_3,&local_144,0);
  if (local_24[0] != __stack_chk_guard) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void FUN_000145d0(int param_1,void **param_2)

{
  undefined *puVar1;
  int local_43c;
  undefined4 local_438;
  undefined local_434;
  undefined local_433;
  undefined local_432;
  undefined4 local_430;
  undefined *local_42c;
  undefined *local_420;
  undefined auStack1034 [1006];
  int local_1c;
  
  local_43c = 3;
  local_1c = __stack_chk_guard;
  local_433 = 0x14;
  local_420 = auStack1034;
  local_434 = 1;
  local_430 = 0;
  local_438 = 0;
  local_432 = 0;
  puVar1 = aw_amf_encode_string(local_420,(undefined *)&local_1c,(void **)(param_1 + 0x504));
  puVar1 = aw_amf_encode_number(puVar1,(undefined *)&local_1c,0,0);
  *puVar1 = 5;
  puVar1 = aw_amf_encode_string(puVar1 + 1,(undefined *)&local_1c,param_2);
  if (puVar1 != (undefined *)0x0) {
    local_42c = puVar1 + -(int)local_420;
    aw_rtmp_send_packet(param_1,&local_43c,0);
  }
  if (local_1c != __stack_chk_guard) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void FUN_00014660(int param_1)

{
  undefined *puVar1;
  int iVar2;
  double dVar3;
  int local_43c;
  undefined4 local_438;
  undefined local_434;
  undefined local_433;
  undefined local_432;
  undefined4 local_430;
  undefined *local_42c;
  undefined *local_420;
  undefined auStack1034 [1006];
  int local_1c [2];
  
  local_420 = auStack1034;
  local_1c[0] = __stack_chk_guard;
  local_430 = 0;
  local_438 = 0;
  local_43c = 3;
  local_434 = 1;
  local_433 = 0x14;
  local_432 = 0;
  puVar1 = aw_amf_encode_string(local_420,(undefined *)local_1c,(void **)(param_1 + 0x5e4));
  iVar2 = *(int *)(param_1 + 0x6c4) + 1;
  dVar3 = (double)(longlong)iVar2;
  *(int *)(param_1 + 0x6c4) = iVar2;
  puVar1 = aw_amf_encode_number
                     (puVar1,(undefined *)local_1c,SUB84(dVar3,0),(int)((ulonglong)dVar3 >> 0x20));
  *puVar1 = 5;
  puVar1 = aw_amf_encode_string(puVar1 + 1,(undefined *)local_1c,(void **)(param_1 + 0xc4a64));
  if (puVar1 != (undefined *)0x0) {
    local_42c = puVar1 + -(int)local_420;
    aw_rtmp_send_packet(param_1,&local_43c,0);
  }
  if (local_1c[0] != __stack_chk_guard) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void FUN_00014704(int param_1)

{
  undefined *puVar1;
  int iVar2;
  double dVar3;
  int local_43c;
  undefined4 local_438;
  undefined local_434;
  undefined local_433;
  undefined local_432;
  undefined4 local_430;
  undefined *local_42c;
  undefined *local_420;
  undefined auStack1034 [1006];
  int local_1c [2];
  
  local_420 = auStack1034;
  local_1c[0] = __stack_chk_guard;
  local_430 = 0;
  local_438 = 0;
  local_43c = 3;
  local_434 = 1;
  local_433 = 0x14;
  local_432 = 0;
  puVar1 = aw_amf_encode_string(local_420,(undefined *)local_1c,(void **)(param_1 + 0x5d4));
  iVar2 = *(int *)(param_1 + 0x6c4) + 1;
  dVar3 = (double)(longlong)iVar2;
  *(int *)(param_1 + 0x6c4) = iVar2;
  puVar1 = aw_amf_encode_number
                     (puVar1,(undefined *)local_1c,SUB84(dVar3,0),(int)((ulonglong)dVar3 >> 0x20));
  *puVar1 = 5;
  puVar1 = aw_amf_encode_string(puVar1 + 1,(undefined *)local_1c,(void **)(param_1 + 0xc4a64));
  if (puVar1 != (undefined *)0x0) {
    local_42c = puVar1 + -(int)local_420;
    aw_rtmp_send_packet(param_1,&local_43c,0);
  }
  if (local_1c[0] != __stack_chk_guard) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void FUN_000147a8(int param_1,void **param_2)

{
  undefined *puVar1;
  int iVar2;
  double dVar3;
  int local_43c;
  undefined4 local_438;
  undefined local_434;
  undefined local_433;
  undefined local_432;
  undefined4 local_430;
  undefined *local_42c;
  undefined *local_420;
  undefined auStack1034 [1006];
  int local_1c;
  
  local_420 = auStack1034;
  local_1c = __stack_chk_guard;
  local_430 = 0;
  local_438 = 0;
  local_43c = 3;
  local_434 = 1;
  local_433 = 0x14;
  local_432 = 0;
  puVar1 = aw_amf_encode_string(local_420,(undefined *)&local_1c,(void **)(param_1 + 0x624));
  iVar2 = *(int *)(param_1 + 0x6c4) + 1;
  dVar3 = (double)(longlong)iVar2;
  *(int *)(param_1 + 0x6c4) = iVar2;
  puVar1 = aw_amf_encode_number
                     (puVar1,(undefined *)&local_1c,SUB84(dVar3,0),(int)((ulonglong)dVar3 >> 0x20));
  *puVar1 = 5;
  puVar1 = aw_amf_encode_string(puVar1 + 1,(undefined *)&local_1c,param_2);
  if (puVar1 != (undefined *)0x0) {
    local_42c = puVar1 + -(int)local_420;
    aw_rtmp_send_packet(param_1,&local_43c,0);
  }
  if (local_1c != __stack_chk_guard) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void FUN_0001484c(int param_1,void **param_2)

{
  undefined *puVar1;
  int iVar2;
  double dVar3;
  int local_23c;
  undefined4 local_238;
  undefined local_234;
  undefined local_233;
  undefined local_232;
  undefined4 local_230;
  undefined *local_22c;
  undefined *local_220;
  undefined auStack522 [494];
  int local_1c [2];
  
  local_220 = auStack522;
  local_1c[0] = __stack_chk_guard;
  local_234 = 1;
  local_23c = 3;
  local_233 = 0x14;
  local_230 = 0;
  local_238 = 0;
  local_232 = 0;
  puVar1 = aw_amf_encode_string(local_220,(undefined *)local_1c,(void **)(param_1 + 0x614));
  iVar2 = *(int *)(param_1 + 0x6c4) + 1;
  dVar3 = (double)(longlong)iVar2;
  *(int *)(param_1 + 0x6c4) = iVar2;
  puVar1 = aw_amf_encode_number
                     (puVar1,(undefined *)local_1c,SUB84(dVar3,0),(int)((ulonglong)dVar3 >> 0x20));
  *puVar1 = 5;
  puVar1 = aw_amf_encode_string(puVar1 + 1,(undefined *)local_1c,param_2);
  if (puVar1 != (undefined *)0x0) {
    local_22c = puVar1 + -(int)local_220;
    aw_rtmp_send_packet(param_1,&local_23c,1);
  }
  if (local_1c[0] != __stack_chk_guard) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void FUN_000148e0(int param_1)

{
  undefined *puVar1;
  int iVar2;
  double dVar3;
  int local_434;
  undefined4 local_430;
  undefined local_42c;
  undefined local_42b;
  undefined local_42a;
  undefined4 local_428;
  undefined *local_424;
  undefined *local_418;
  undefined auStack1026 [1006];
  int local_14;
  
  local_42b = 0x14;
  local_430 = *(undefined4 *)(param_1 + 0x6a4);
  local_418 = auStack1026;
  local_14 = __stack_chk_guard;
  local_434 = 4;
  local_42c = 0;
  local_428 = 0;
  local_42a = 0;
  puVar1 = aw_amf_encode_string(local_418,(undefined *)&local_14,(void **)(param_1 + 0x5ec));
  iVar2 = *(int *)(param_1 + 0x6c4) + 1;
  dVar3 = (double)(longlong)iVar2;
  *(int *)(param_1 + 0x6c4) = iVar2;
  puVar1 = aw_amf_encode_number
                     (puVar1,(undefined *)&local_14,SUB84(dVar3,0),(int)((ulonglong)dVar3 >> 0x20));
  *puVar1 = 5;
  puVar1 = aw_amf_encode_string(puVar1 + 1,(undefined *)&local_14,(void **)(param_1 + 0xc4a64));
  if ((puVar1 != (undefined *)0x0) &&
     (puVar1 = aw_amf_encode_string(puVar1,(undefined *)&local_14,(void **)(param_1 + 0x5f4)),
     puVar1 != (undefined *)0x0)) {
    local_424 = puVar1 + -(int)local_418;
    aw_rtmp_send_packet(param_1,&local_434,1);
  }
  if (local_14 != __stack_chk_guard) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void FUN_00014994(int param_1)

{
  undefined *puVar1;
  int local_43c;
  undefined4 local_438;
  undefined local_434;
  undefined local_433;
  undefined local_432;
  undefined4 local_430;
  int *local_42c;
  undefined *local_420;
  undefined auStack1034 [1006];
  int local_1c;
  
  local_438 = *(undefined4 *)(param_1 + 0x6a4);
  local_433 = 0x14;
  local_1c = __stack_chk_guard;
  local_420 = auStack1034;
  local_43c = 8;
  local_434 = 0;
  local_430 = 0;
  local_432 = 0;
  puVar1 = aw_amf_encode_string(local_420,(undefined *)&local_1c,(void **)(param_1 + 0x54c));
  puVar1 = aw_amf_encode_number(puVar1,(undefined *)&local_1c,0,0);
  *puVar1 = 5;
  puVar1[5] = 3;
  puVar1[1] = 8;
  puVar1[2] = 0;
  puVar1[3] = 0;
  puVar1[4] = 0;
  puVar1 = aw_amf_encode_named_string
                     (puVar1 + 6,(undefined *)&local_1c,(void **)(param_1 + 0x554),
                      (void **)(param_1 + 0xc4a64));
  if ((puVar1 != (undefined *)0x0) && (puVar1 + 3 < &local_1c)) {
    *puVar1 = 0;
    puVar1[1] = 0;
    puVar1[2] = 9;
    local_42c = (int *)((int)(puVar1 + 3) - (int)local_420);
    aw_rtmp_send_packet(param_1,&local_43c,1);
  }
  if (local_1c != __stack_chk_guard) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void FUN_00014a58(int param_1)

{
  undefined *puVar1;
  undefined4 uVar2;
  int iVar3;
  undefined4 uVar4;
  double dVar5;
  int local_434;
  undefined4 local_430;
  undefined local_42c;
  undefined local_42b;
  undefined local_42a;
  undefined4 local_428;
  undefined *local_424;
  undefined *local_418;
  undefined auStack1026 [1006];
  int local_14;
  
  local_42b = 0x14;
  local_430 = *(undefined4 *)(param_1 + 0x6a4);
  local_418 = auStack1026;
  local_14 = __stack_chk_guard;
  local_434 = 8;
  local_42c = 0;
  local_428 = 0;
  local_42a = 0;
  puVar1 = aw_amf_encode_string(local_418,(undefined *)&local_14,(void **)(param_1 + 0x544));
  iVar3 = *(int *)(param_1 + 0x6c4) + 1;
  dVar5 = (double)(longlong)iVar3;
  *(int *)(param_1 + 0x6c4) = iVar3;
  puVar1 = aw_amf_encode_number
                     (puVar1,(undefined *)&local_14,SUB84(dVar5,0),(int)((ulonglong)dVar5 >> 0x20));
  *puVar1 = 5;
  puVar1 = aw_amf_encode_string(puVar1 + 1,(undefined *)&local_14,(void **)(param_1 + 0xc4a64));
  if (puVar1 != (undefined *)0x0) {
    if (*(int *)(param_1 + 0xc4ac8) << 0x1e < 0) {
      uVar2 = 0;
      uVar4 = 0xc08f4000;
    }
    else {
      dVar5 = (double)(longlong)*(int *)(param_1 + 0xc4ac0);
      if (dVar5 < 0.0) {
        uVar2 = 0;
        uVar4 = 0xc09f4000;
      }
      else {
        uVar4 = (undefined4)((ulonglong)dVar5 >> 0x20);
        uVar2 = SUB84(dVar5,0);
      }
    }
    puVar1 = aw_amf_encode_number(puVar1,(undefined *)&local_14,uVar2,uVar4);
    if ((puVar1 != (undefined *)0x0) &&
       ((*(int *)(param_1 + 0xc4ac4) == 0 ||
        (dVar5 = (double)(longlong)(*(int *)(param_1 + 0xc4ac4) - *(int *)(param_1 + 0xc4ac0)),
        puVar1 = aw_amf_encode_number
                           (puVar1,(undefined *)&local_14,SUB84(dVar5,0),
                            (int)((ulonglong)dVar5 >> 0x20)), puVar1 != (undefined *)0x0)))) {
      local_424 = puVar1 + -(int)local_418;
      aw_rtmp_send_packet(param_1,&local_434,1);
    }
  }
  if (local_14 != __stack_chk_guard) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void FUN_00014b80(undefined4 param_1,undefined4 param_2,int param_3)

{
  undefined *puVar1;
  double dVar2;
  int local_144;
  undefined4 local_140;
  undefined local_13c;
  undefined local_13b;
  undefined local_13a;
  int local_138;
  undefined *local_134;
  undefined *local_128;
  undefined auStack274 [238];
  int local_24 [2];
  
  local_140 = 0;
  local_24[0] = __stack_chk_guard;
  local_13a = 0;
  local_144 = 3;
  local_13c = 1;
  local_13b = 0x14;
  local_138 = *(int *)(param_3 + 0x694) * 0x16;
  local_128 = auStack274;
  puVar1 = aw_amf_encode_string(local_128,(undefined *)local_24,(void **)(param_3 + 0x52c));
  puVar1 = aw_amf_encode_number(puVar1,(undefined *)local_24,param_1,param_2);
  *puVar1 = 5;
  dVar2 = (double)(longlong)*(int *)(param_3 + 0x694);
  *(int *)(param_3 + 0x694) = *(int *)(param_3 + 0x694) + 1;
  local_134 = aw_amf_encode_number
                        (puVar1 + 1,(undefined *)local_24,SUB84(dVar2,0),
                         (int)((ulonglong)dVar2 >> 0x20));
  local_134 = local_134 + -(int)local_128;
  aw_rtmp_send_packet(param_3,&local_144,0);
  if (local_24[0] != __stack_chk_guard) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void FUN_00014c20(int param_1)

{
  int local_134;
  undefined4 local_130;
  undefined local_12c;
  undefined local_12b;
  undefined local_12a;
  undefined4 local_128;
  undefined4 local_124;
  undefined *local_118;
  undefined auStack258 [238];
  int local_14;
  
  local_12c = 1;
  local_124 = 4;
  local_14 = __stack_chk_guard;
  local_134 = 2;
  local_118 = auStack258;
  local_12b = 3;
  local_128 = 0;
  local_130 = 0;
  local_12a = 0;
  aw_amf_encode_int32(local_118,(undefined *)&local_14,*(undefined4 *)(param_1 + 0x698));
  *(undefined4 *)(param_1 + 0x69c) = *(undefined4 *)(param_1 + 0x698);
  aw_rtmp_send_packet(param_1,&local_134,0);
  if (local_14 != __stack_chk_guard) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



undefined4 aw_rtmp_get_time(void)

{
  return 0;
}



undefined * aw_amf_prop_encode(void **param_1,undefined *param_2,undefined *param_3)

{
  undefined *puVar1;
  void *pvVar2;
  
  if (param_1[2] != (void *)0xff) {
    if (param_1[2] != (void *)0x5) {
      pvVar2 = param_1[1];
      if (param_3 <= param_2 + (int)pvVar2 + 3) {
        return (undefined *)0x0;
      }
      if (pvVar2 != (void *)0x0) {
        *param_2 = (char)((uint)pvVar2 >> 8);
        param_2[1] = (char)param_1[1];
        memcpy(param_2 + 2,*param_1,(size_t)param_1[1]);
        param_2 = param_2 + 2 + (int)param_1[1];
      }
    }
    switch(param_1[2]) {
    case (void *)0x0:
      puVar1 = aw_amf_encode_number
                         (param_2,param_3,SUB84((double)(longlong)(int)param_1[3],0),
                          (int)((ulonglong)(double)(longlong)(int)param_1[3] >> 0x20));
      return puVar1;
    case (void *)0x1:
      pvVar2 = param_1[3];
      if (param_2 + 2 <= param_3) {
        *param_2 = 1;
        if (pvVar2 != (void *)0x0) {
          pvVar2 = (void *)0x1;
        }
        param_2[1] = (char)pvVar2;
        return param_2 + 2;
      }
      break;
    case (void *)0x2:
      puVar1 = aw_amf_encode_string(param_2,param_3,param_1 + 3);
      return puVar1;
    case (void *)0x3:
      puVar1 = aw_amf_encode((int *)(param_1 + 3),param_2,param_3);
      return puVar1;
    case (void *)0x5:
      if (param_3 <= param_2 + 1) {
        return (undefined *)0x0;
      }
      *param_2 = 5;
      return param_2 + 1;
    }
  }
  return (undefined *)0x0;
}



int * FUN_00014d38(int param_1,int *param_2)

{
  undefined *puVar1;
  int *piVar2;
  int *piVar3;
  void **ppvVar4;
  int iVar5;
  uint uVar6;
  undefined4 uVar7;
  int iVar8;
  double dVar9;
  int local_1044;
  int *local_1040;
  undefined local_103c;
  undefined local_103b;
  undefined local_103a;
  int *local_1038;
  int *local_1034;
  undefined *local_1028;
  undefined auStack4114 [4078];
  int local_24;
  
  local_24 = __stack_chk_guard;
  if (param_2 == (int *)0x0) {
    local_103c = 0;
    local_1028 = auStack4114;
    local_103a = 0;
    local_103b = 0x14;
    local_1044 = 3;
    local_1040 = param_2;
    local_1038 = param_2;
    puVar1 = aw_amf_encode_string(local_1028,(undefined *)&local_24,(void **)(param_1 + 0x4a4));
    iVar5 = *(int *)(param_1 + 0x6c4) + 1;
    dVar9 = (double)(longlong)iVar5;
    *(int *)(param_1 + 0x6c4) = iVar5;
    puVar1 = aw_amf_encode_number
                       (puVar1,(undefined *)&local_24,SUB84(dVar9,0),(int)((ulonglong)dVar9 >> 0x20)
                       );
    *puVar1 = 3;
    piVar2 = (int *)aw_amf_encode_named_string
                              (puVar1 + 1,(undefined *)&local_24,(void **)(param_1 + 0x49c),
                               (void **)(param_1 + 0xc4a84));
    if ((((piVar2 == (int *)0x0) ||
         ((*(int *)(param_1 + 0xc4ad0) << 0x1b < 0 &&
          (piVar2 = (int *)aw_amf_encode_named_string
                                     ((undefined *)piVar2,(undefined *)&local_24,
                                      (void **)(param_1 + 0x50c),(void **)(param_1 + 0x514)),
          piVar2 == (int *)0x0)))) ||
        ((*(int *)(param_1 + 0xc4a98) != 0 &&
         (piVar2 = (int *)aw_amf_encode_named_string
                                    ((undefined *)piVar2,(undefined *)&local_24,
                                     (void **)(param_1 + 0x4ac),(void **)(param_1 + 0xc4a94)),
         piVar2 == (int *)0x0)))) ||
       (((*(int *)(param_1 + 0xc4a78) != 0 &&
         (piVar2 = (int *)aw_amf_encode_named_string
                                    ((undefined *)piVar2,(undefined *)&local_24,
                                     (void **)(param_1 + 0x4b4),(void **)(param_1 + 0xc4a74)),
         piVar2 == (int *)0x0)) ||
        ((*(int *)(param_1 + 0xc4a70) != 0 &&
         (piVar2 = (int *)aw_amf_encode_named_string
                                    ((undefined *)piVar2,(undefined *)&local_24,
                                     (void **)(param_1 + 0x4c4),(void **)(param_1 + 0xc4a6c)),
         piVar2 == (int *)0x0)))))) goto LAB_00014fde;
    uVar6 = *(uint *)(param_1 + 0xc4ad0) & 0x10;
    if (uVar6 == 0) {
      piVar2 = (int *)aw_amf_encode_named_boolean
                                ((undefined *)piVar2,(undefined *)&local_24,
                                 (void **)(param_1 + 0x4cc),0);
      if (((piVar2 == (int *)0x0) ||
          (piVar2 = (int *)aw_amf_encode_named_number
                                     ((undefined *)piVar2,(undefined *)&local_24,
                                      (void **)(param_1 + 0x4d4),uVar6,0,0x402e0000),
          piVar2 == (int *)0x0)) ||
         (piVar2 = (int *)aw_amf_encode_named_number
                                    ((undefined *)piVar2,(undefined *)&local_24,
                                     (void **)(param_1 + 0x4dc),uVar6,
                                     *(undefined4 *)(param_1 + 0xc09d0),
                                     *(undefined4 *)(param_1 + 0xc09d4)), piVar2 == (int *)0x0))
      goto LAB_00014fde;
      uVar7 = 0xc09d8;
      piVar2 = (int *)aw_amf_encode_named_number
                                ((undefined *)piVar2,(undefined *)&local_24,
                                 (void **)(param_1 + 0x4e4),0xc09d8,
                                 *(undefined4 *)(param_1 + 0xc09d8),
                                 *(undefined4 *)(param_1 + 0xc09dc));
      if (((piVar2 == (int *)0x0) ||
          (piVar2 = (int *)aw_amf_encode_named_number
                                     ((undefined *)piVar2,(undefined *)&local_24,
                                      (void **)(param_1 + 0x4ec),uVar7,0,0x3ff00000),
          piVar2 == (int *)0x0)) ||
         ((*(int *)(param_1 + 0xc4a80) != 0 &&
          (piVar2 = (int *)aw_amf_encode_named_string
                                     ((undefined *)piVar2,(undefined *)&local_24,
                                      (void **)(param_1 + 0x4bc),(void **)(param_1 + 0xc4a7c)),
          piVar2 == (int *)0x0)))) goto LAB_00014fde;
    }
    dVar9 = *(double *)(param_1 + 0xc09e0);
    if ((((0.001 <= dVar9) || (dVar9 <= -0.001)) ||
        (piVar3 = piVar2, *(char *)(param_1 + 0xc09e8) != '\0')) &&
       (piVar2 = (int *)aw_amf_encode_named_number
                                  ((undefined *)piVar2,(undefined *)&local_24,
                                   (void **)(param_1 + 0x4f4),param_1 + 0x4f0,SUB84(dVar9,0),
                                   (int)((ulonglong)dVar9 >> 0x20)), piVar3 = piVar2,
       piVar2 == (int *)0x0)) goto LAB_00014fde;
    piVar2 = (int *)((int)piVar3 + 3);
    if (&local_24 <= piVar2) {
LAB_00014fd8:
      piVar2 = (int *)0x0;
      goto LAB_00014fde;
    }
    *(undefined *)((int)piVar3 + 2) = 9;
    *(undefined *)piVar3 = 0;
    *(undefined *)((int)piVar3 + 1) = 0;
    if (*(int *)(param_1 + 0xc4a90) != 0) {
      uVar7 = *(undefined4 *)(param_1 + 0xc4ac8);
      piVar2 = (int *)((int)piVar3 + 5);
      if (&local_24 < piVar2) goto LAB_00014fd8;
      *(undefined *)((int)piVar3 + 3) = 1;
      *(byte *)(piVar3 + 1) = (byte)uVar7 & 1;
      if ((piVar2 == (int *)0x0) ||
         (piVar2 = (int *)aw_amf_encode_string
                                    ((undefined *)piVar2,(undefined *)&local_24,
                                     (void **)(param_1 + 0xc4a8c)), piVar2 == (int *)0x0))
      goto LAB_00014fde;
    }
    if (*(int *)(param_1 + 0xc4ab4) != 0) {
      iVar5 = 0;
      iVar8 = 0;
      while (iVar8 < *(int *)(param_1 + 0xc4ab4)) {
        ppvVar4 = (void **)(*(int *)(param_1 + 0xc4ab8) + iVar5);
        iVar5 = iVar5 + 0x18;
        piVar2 = (int *)aw_amf_prop_encode(ppvVar4,(undefined *)piVar2,(undefined *)&local_24);
        if (piVar2 == (int *)0x0) goto LAB_00014fde;
        iVar8 = iVar8 + 1;
      }
    }
    local_1034 = (int *)((int)piVar2 - (int)local_1028);
    param_2 = &local_1044;
  }
  piVar2 = (int *)aw_rtmp_send_packet(param_1,param_2,1);
LAB_00014fde:
  if (local_24 == __stack_chk_guard) {
    return piVar2;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined * aw_amf_encode(int *param_1,undefined *param_2,undefined *param_3)

{
  undefined *puVar1;
  undefined *puVar2;
  int iVar3;
  int iVar4;
  
  if (param_2 + 4 < param_3) {
    iVar3 = 0;
    *param_2 = 3;
    iVar4 = 0;
    puVar2 = param_2 + 1;
    while (iVar4 < *param_1) {
      puVar1 = aw_amf_prop_encode((void **)(param_1[1] + iVar3),puVar2,param_3);
      iVar3 = iVar3 + 0x18;
      if (puVar1 == (undefined *)0x0) break;
      iVar4 = iVar4 + 1;
      puVar2 = puVar1;
    }
    if (puVar2 + 3 < param_3) {
      puVar2 = aw_amf_encode_int24(puVar2,param_3,9);
      return puVar2;
    }
  }
  return (undefined *)0x0;
}



int aw_rtmp_is_connected(int param_1)

{
  int iVar1;
  
  iVar1 = *(int *)(param_1 + 0xc0a38) + 1;
  if (iVar1 != 0) {
    iVar1 = 1;
  }
  return iVar1;
}



void aw_rtmp_packet_free(int param_1)

{
  if (*(int *)(param_1 + 0x1c) != 0) {
    free((void *)(*(int *)(param_1 + 0x1c) + -0x12));
    *(undefined4 *)(param_1 + 0x1c) = 0;
  }
  return;
}



void * aw_rtmp_packet_alloc(int param_1,int param_2)

{
  void *pvVar1;
  
  pvVar1 = calloc(1,param_2 + 0x12);
  if (pvVar1 != (void *)0x0) {
    *(int *)(param_1 + 0x1c) = (int)pvVar1 + 0x12;
    pvVar1 = (void *)0x1;
    *(undefined4 *)(param_1 + 0x14) = 0;
  }
  return pvVar1;
}



void aw_rtmp_send_ctrl(int param_1,int param_2,undefined4 param_3,undefined4 param_4)

{
  undefined *puVar1;
  uint uVar2;
  int iVar3;
  int local_144;
  undefined4 local_140;
  undefined local_13c;
  undefined local_13b;
  undefined local_13a;
  undefined4 local_138;
  int local_134;
  undefined *local_128;
  undefined auStack274 [238];
  int local_24;
  
  local_24 = __stack_chk_guard;
  local_13c = 1;
  iVar3 = 6;
  local_144 = 2;
  local_128 = auStack274;
  local_13b = 4;
  uVar2 = param_2 - 3U & 0xffff;
  local_138 = 0;
  local_140 = 0;
  local_13a = 0;
  if (uVar2 < 0x19) {
    iVar3 = (int)(char)(&DAT_000213bc)[uVar2];
  }
  local_134 = iVar3;
  puVar1 = aw_amf_encode_int16(auStack274,(undefined *)&local_24,param_2);
  if (param_2 != 0x1b) {
    if (param_2 == 0x1a) {
      *puVar1 = (char)param_3;
    }
    else {
      if ((2 < iVar3) &&
         (puVar1 = aw_amf_encode_int32(puVar1,(undefined *)&local_24,param_3), 6 < iVar3)) {
        aw_amf_encode_int32(puVar1,(undefined *)&local_24,param_4);
      }
    }
  }
  aw_rtmp_send_packet(param_1,&local_144,0);
  if (local_24 == __stack_chk_guard) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void aw_rtmp_send_pause(int param_1,int param_2,int param_3)

{
  undefined *puVar1;
  int iVar2;
  int *piVar3;
  double dVar4;
  int local_144;
  undefined4 local_140;
  undefined local_13c;
  undefined local_13b;
  undefined local_13a;
  undefined4 local_138;
  undefined *local_134;
  undefined *local_128;
  undefined auStack274 [238];
  int local_24;
  
  local_128 = auStack274;
  local_24 = __stack_chk_guard;
  local_138 = 0;
  local_13c = 1;
  local_144 = 8;
  local_140 = 0;
  local_13b = 0x14;
  local_13a = 0;
  puVar1 = aw_amf_encode_string(local_128,(undefined *)&local_24,(void **)(param_1 + 0x51c));
  iVar2 = *(int *)(param_1 + 0x6c4) + 1;
  dVar4 = (double)(longlong)iVar2;
  *(int *)(param_1 + 0x6c4) = iVar2;
  puVar1 = aw_amf_encode_number
                     (puVar1,(undefined *)&local_24,SUB84(dVar4,0),(int)((ulonglong)dVar4 >> 0x20));
  piVar3 = (int *)(puVar1 + 3);
  *puVar1 = 5;
  if (&local_24 < piVar3) {
    piVar3 = (int *)0x0;
  }
  else {
    puVar1[1] = 1;
    if (param_2 != 0) {
      param_2 = 1;
    }
    puVar1[2] = (char)param_2;
  }
  local_134 = aw_amf_encode_number
                        ((undefined *)piVar3,(undefined *)&local_24,
                         SUB84((double)(longlong)param_3,0),
                         (int)((ulonglong)(double)(longlong)param_3 >> 0x20));
  local_134 = local_134 + -(int)local_128;
  aw_rtmp_send_packet(param_1,&local_144,1);
  if (local_24 == __stack_chk_guard) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void aw_amf_decode_long_string(byte *param_1,byte **param_2)

{
  byte *pbVar1;
  byte *pbVar2;
  
  pbVar1 = (byte *)aw_amf_decode_int32(param_1);
  pbVar2 = param_1 + 4;
  param_2[1] = pbVar1;
  if ((int)pbVar1 < 1) {
    pbVar2 = (byte *)0x0;
  }
  *param_2 = pbVar2;
  return;
}



int aw_amf3_read_integer(int param_1,uint *param_2)

{
  byte bVar1;
  int iVar2;
  uint uVar3;
  
  uVar3 = 0;
  iVar2 = 0;
  do {
    bVar1 = *(byte *)(param_1 + iVar2);
    if ((bVar1 & 0x80) == 0) {
      uVar3 = uVar3 << 7 | (uint)bVar1;
      goto LAB_0001529c;
    }
    iVar2 = iVar2 + 1;
    uVar3 = bVar1 & 0x7f | uVar3 << 7;
  } while (iVar2 != 3);
  uVar3 = (uint)*(byte *)(param_1 + 3) | uVar3 << 8;
  if (0xfffffff < (int)uVar3) {
    uVar3 = uVar3 + 0xe0000000;
  }
LAB_0001529c:
  *param_2 = uVar3;
  if (iVar2 == 3) {
    return 4;
  }
  return iVar2 + 1;
}



undefined8 aw_amf3_read_string(int param_1,int *param_2,undefined4 param_3)

{
  int iVar1;
  int iVar2;
  uint local_14;
  undefined4 uStack16;
  
  local_14 = 0;
  uStack16 = param_3;
  iVar1 = aw_amf3_read_integer(param_1,&local_14);
  if ((int)(local_14 << 0x1f) < 0) {
    iVar2 = param_1 + iVar1;
    iVar1 = iVar1 + ((int)local_14 >> 1);
    *param_2 = iVar2;
    param_2[1] = (int)local_14 >> 1;
  }
  return CONCAT44(param_1,iVar1);
}



void aw_amf3_class_definition_add_prop(int param_1,undefined4 *param_2)

{
  void *pvVar1;
  undefined4 uVar2;
  undefined4 *puVar3;
  int iVar4;
  
  if ((*(uint *)(param_1 + 4) & 0xf) == 0) {
    pvVar1 = realloc(*(void **)(param_1 + 0x10),(*(uint *)(param_1 + 4) + 0x10) * 8);
    *(void **)(param_1 + 0x10) = pvVar1;
  }
  iVar4 = *(int *)(param_1 + 4);
  puVar3 = (undefined4 *)(*(int *)(param_1 + 0x10) + iVar4 * 8);
  uVar2 = param_2[1];
  *puVar3 = *param_2;
  puVar3[1] = uVar2;
  *(int *)(param_1 + 4) = iVar4 + 1;
  return;
}



int aw_amf3_class_definition_get_prop(int param_1,int param_2,int param_3)

{
  *(undefined4 *)(param_1 + 0x480) = 0;
  *(undefined4 *)(param_1 + 0x47c) = 0;
  if (*(int *)(param_2 + 4) <= param_3) {
    return param_1 + 0x47c;
  }
  return *(int *)(param_2 + 0x10) + param_3 * 8;
}



void aw_amf_prop_set_name(undefined4 *param_1,undefined4 *param_2)

{
  undefined4 uVar1;
  
  uVar1 = param_2[1];
  *param_1 = *param_2;
  param_1[1] = uVar1;
  return;
}



int aw_amf3_decode(int param_1,uint *param_2,int param_3,int param_4,int param_5)

{
  uint uVar1;
  int iVar2;
  char **ppcVar3;
  undefined4 uVar4;
  int iVar5;
  byte *pbVar6;
  uint uVar7;
  undefined8 uVar8;
  uint local_60;
  int aiStack92 [2];
  byte local_54;
  byte local_53;
  int local_50;
  int aiStack76 [3];
  char *local_40;
  char *local_3c;
  
  *param_2 = 0;
  param_2[1] = 0;
  iVar5 = param_4;
  if (param_5 != 0) {
    param_3 = param_3 + 1;
    iVar5 = param_4 + -1;
  }
  local_60 = 0;
  iVar2 = aw_amf3_read_integer(param_3,&local_60);
  uVar7 = local_60;
  iVar5 = iVar5 - iVar2;
  if ((int)(local_60 << 0x1f) < 0) {
    uVar4 = 0x14;
    pbVar6 = (byte *)(param_3 + iVar2);
    uVar1 = (int)local_60 >> 1;
    memset(&local_54,0,0x14);
    if ((uVar1 & 1) != 0) {
      iVar2 = (int)uVar7 >> 2;
      local_50 = (int)uVar7 >> 4;
      local_54 = (byte)iVar2 & 1;
      local_53 = (byte)((uint)(iVar2 << 0x1e) >> 0x1f);
      uVar8 = aw_amf3_read_string((int)pbVar6,aiStack76,uVar4);
      iVar2 = 0;
      iVar5 = iVar5 - (int)uVar8;
      pbVar6 = pbVar6 + (int)uVar8;
      while (iVar2 < local_50) {
        uVar8 = aw_amf3_read_string((int)pbVar6,aiStack92,local_50);
        iVar2 = iVar2 + 1;
        aw_amf3_class_definition_add_prop((int)&local_54,aiStack92);
        iVar5 = iVar5 - (int)uVar8;
        pbVar6 = pbVar6 + (int)uVar8;
      }
    }
    if (local_54 == 0) {
      uVar7 = (uint)local_54;
      while ((int)uVar7 < local_50) {
        iVar2 = aw_amf3_prop_decode(param_1,(int *)&local_40,pbVar6,iVar5,0);
        ppcVar3 = (char **)aw_amf3_class_definition_get_prop(param_1,(int)&local_54,uVar7);
        pbVar6 = pbVar6 + iVar2;
        iVar5 = iVar5 - iVar2;
        local_40 = *ppcVar3;
        local_3c = ppcVar3[1];
        aw_amf_add_prop(param_2,&local_40);
        uVar7 = uVar7 + 1;
      }
      if (local_53 != 0) {
        do {
          iVar2 = aw_amf3_prop_decode(param_1,(int *)&local_40,pbVar6,iVar5,1);
          aw_amf_add_prop(param_2,&local_40);
          pbVar6 = pbVar6 + iVar2;
          iVar5 = iVar5 - iVar2;
        } while (0 < (int)local_3c);
      }
    }
    else {
      iVar2 = aw_amf3_prop_decode(param_1,(int *)&local_40,pbVar6,iVar5,0);
      if (iVar2 != -1) {
        iVar5 = iVar5 - iVar2;
      }
      local_3c = (char *)0x11;
      local_40 = "DEFAULT_ATTRIBUTE";
      aw_amf_add_prop(param_2,&local_40);
    }
  }
  return param_4 - iVar5;
}



int aw_amf3_prop_decode(int param_1,int *param_2,byte *param_3,int param_4,int param_5)

{
  int iVar1;
  int iVar2;
  byte *pbVar3;
  undefined8 uVar4;
  ulonglong uVar5;
  uint local_2c;
  int local_28;
  int local_24;
  
  param_2[1] = 0;
  *param_2 = 0;
  if (param_4 == 0 || param_3 == (byte *)0x0) {
LAB_000155a8:
    return -1;
  }
  iVar1 = param_4;
  if (param_5 != 0) {
    uVar4 = aw_amf3_read_string((int)param_3,&local_28,param_3);
    iVar1 = (int)uVar4;
    if (local_24 < 1) {
      return iVar1;
    }
    param_3 = param_3 + iVar1;
    iVar1 = param_4 - iVar1;
    *param_2 = local_28;
    param_2[1] = local_24;
  }
  pbVar3 = param_3 + 1;
  iVar2 = iVar1 + -1;
  switch((uint)*param_3) {
  case 0:
  case 1:
    iVar1 = 5;
    break;
  case 2:
    iVar1 = 0;
    param_2[2] = 1;
    goto LAB_000154f6;
  case 3:
    iVar1 = 1;
    param_2[2] = 1;
LAB_000154f6:
    param_2[3] = iVar1;
    goto LAB_000155a0;
  case 4:
    local_2c = 0;
    iVar1 = aw_amf3_read_integer((int)pbVar3,&local_2c);
    param_2[2] = 0;
    param_2[3] = SUB84(ROUND((double)(longlong)(int)local_2c),0);
    goto LAB_00015548;
  case 5:
    if (iVar2 < 8) {
      return -1;
    }
    iVar2 = iVar1 + -9;
    uVar5 = aw_amf_decode_number(pbVar3);
    param_2[2] = 0;
    param_2[3] = SUB84(ROUND((double)((uVar5 & 0xffffffff00000000) + (uVar5 & 0xffffffff))),0);
    goto LAB_000155a0;
  case 6:
  case 7:
  case 0xb:
    uVar4 = aw_amf3_read_string((int)pbVar3,param_2 + 3,(uint)*param_3);
    iVar1 = (int)uVar4;
    param_2[2] = 2;
LAB_00015548:
    iVar2 = iVar2 - iVar1;
    goto LAB_000155a0;
  case 8:
    local_2c = 0;
    iVar1 = aw_amf3_read_integer((int)pbVar3,&local_2c);
    iVar2 = iVar2 - iVar1;
    if ((int)(local_2c << 0x1f) < 0) {
      if (iVar2 < 8) {
        return -1;
      }
      iVar2 = iVar2 + -8;
      uVar5 = aw_amf_decode_number(pbVar3 + iVar1);
      param_2[2] = 0;
      param_2[3] = SUB84(ROUND((double)((uVar5 & 0xffffffff00000000) + (uVar5 & 0xffffffff))),0);
    }
    goto LAB_000155a0;
  default:
    goto LAB_000155a8;
  case 10:
    iVar1 = aw_amf3_decode(param_1,(uint *)(param_2 + 3),(int)pbVar3,iVar2,1);
    if (iVar1 == -1) {
      return -1;
    }
    iVar2 = iVar2 - iVar1;
    iVar1 = 3;
  }
  param_2[2] = iVar1;
LAB_000155a0:
  return param_4 - iVar2;
}



int aw_amf_decode(uint param_1,uint *param_2,byte *param_3,int param_4,uint param_5)

{
  bool bVar1;
  uint uVar2;
  int iVar3;
  int iVar4;
  undefined8 uVar5;
  undefined4 auStack56 [6];
  
  bVar1 = false;
  *param_2 = 0;
  param_2[1] = 0;
  iVar4 = param_4;
  do {
    if (iVar4 < 1) {
      iVar3 = -1;
      if (!bVar1) {
LAB_00015614:
        iVar3 = param_4 - iVar4;
      }
      return iVar3;
    }
    if ((2 < iVar4) && (uVar2 = aw_amf_decode_int24(param_3), uVar2 == 9)) {
      iVar4 = iVar4 + -3;
      goto LAB_00015614;
    }
    if (bVar1) {
      iVar4 = iVar4 + -1;
      param_3 = param_3 + 1;
LAB_00015608:
      bVar1 = true;
    }
    else {
      uVar5 = aw_amf_prop_decode(param_1,auStack56,param_3,iVar4,param_5);
      iVar3 = (int)uVar5;
      if (iVar3 == -1) goto LAB_00015608;
      iVar4 = iVar4 - iVar3;
      param_3 = param_3 + iVar3;
      aw_amf_add_prop(param_2,auStack56);
    }
  } while( true );
}



undefined8
aw_amf_prop_decode(uint param_1,undefined4 *param_2,byte *param_3,int param_4,uint param_5)

{
  byte bVar1;
  byte bVar2;
  int iVar3;
  uint uVar4;
  undefined4 uVar5;
  int iVar6;
  int iVar7;
  byte *pbVar8;
  ulonglong uVar9;
  uint uVar10;
  
  param_2[1] = 0;
  *param_2 = 0;
  uVar10 = param_1;
  if (param_4 == 0 || param_3 == (byte *)0x0) goto switchD_000156a6_caseD_4;
  if (param_5 != 0) {
    param_5 = 1;
  }
  if (param_4 < 4) {
    uVar4 = param_5 & 1;
  }
  else {
    uVar4 = 0;
  }
  if (uVar4 != 0) goto switchD_000156a6_caseD_4;
  iVar6 = param_4;
  if (param_5 != 0) {
    uVar4 = (uint)CONCAT11(*param_3,param_3[1]);
    if ((int)uVar4 < param_4 + -1) {
      aw_amf_decode_string(param_3,param_2);
      iVar6 = param_4 + (-2 - uVar4);
      if (iVar6 != 0) {
        param_3 = param_3 + uVar4 + 2;
        goto LAB_00015696;
      }
    }
    goto switchD_000156a6_caseD_4;
  }
LAB_00015696:
  iVar7 = iVar6 + -1;
  pbVar8 = param_3 + 1;
  bVar2 = *param_3;
  param_2[2] = (uint)bVar2;
  switch((uint)bVar2) {
  case 0:
    if (7 < iVar7) {
      iVar7 = iVar6 + -9;
      uVar9 = aw_amf_decode_number(pbVar8);
      param_2[3] = SUB84(ROUND((double)((uVar9 & 0xffffffff00000000) + (uVar9 & 0xffffffff))),0);
      goto LAB_000157ea;
    }
    break;
  case 1:
    if (0 < iVar7) {
      uVar4 = (uint)param_3[1];
      if (uVar4 != 0) {
        uVar4 = 1;
      }
      iVar7 = iVar6 + -2;
      param_2[3] = uVar4;
      goto LAB_000157ea;
    }
    break;
  case 2:
    bVar2 = param_3[1];
    bVar1 = param_3[2];
    if ((int)(CONCAT11(bVar2,bVar1) + 1) < iVar7) {
      aw_amf_decode_string(pbVar8,param_2 + 3);
      iVar7 = iVar7 + (-2 - (uint)CONCAT11(bVar2,bVar1));
      goto LAB_000157ea;
    }
    break;
  case 3:
    uVar10 = 1;
    iVar3 = aw_amf_decode(param_1,param_2 + 3,pbVar8,iVar7,1);
    if (iVar3 == -1) goto LAB_000157f2;
    iVar7 = iVar7 - iVar3;
    goto LAB_000157ea;
  case 5:
  case 6:
  case 0xd:
    uVar5 = 5;
    goto LAB_000157e8;
  case 8:
    uVar10 = 1;
    iVar3 = aw_amf_decode(param_1,param_2 + 3,param_3 + 5,iVar6 + -5,1);
    goto LAB_00015772;
  case 10:
    uVar10 = aw_amf_decode_int32(pbVar8);
    iVar3 = aw_amf_decode_array(param_1,param_2 + 3,(int)(param_3 + 5),iVar6 + -5,uVar10,0);
LAB_00015772:
    if (iVar3 != -1) {
      iVar7 = (iVar6 + -5) - iVar3;
LAB_000157e6:
      uVar5 = 3;
LAB_000157e8:
      param_2[2] = uVar5;
LAB_000157ea:
      iVar3 = param_4 - iVar7;
    }
    goto LAB_000157f2;
  case 0xb:
    if (9 < iVar7) {
      iVar7 = iVar6 + -0xb;
      uVar9 = aw_amf_decode_number(pbVar8);
      param_2[3] = SUB84(ROUND((double)((uVar9 & 0xffffffff00000000) + (uVar9 & 0xffffffff))),0);
      *(ushort *)(param_2 + 5) = CONCAT11(param_3[9],param_3[10]);
      goto LAB_000157ea;
    }
    break;
  case 0xc:
  case 0xf:
    uVar4 = aw_amf_decode_int32(pbVar8);
    if ((int)(uVar4 + 3) < iVar7) {
      aw_amf_decode_long_string(pbVar8,(byte **)(param_2 + 3));
      iVar7 = (iVar6 + -5) - uVar4;
      if (param_2[2] == 0xc) {
        uVar5 = 2;
        goto LAB_000157e8;
      }
      goto LAB_000157ea;
    }
    break;
  case 0x11:
    uVar10 = 1;
    iVar3 = aw_amf3_decode(param_1,param_2 + 3,(int)pbVar8,iVar7,1);
    if (iVar3 == -1) goto LAB_000157f2;
    iVar7 = iVar7 - iVar3;
    goto LAB_000157e6;
  }
switchD_000156a6_caseD_4:
  iVar3 = -1;
LAB_000157f2:
  return CONCAT44(uVar10,iVar3);
}



int aw_amf_decode_array(uint param_1,uint *param_2,int param_3,int param_4,int param_5,uint param_6)

{
  bool bVar1;
  int iVar2;
  int iVar3;
  undefined8 uVar4;
  undefined4 auStack64 [7];
  
  *param_2 = 0;
  bVar1 = false;
  param_2[1] = 0;
  iVar3 = param_4;
  while (0 < param_5) {
    uVar4 = aw_amf_prop_decode(param_1,auStack64,(byte *)param_3,iVar3,param_6);
    iVar2 = (int)uVar4;
    param_5 = param_5 + -1;
    if (iVar2 == -1) {
      bVar1 = true;
    }
    else {
      iVar3 = iVar3 - iVar2;
      param_3 = param_3 + iVar2;
      aw_amf_add_prop(param_2,auStack64);
    }
  }
  iVar3 = param_4 - iVar3;
  if (bVar1) {
    iVar3 = -1;
  }
  return iVar3;
}



void aw_amf_prop_dump(char **param_1)

{
  char *__format;
  char *pcVar1;
  undefined8 in_stack_fffffdd0;
  undefined4 uVar2;
  char *local_21c;
  char *local_218;
  char acStack532 [256];
  char acStack276 [256];
  int local_14;
  
  local_14 = __stack_chk_guard;
  if ((param_1[2] == (char *)0xff) || (param_1[2] == (char *)0x5)) goto LAB_0001594e;
  if (param_1[1] == (char *)0x0) {
    local_218 = (char *)0x8;
    local_21c = "no-name.";
  }
  else {
    local_21c = *param_1;
    local_218 = param_1[1];
  }
  if (0x12 < (int)local_218) {
    local_218 = (char *)0x12;
  }
  uVar2 = (undefined4)((ulonglong)in_stack_fffffdd0 >> 0x20);
  snprintf(acStack532,0xff,"Name: %18.*s, ",local_218,local_21c);
  pcVar1 = param_1[2];
  switch(pcVar1) {
  case (char *)0x0:
    snprintf(acStack276,0xff,"NUMBER:\t%.2f",pcVar1,(double)(longlong)(int)param_1[3]);
    break;
  case (char *)0x1:
    if ((double)(longlong)(int)param_1[3] == 0.0) {
      pcVar1 = "FALSE";
    }
    else {
      pcVar1 = "TRUE";
    }
    __format = "BOOLEAN:\t%s";
    goto LAB_00015946;
  case (char *)0x2:
    snprintf(acStack276,0xff,"STRING:\t%.*s",param_1[4],param_1[3],uVar2);
    break;
  case (char *)0x3:
  case (char *)0x4:
  case (char *)0x5:
  case (char *)0x6:
  case (char *)0x7:
  case (char *)0x8:
  case (char *)0x9:
  case (char *)0xa:
    pcVar1 = (char *)((uint)pcVar1 & 0xff);
    __format = "INVALID TYPE 0x%02x";
LAB_00015946:
    snprintf(acStack276,0xff,__format,pcVar1);
    break;
  case (char *)0xb:
    snprintf(acStack276,0xff,"DATE:\ttimestamp: %.2f, UTC offset: %d",pcVar1,
             (double)(longlong)(int)param_1[3],(int)*(short *)(param_1 + 5));
    break;
  default:
    aw_amf_dump((int *)(param_1 + 3));
  }
LAB_0001594e:
  if (local_14 == __stack_chk_guard) {
    return;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



void aw_amf_dump(int *param_1)

{
  char **ppcVar1;
  int iVar2;
  int iVar3;
  
  iVar2 = 0;
  iVar3 = 0;
  while (iVar3 < *param_1) {
    iVar3 = iVar3 + 1;
    ppcVar1 = (char **)(param_1[1] + iVar2);
    iVar2 = iVar2 + 0x18;
    aw_amf_prop_dump(ppcVar1);
  }
  return;
}



void aw_amf_prop_get_object(int param_1,undefined4 *param_2)

{
  undefined4 uVar1;
  
  uVar1 = *(undefined4 *)(param_1 + 0x10);
  *param_2 = *(undefined4 *)(param_1 + 0xc);
  param_2[1] = uVar1;
  return;
}



int aw_amf_get_prop(int param_1,int *param_2,void **param_3,int param_4)

{
  int iVar1;
  void *__n;
  int iVar2;
  int iVar3;
  int iVar4;
  
  iVar2 = 0;
  *(undefined4 *)(param_1 + 0x484) = 0;
  *(undefined4 *)(param_1 + 0x488) = 0;
  *(undefined4 *)(param_1 + 0x48c) = 0xff;
  if (param_4 < 0) {
    iVar4 = 0;
    while (iVar4 < *param_2) {
      iVar3 = param_2[1] + iVar2;
      __n = *(void **)(iVar3 + 4);
      if ((__n == param_3[1]) &&
         (iVar1 = memcmp(*(void **)(param_2[1] + iVar2),*param_3,(size_t)__n), iVar1 == 0)) {
        return iVar3;
      }
      iVar4 = iVar4 + 1;
      iVar2 = iVar2 + 0x18;
    }
  }
  else {
    if (param_4 < *param_2) {
      return param_4 * 0x18 + param_2[1];
    }
  }
  return param_1 + 0x484;
}



undefined4 FUN_00015a1c(int param_1,int *param_2)

{
  int iVar1;
  char *pcVar2;
  uint uVar3;
  char *pcVar4;
  int iVar5;
  char cStack301;
  uint local_12c;
  undefined auStack296 [252];
  int local_2c;
  
  local_2c = __stack_chk_guard;
  iVar5 = 0;
  do {
    if (*param_2 <= iVar5) {
      if (local_2c != __stack_chk_guard) {
                    // WARNING: Subroutine does not return
        __stack_chk_fail();
      }
      return 0;
    }
    iVar1 = aw_amf_get_prop(param_1,param_2,(void **)0x0,iVar5);
    if (*(int *)(iVar1 + 8) == 3) {
      FUN_00015a1c(param_1,(int *)(iVar1 + 0xc));
      goto LAB_00015b26;
    }
    local_12c = 0;
    memset(auStack296,0,0xfc);
    uVar3 = *(uint *)(iVar1 + 8);
    switch(uVar3) {
    case 0:
      pcVar2 = "%.2f";
      break;
    case 1:
      if ((double)(longlong)*(int *)(iVar1 + 0xc) == 0.0) {
        pcVar4 = "FALSE";
      }
      else {
        pcVar4 = "TRUE";
      }
      pcVar2 = "%s";
      goto LAB_00015ae0;
    case 2:
      snprintf((char *)&local_12c,0xff,"%.*s",*(undefined4 *)(iVar1 + 0x10),
               *(undefined4 *)(iVar1 + 0xc));
      goto LAB_00015ae4;
    default:
      pcVar4 = (char *)(uVar3 & 0xff);
      pcVar2 = "INVALID TYPE 0x%02x";
LAB_00015ae0:
      snprintf((char *)&local_12c,0xff,pcVar2,pcVar4);
      goto LAB_00015ae4;
    case 0xb:
      pcVar2 = "timestamp:%.2f";
    }
    snprintf((char *)&local_12c,0xff,pcVar2,uVar3,(double)(longlong)*(int *)(iVar1 + 0xc));
LAB_00015ae4:
    if ((*(int *)(iVar1 + 4) != 0) && ((local_12c & 0xff) != 0)) {
      iVar1 = __strlen_chk(&local_12c,0x100);
      if ((&cStack301)[iVar1] == '\n') {
        iVar1 = __strlen_chk(&local_12c,0x100);
        (&cStack301)[iVar1] = '\0';
      }
    }
LAB_00015b26:
    iVar5 = iVar5 + 1;
  } while( true );
}



undefined4 aw_amf_prop_get_number(int param_1)

{
  return *(undefined4 *)(param_1 + 0xc);
}



undefined4
aw_rtmp_find_first_matching_property(int param_1,int *param_2,void **param_3,void *param_4)

{
  void **__src;
  int iVar1;
  int iVar2;
  
  iVar2 = 0;
  while( true ) {
    if (*param_2 <= iVar2) {
      return 0;
    }
    __src = (void **)aw_amf_get_prop(param_1,param_2,(void **)0x0,iVar2);
    if ((__src[1] == param_3[1]) && (iVar1 = memcmp(*__src,*param_3,(size_t)__src[1]), iVar1 == 0))
    break;
    if ((__src[2] == (void *)0x3) &&
       (iVar1 = aw_rtmp_find_first_matching_property(param_1,(int *)(__src + 3),param_3,param_4),
       iVar1 != 0)) {
      return 1;
    }
    iVar2 = iVar2 + 1;
  }
  memcpy(param_4,__src,0x18);
  return 1;
}



void aw_rtmp_send_serverBw(int param_1)

{
  int local_134;
  undefined4 local_130;
  undefined local_12c;
  undefined local_12b;
  undefined local_12a;
  undefined4 local_128;
  undefined4 local_124;
  undefined *local_118;
  undefined auStack258 [238];
  int local_14;
  
  local_134 = 2;
  local_14 = __stack_chk_guard;
  local_12b = 5;
  local_118 = auStack258;
  local_124 = 4;
  local_12c = 0;
  local_128 = 0;
  local_130 = 0;
  local_12a = 0;
  aw_amf_encode_int32(local_118,(undefined *)&local_14,*(undefined4 *)(param_1 + 0x6b8));
  aw_rtmp_send_packet(param_1,&local_134,0);
  if (local_14 != __stack_chk_guard) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void aw_rtmp_send_create_stream(int param_1)

{
  undefined *puVar1;
  int iVar2;
  double dVar3;
  int local_13c;
  undefined4 local_138;
  undefined local_134;
  undefined local_133;
  undefined local_132;
  undefined4 local_130;
  undefined *local_12c;
  undefined *local_120;
  undefined auStack266 [238];
  int local_1c [2];
  
  local_120 = auStack266;
  local_1c[0] = __stack_chk_guard;
  local_134 = 1;
  local_13c = 3;
  local_133 = 0x14;
  local_130 = 0;
  local_138 = 0;
  local_132 = 0;
  puVar1 = aw_amf_encode_string(local_120,(undefined *)local_1c,(void **)(param_1 + 0x60c));
  iVar2 = *(int *)(param_1 + 0x6c4) + 1;
  dVar3 = (double)(longlong)iVar2;
  *(int *)(param_1 + 0x6c4) = iVar2;
  local_12c = aw_amf_encode_number
                        (puVar1,(undefined *)local_1c,SUB84(dVar3,0),(int)((ulonglong)dVar3 >> 0x20)
                        );
  *local_12c = 5;
  local_12c = local_12c + (1 - (int)local_120);
  aw_rtmp_send_packet(param_1,&local_13c,1);
  if (local_1c[0] != __stack_chk_guard) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



void aw_amf_prop_reset(int param_1)

{
  if (*(int *)(param_1 + 8) == 3) {
    aw_amf_reset((int *)(param_1 + 0xc));
  }
  else {
    *(undefined4 *)(param_1 + 0x10) = 0;
    *(undefined4 *)(param_1 + 0xc) = 0;
  }
  *(undefined4 *)(param_1 + 8) = 0xff;
  return;
}



void aw_amf_reset(int *param_1)

{
  int iVar1;
  int iVar2;
  
  iVar1 = 0;
  iVar2 = 0;
  while (iVar2 < *param_1) {
    iVar2 = iVar2 + 1;
    aw_amf_prop_reset((int)(void *)param_1[1] + iVar1);
    iVar1 = iVar1 + 0x18;
  }
  free((void *)param_1[1]);
  param_1[1] = 0;
  *param_1 = 0;
  return;
}



undefined4 aw_rtmp_find_prefix_property(int param_1,int *param_2,void **param_3,void *param_4)

{
  void **__src;
  int iVar1;
  int iVar2;
  
  iVar2 = 0;
  while( true ) {
    if (*param_2 <= iVar2) {
      return 0;
    }
    __src = (void **)aw_amf_get_prop(param_1,param_2,(void **)0x0,iVar2);
    if (((int)param_3[1] < (int)__src[1]) &&
       (iVar1 = memcmp(*__src,*param_3,(size_t)param_3[1]), iVar1 == 0)) break;
    if ((__src[2] == (void *)0x3) &&
       (iVar1 = aw_rtmp_find_prefix_property(param_1,(int *)(__src + 3),param_3,param_4), iVar1 != 0
       )) {
      return 1;
    }
    iVar2 = iVar2 + 1;
  }
  memcpy(param_4,__src,0x18);
  return 1;
}



undefined4 FUN_00015d68(int param_1,byte *param_2,int param_3)

{
  int iVar1;
  undefined4 uVar2;
  uint auStack56 [2];
  void *local_30;
  size_t local_2c;
  undefined auStack40 [12];
  int local_1c;
  
  uVar2 = 0;
  iVar1 = aw_amf_decode(param_1,auStack56,param_2,param_3,0);
  if (-1 < iVar1) {
    aw_amf_dump((int *)auStack56);
    iVar1 = aw_amf_get_prop(param_1,(int *)auStack56,(void **)0x0,0);
    local_30 = *(void **)(iVar1 + 0xc);
    local_2c = *(size_t *)(iVar1 + 0x10);
    if ((local_2c == *(size_t *)(param_1 + 0x5b8)) &&
       (iVar1 = memcmp(local_30,*(void **)(param_1 + 0x5b4),local_2c), iVar1 == 0)) {
      FUN_00015a1c(param_1,(int *)auStack56);
      iVar1 = aw_rtmp_find_first_matching_property
                        (param_1,(int *)auStack56,(void **)(param_1 + 0x5bc),auStack40);
      if (iVar1 != 0) {
        *(double *)(param_1 + 0xc09f0) = (double)(longlong)local_1c;
      }
      iVar1 = aw_rtmp_find_prefix_property
                        (param_1,(int *)auStack56,(void **)(param_1 + 0x5c4),auStack40);
      if (iVar1 != 0) {
        *(byte *)(param_1 + 0xc0a10) = *(byte *)(param_1 + 0xc0a10) | 1;
      }
      iVar1 = aw_rtmp_find_prefix_property
                        (param_1,(int *)auStack56,(void **)(param_1 + 0x5cc),auStack40);
      if (iVar1 != 0) {
        *(byte *)(param_1 + 0xc0a10) = *(byte *)(param_1 + 0xc0a10) | 4;
      }
      uVar2 = 1;
    }
    aw_amf_reset((int *)auStack56);
  }
  return uVar2;
}



void aw_send_seek(int param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  undefined *puVar1;
  int iVar2;
  double dVar3;
  undefined8 uVar4;
  int local_14c;
  undefined4 local_148;
  undefined local_144;
  undefined local_143;
  undefined local_142;
  undefined4 local_140;
  undefined *local_13c;
  undefined *local_130;
  undefined auStack282 [238];
  int local_2c [2];
  
  local_130 = auStack282;
  local_2c[0] = __stack_chk_guard;
  local_140 = 0;
  local_144 = 1;
  local_14c = 8;
  local_148 = 0;
  local_143 = 0x14;
  local_142 = 0;
  puVar1 = aw_amf_encode_string(local_130,(undefined *)local_2c,(void **)(param_1 + 0x604));
  iVar2 = *(int *)(param_1 + 0x6c4) + 1;
  dVar3 = (double)(longlong)iVar2;
  *(int *)(param_1 + 0x6c4) = iVar2;
  puVar1 = aw_amf_encode_number
                     (puVar1,(undefined *)local_2c,SUB84(dVar3,0),(int)((ulonglong)dVar3 >> 0x20));
  *puVar1 = 5;
  uVar4 = __aeabi_l2d(param_3,param_4);
  local_13c = aw_amf_encode_number
                        (puVar1 + 1,(undefined *)local_2c,(int)uVar4,(int)((ulonglong)uVar4 >> 0x20)
                        );
  local_13c = local_13c + -(int)local_130;
  *(byte *)(param_1 + 0xc0a11) = *(byte *)(param_1 + 0xc0a11) | 0x20;
  *(undefined4 *)(param_1 + 0xc0a14) = 0;
  aw_rtmp_send_packet(param_1,&local_14c,1);
  if (local_2c[0] != __stack_chk_guard) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return;
}



int aw_rtmp_sock_buf_close(int *param_1)

{
  int iVar1;
  
  if (*param_1 == -1) {
    return 0;
  }
  iVar1 = close(*param_1);
  return iVar1;
}



void aw_rtmp_close(int param_1)

{
  void *__ptr;
  int iVar1;
  int iVar2;
  void **ppvVar3;
  void **__ptr_00;
  double dVar4;
  
  if (param_1 != 0) {
    if (*(int *)(param_1 + 0xc0a38) != -1) {
      iVar1 = *(int *)(param_1 + 0x6a4);
      if (0 < iVar1) {
        *(undefined4 *)(param_1 + 0x6a4) = 0;
        if (*(int *)(param_1 + 0xc4ad0) << 0x1b < 0) {
          FUN_00014494(param_1);
        }
        dVar4 = (double)(longlong)iVar1;
        FUN_00014538(SUB84(dVar4,0),(int)((ulonglong)dVar4 >> 0x20),param_1);
      }
      if (*(int *)(param_1 + 0xc0a04) != 0) {
        FUN_00013b74(param_1,3,(int)&DAT_0001eea1,1);
        free(*(void **)(param_1 + 0xc0a04));
        *(undefined4 *)(param_1 + 0xc0a04) = 0;
        *(undefined4 *)(param_1 + 0xc0a08) = 0;
      }
      aw_rtmp_sock_buf_close((int *)(param_1 + 0xc0a38));
    }
    *(undefined4 *)(param_1 + 0x6a4) = 0xffffffff;
    *(undefined4 *)(param_1 + 0xc0a38) = 0xffffffff;
    iVar2 = 0;
    *(undefined4 *)(param_1 + 0x694) = 0;
    *(undefined4 *)(param_1 + 0x698) = 0;
    *(undefined4 *)(param_1 + 0x69c) = 0;
    *(undefined *)(param_1 + 0xc0a10) = 0;
    *(undefined *)(param_1 + 0xc0a11) = 0;
    *(undefined4 *)(param_1 + 0xc0a14) = 0;
    *(undefined4 *)(param_1 + 0xc0a2c) = 0;
    aw_rtmp_packet_free(param_1 + 0xc0a18);
    iVar1 = param_1;
    do {
      if (*(int *)(iVar1 + 0x6d0) != 0) {
        aw_rtmp_packet_free(*(int *)(iVar1 + 0x6d0));
        free(*(void **)(iVar1 + 0x6d0));
        *(undefined4 *)(iVar1 + 0x6d0) = 0;
      }
      __ptr = *(void **)(param_1 + iVar2 + 0x407d0);
      if (__ptr != (void *)0x0) {
        free(__ptr);
        *(undefined4 *)(param_1 + iVar2 + 0x407d0) = 0;
      }
      iVar2 = iVar2 + 4;
      iVar1 = iVar1 + 4;
    } while (iVar2 != 0x40100);
    __ptr_00 = *(void ***)(param_1 + 0x6cc);
    iVar1 = 0;
    iVar2 = *(int *)(param_1 + 0x6c8);
    ppvVar3 = __ptr_00;
    while (iVar1 < iVar2) {
      iVar1 = iVar1 + 1;
      free(*ppvVar3);
      ppvVar3 = ppvVar3 + 3;
    }
    free(__ptr_00);
    *(undefined4 *)(param_1 + 0x6cc) = 0;
    *(undefined4 *)(param_1 + 0x6c8) = 0;
    *(undefined4 *)(param_1 + 0x6c4) = 0;
    *(undefined *)(param_1 + 0x6c1) = 0;
    *(undefined4 *)(param_1 + 0xc0a3c) = 0;
    *(undefined4 *)(param_1 + 0xc09f8) = 0;
    *(undefined4 *)(param_1 + 0xc09fc) = 0;
    *(undefined4 *)(param_1 + 0xc0a00) = 0;
    free(*(void **)(param_1 + 0xc4a5c));
    *(undefined4 *)(param_1 + 0xc4a5c) = 0;
    if (*(int *)(param_1 + 0xc4ac8) << 0x1a < 0) {
      free(*(void **)(param_1 + 0xc4a6c));
      *(undefined4 *)(param_1 + 0xc4a6c) = 0;
      *(uint *)(param_1 + 0xc4ac8) = *(uint *)(param_1 + 0xc4ac8) ^ 0x20;
    }
  }
  return;
}



byte * FUN_0001606c(int param_1,byte *param_2,int param_3)

{
  byte bVar1;
  int iVar2;
  byte *pbVar3;
  uint uVar4;
  uint *__src;
  uint *puVar5;
  uint uVar6;
  undefined *puVar7;
  byte **ppbVar8;
  int iVar9;
  int iVar10;
  int iVar11;
  byte *pbVar12;
  uint uVar13;
  size_t sVar14;
  uint uVar15;
  byte *pbVar16;
  int iVar17;
  uint uVar18;
  byte *pbVar19;
  uint uVar20;
  uint auStack372 [2];
  void *local_16c;
  size_t local_168;
  byte *local_164;
  byte *local_160;
  uint local_15c [4];
  void *local_14c;
  byte *local_148;
  undefined local_144;
  undefined local_143;
  undefined local_142;
  byte *local_140;
  undefined *local_13c;
  undefined *local_130;
  undefined auStack282 [238];
  int local_2c [2];
  
  pbVar16 = (byte *)0x0;
  local_2c[0] = __stack_chk_guard;
  iVar2 = aw_amf_decode(param_1,auStack372,param_2,param_3,0);
  if (iVar2 < 0) goto LAB_000168bc;
  aw_amf_dump((int *)auStack372);
  iVar2 = aw_amf_get_prop(param_1,(int *)auStack372,(void **)0x0,0);
  local_16c = *(void **)(iVar2 + 0xc);
  local_168 = *(size_t *)(iVar2 + 0x10);
  iVar2 = aw_amf_get_prop(param_1,(int *)auStack372,(void **)0x0,1);
  sVar14 = local_168;
  pbVar19 = *(byte **)(iVar2 + 0xc);
  if ((local_168 == *(size_t *)(param_1 + 0x530)) &&
     (pbVar16 = (byte *)memcmp(local_16c,*(void **)(param_1 + 0x52c),local_168),
     pbVar16 == (byte *)0x0)) {
    pbVar3 = pbVar16;
    pbVar12 = pbVar16;
    while (local_164 = pbVar16, local_160 = pbVar16, (int)pbVar12 < *(int *)(param_1 + 0x6c8)) {
      ppbVar8 = (byte **)(pbVar3 + *(int *)(param_1 + 0x6cc));
      pbVar3 = pbVar3 + 0xc;
      if (ppbVar8[2] == pbVar19) {
        local_164 = *ppbVar8;
        local_160 = ppbVar8[1];
        FUN_000132cc(*(int *)(param_1 + 0x6cc),(int *)(param_1 + 0x6c8),(int)pbVar12,0);
        break;
      }
      pbVar12 = pbVar12 + 1;
    }
    pbVar19 = local_160;
    pbVar16 = local_164;
    if (local_164 != (byte *)0x0) {
      if ((local_160 == *(byte **)(param_1 + 0x4a8)) &&
         (uVar4 = memcmp(local_164,*(void **)(param_1 + 0x4a4),(size_t)local_160), uVar4 == 0)) {
        if ((*(int *)(param_1 + 0xc4ab0) != 0) &&
           (iVar2 = aw_rtmp_find_first_matching_property
                              (param_1,(int *)auStack372,(void **)(param_1 + 0x4fc),&local_14c),
           iVar2 != 0)) {
          memset(local_15c,0,0x10);
          puVar5 = local_15c;
          iVar2 = *(int *)(param_1 + 0xc4ab0);
          iVar17 = *(int *)(param_1 + 0xc4aac);
          uVar6 = uVar4;
          uVar18 = uVar4;
          if (0xf < iVar2) {
            iVar2 = 0x10;
          }
          while ((int)uVar4 < iVar2) {
            uVar18 = uVar18 | (uint)*(byte *)(iVar17 + uVar4) << ((uVar6 & 0x1f) << 3);
            if (uVar6 == 3) {
              *puVar5 = uVar18;
              uVar18 = 0;
              uVar6 = 0;
              puVar5 = puVar5 + 1;
            }
            else {
              uVar6 = uVar6 + 1;
            }
            uVar4 = uVar4 + 1;
          }
          if (uVar18 != 0) {
            *puVar5 = uVar18;
          }
          puVar7 = local_13c + 0xe;
          if (-1 < (int)(local_13c + 7)) {
            puVar7 = local_13c + 7;
          }
          uVar4 = (int)puVar7 >> 3;
          __src = (uint *)malloc(uVar4 << 3);
          iVar2 = 0;
          puVar5 = __src;
          pbVar16 = local_140;
          while (iVar2 < (int)uVar4) {
            uVar6 = (uint)*pbVar16;
            if ((int)(uVar6 << 0x19) < 0) {
              iVar17 = ((uVar6 & 0xf) + 9) * 0x10;
            }
            else {
              iVar17 = (uVar6 & 0xf) << 4;
            }
            uVar6 = pbVar16[1] & 0xf;
            if ((pbVar16[1] & 0x40) != 0) {
              uVar6 = uVar6 + 9;
            }
            uVar18 = (uint)pbVar16[2];
            if ((int)(uVar18 << 0x19) < 0) {
              iVar9 = ((uVar18 & 0xf) + 9) * 0x10;
            }
            else {
              iVar9 = (uVar18 & 0xf) << 4;
            }
            uVar18 = pbVar16[3] & 0xf;
            if ((pbVar16[3] & 0x40) != 0) {
              uVar18 = uVar18 + 9;
            }
            bVar1 = pbVar16[4];
            if ((bVar1 & 0x40) == 0) {
              iVar10 = (bVar1 & 0xf) << 4;
            }
            else {
              iVar10 = ((bVar1 & 0xf) + 9) * 0x10;
            }
            uVar13 = pbVar16[5] & 0xf;
            if ((pbVar16[5] & 0x40) != 0) {
              uVar13 = uVar13 + 9;
            }
            uVar20 = (uint)pbVar16[6];
            if ((int)(uVar20 << 0x19) < 0) {
              iVar11 = ((uVar20 & 0xf) + 9) * 0x10;
            }
            else {
              iVar11 = (uVar20 & 0xf) << 4;
            }
            uVar20 = pbVar16[7] & 0xf;
            if ((pbVar16[7] & 0x40) != 0) {
              uVar20 = uVar20 + 9;
            }
            pbVar16 = pbVar16 + 8;
            iVar2 = iVar2 + 1;
            *puVar5 = iVar17 + uVar6 | (iVar9 + uVar18) * 0x100 | (iVar10 + uVar13) * 0x10000 |
                      (iVar11 + uVar20) * 0x1000000;
            puVar5 = puVar5 + 1;
          }
          iVar2 = __aeabi_idiv(0x34,uVar4);
          uVar18 = *__src;
          uVar6 = (iVar2 + 6) * -0x61c88647;
          while (uVar6 != 0) {
            uVar20 = (uVar6 << 0x1c) >> 0x1e;
            puVar5 = __src + uVar4;
            uVar13 = uVar4;
            while( true ) {
              uVar13 = uVar13 - 1;
              if ((int)uVar13 < 1) break;
              uVar15 = puVar5[-2];
              uVar18 = puVar5[-1] -
                       ((uVar15 ^ local_15c[uVar13 & 3 ^ uVar20]) + (uVar18 ^ uVar6) ^
                       (uVar18 >> 3 ^ uVar15 << 4) + (uVar18 << 2 ^ uVar15 >> 5));
              puVar5 = puVar5 + -1;
              *puVar5 = uVar18;
            }
            uVar15 = __src[uVar4 - 1];
            uVar18 = *__src - ((uVar15 ^ local_15c[uVar13 & 3 ^ uVar20]) + (uVar18 ^ uVar6) ^
                              (uVar15 << 4 ^ uVar18 >> 3) + (uVar15 >> 5 ^ uVar18 << 2));
            *__src = uVar18;
            uVar6 = uVar6 + 0x61c88647;
          }
          local_13c = (undefined *)((int)local_13c / 2);
          memcpy(local_140,__src,(size_t)local_13c);
          free(__src);
          FUN_000145d0(param_1,&local_140);
        }
        if ((*(uint *)(param_1 + 0xc4ad0) & 0x10) == 0) {
          aw_rtmp_send_serverBw(param_1);
          aw_rtmp_send_ctrl(param_1,3,0,300);
        }
        else {
          FUN_00014660(param_1);
          FUN_00014704(param_1);
        }
        aw_rtmp_send_create_stream(param_1);
        if (-1 < *(int *)(param_1 + 0xc4ad0) << 0x1b) {
          if (*(int *)(param_1 + 0xc4aa8) != 0) {
            FUN_000147a8(param_1,(void **)(param_1 + 0xc4aa4));
          }
          iVar2 = 0xc4a9c;
          if (*(int *)(param_1 + 0xc4aa0) == 0) {
            if (-1 < *(int *)(param_1 + 0xc4ac8) << 0x1e) goto LAB_00016466;
            iVar2 = 0xc4a64;
          }
          FUN_0001484c(param_1,(void **)(param_1 + iVar2));
        }
      }
      else {
        if ((pbVar19 == *(byte **)(param_1 + 0x610)) &&
           (iVar2 = memcmp(pbVar16,*(void **)(param_1 + 0x60c),(size_t)pbVar19), iVar2 == 0)) {
          iVar2 = aw_amf_get_prop(param_1,(int *)auStack372,(void **)0x0,3);
          *(undefined4 *)(param_1 + 0x6a4) = *(undefined4 *)(iVar2 + 0xc);
          if (*(int *)(param_1 + 0xc4ad0) << 0x1b < 0) {
            FUN_000148e0(param_1);
          }
          else {
            if (*(int *)(param_1 + 0xc4ac8) << 0x1c < 0) {
              FUN_00014994(param_1);
            }
            FUN_00014a58(param_1);
            aw_rtmp_send_ctrl(param_1,3,*(undefined4 *)(param_1 + 0x6a4),
                              *(undefined4 *)(param_1 + 0x6a0));
          }
        }
        else {
          if (((pbVar19 == *(byte **)(param_1 + 0x548)) &&
              (iVar2 = memcmp(pbVar16,*(void **)(param_1 + 0x544),(size_t)pbVar19), iVar2 == 0)) ||
             ((pbVar19 == *(byte **)(param_1 + 0x5f0) &&
              (iVar2 = memcmp(pbVar16,*(void **)(param_1 + 0x5ec),(size_t)pbVar19), iVar2 == 0)))) {
            *(undefined *)(param_1 + 0x6c1) = 1;
          }
        }
      }
LAB_00016466:
      free(local_164);
LAB_000168b4:
      pbVar16 = (byte *)0x0;
    }
  }
  else {
    if ((sVar14 == *(size_t *)(param_1 + 0x560)) &&
       (pbVar16 = (byte *)memcmp(local_16c,*(void **)(param_1 + 0x55c),sVar14),
       pbVar16 == (byte *)0x0)) {
      pbVar3 = *(byte **)(param_1 + 0x694);
      if (pbVar3 == (byte *)0x0) {
        local_143 = 0x14;
        local_14c = (void *)0x3;
        local_130 = auStack282;
        local_144 = 0;
        local_142 = 0;
        local_148 = pbVar3;
        local_140 = pbVar3;
        puVar7 = aw_amf_encode_string(local_130,(undefined *)local_2c,(void **)(param_1 + 0x524));
        pbVar19 = (byte *)(*(int *)(param_1 + 0x6c4) + 1);
        *(byte **)(param_1 + 0x6c4) = pbVar19;
        pbVar16 = pbVar3;
LAB_0001654e:
        local_13c = aw_amf_encode_number
                              (puVar7,(undefined *)local_2c,SUB84((double)(longlong)(int)pbVar19,0),
                               (int)((ulonglong)(double)(longlong)(int)pbVar19 >> 0x20));
        *local_13c = 5;
        local_13c = local_13c + (1 - (int)local_130);
        aw_rtmp_send_packet(param_1,(int *)&local_14c,(int)pbVar16);
      }
    }
    else {
      if ((sVar14 != *(size_t *)(param_1 + 0x568)) ||
         (pbVar16 = (byte *)memcmp(local_16c,*(void **)(param_1 + 0x564),sVar14),
         pbVar16 != (byte *)0x0)) {
        if ((sVar14 == *(size_t *)(param_1 + 0x570)) &&
           (iVar2 = memcmp(local_16c,*(void **)(param_1 + 0x56c),sVar14), iVar2 == 0)) {
LAB_000167f4:
          pbVar16 = (byte *)0x1;
          aw_rtmp_close(param_1);
        }
        else {
          if ((sVar14 == *(size_t *)(param_1 + 0x538)) &&
             (pbVar16 = (byte *)memcmp(local_16c,*(void **)(param_1 + 0x534),sVar14),
             pbVar16 == (byte *)0x0)) {
            local_140 = (byte *)(*(int *)(param_1 + 0x694) * 0x16);
            local_144 = 1;
            local_143 = 0x14;
            local_130 = auStack282;
            local_14c = (void *)0x3;
            local_142 = 0;
            local_148 = pbVar16;
            puVar7 = aw_amf_encode_string
                               (local_130,(undefined *)local_2c,(void **)(param_1 + 0x53c));
            goto LAB_0001654e;
          }
          if ((sVar14 == *(size_t *)(param_1 + 0x578)) &&
             (pbVar16 = (byte *)memcmp(local_16c,*(void **)(param_1 + 0x574),sVar14),
             pbVar16 == (byte *)0x0)) {
            FUN_00014b80(SUB84((double)(longlong)(int)pbVar19,0),
                         (int)((ulonglong)(double)(longlong)(int)pbVar19 >> 0x20),param_1);
          }
          else {
            if ((sVar14 == *(size_t *)(param_1 + 0x580)) &&
               (iVar17 = memcmp(local_16c,*(void **)(param_1 + 0x57c),sVar14), iVar2 = iVar17,
               iVar17 == 0)) {
              while (iVar2 < *(int *)(param_1 + 0x6c8)) {
                iVar9 = *(int *)(param_1 + 0x6cc);
                sVar14 = *(size_t *)(iVar9 + iVar17 + 4);
                if ((sVar14 == *(size_t *)(param_1 + 0x528)) &&
                   (pbVar16 = (byte *)memcmp(*(void **)(iVar9 + iVar17),*(void **)(param_1 + 0x524),
                                             sVar14), pbVar16 == (byte *)0x0)) goto LAB_0001688a;
                iVar17 = iVar17 + 0xc;
                iVar2 = iVar2 + 1;
              }
              goto LAB_000168b4;
            }
            if ((sVar14 != *(size_t *)(param_1 + 0x588)) ||
               (pbVar16 = (byte *)memcmp(local_16c,*(void **)(param_1 + 0x584),sVar14),
               pbVar16 != (byte *)0x0)) {
              if ((sVar14 != *(size_t *)(param_1 + 0x590)) ||
                 (pbVar16 = (byte *)memcmp(local_16c,*(void **)(param_1 + 0x58c),sVar14),
                 pbVar16 != (byte *)0x0)) {
                if ((sVar14 == *(size_t *)(param_1 + 0x5a8)) &&
                   (iVar2 = memcmp(local_16c,*(void **)(param_1 + 0x5a4),sVar14), iVar2 == 0)) {
                  iVar2 = aw_amf_get_prop(param_1,(int *)auStack372,(void **)0x0,3);
                  local_15c[0] = *(uint *)(iVar2 + 0xc);
                  local_15c[1] = *(undefined4 *)(iVar2 + 0x10);
                  iVar2 = aw_amf_get_prop(param_1,(int *)local_15c,(void **)(param_1 + 0x594),-1);
                  local_14c = *(void **)(iVar2 + 0xc);
                  local_148 = *(byte **)(iVar2 + 0x10);
                  aw_amf_get_prop(param_1,(int *)local_15c,(void **)(param_1 + 0x59c),-1);
                  pbVar19 = local_148;
                  if (((((local_148 == *(byte **)(param_1 + 0x630)) &&
                        (iVar2 = memcmp(local_14c,*(void **)(param_1 + 0x62c),(size_t)local_148),
                        iVar2 == 0)) ||
                       ((pbVar19 == *(byte **)(param_1 + 0x638) &&
                        (iVar2 = memcmp(local_14c,*(void **)(param_1 + 0x634),(size_t)pbVar19),
                        iVar2 == 0)))) ||
                      ((pbVar19 == *(byte **)(param_1 + 0x640) &&
                       (iVar2 = memcmp(local_14c,*(void **)(param_1 + 0x63c),(size_t)pbVar19),
                       iVar2 == 0)))) ||
                     ((pbVar19 == *(byte **)(param_1 + 0x648) &&
                      (iVar2 = memcmp(local_14c,*(void **)(param_1 + 0x644),(size_t)pbVar19),
                      iVar2 == 0)))) {
                    *(undefined4 *)(param_1 + 0x6a4) = 0xffffffff;
                    aw_rtmp_close(param_1);
                  }
                  else {
                    if (((pbVar19 == *(byte **)(param_1 + 0x650)) &&
                        (iVar2 = memcmp(local_14c,*(void **)(param_1 + 0x64c),(size_t)pbVar19),
                        iVar2 == 0)) ||
                       ((pbVar19 == *(byte **)(param_1 + 0x678) &&
                        (iVar2 = memcmp(local_14c,*(void **)(param_1 + 0x674),(size_t)pbVar19),
                        iVar2 == 0)))) {
                      iVar17 = 0;
                      *(undefined *)(param_1 + 0x6c1) = 1;
                      iVar2 = 0;
                      while (iVar2 < *(int *)(param_1 + 0x6c8)) {
                        iVar9 = *(int *)(param_1 + 0x6cc);
                        sVar14 = *(size_t *)(iVar9 + iVar17 + 4);
                        if ((sVar14 == *(size_t *)(param_1 + 0x548)) &&
                           (pbVar16 = (byte *)memcmp(*(void **)(iVar9 + iVar17),
                                                     *(void **)(param_1 + 0x544),sVar14),
                           pbVar16 == (byte *)0x0)) goto LAB_0001688a;
                        iVar2 = iVar2 + 1;
                        iVar17 = iVar17 + 0xc;
                      }
                    }
                    else {
                      if ((pbVar19 != *(byte **)(param_1 + 0x688)) ||
                         (iVar17 = memcmp(local_14c,*(void **)(param_1 + 0x684),(size_t)pbVar19),
                         iVar17 != 0)) {
                        if ((((pbVar19 == *(byte **)(param_1 + 0x658)) &&
                             (iVar2 = memcmp(local_14c,*(void **)(param_1 + 0x654),(size_t)pbVar19),
                             iVar2 == 0)) ||
                            ((pbVar19 == *(byte **)(param_1 + 0x660) &&
                             (iVar2 = memcmp(local_14c,*(void **)(param_1 + 0x65c),(size_t)pbVar19),
                             iVar2 == 0)))) ||
                           ((pbVar19 == *(byte **)(param_1 + 0x680) &&
                            (iVar2 = memcmp(local_14c,*(void **)(param_1 + 0x67c),(size_t)pbVar19),
                            iVar2 == 0)))) goto LAB_000167f4;
                        if ((pbVar19 != *(byte **)(param_1 + 0x668)) ||
                           (pbVar16 = (byte *)memcmp(local_14c,*(void **)(param_1 + 0x664),
                                                     (size_t)pbVar19), pbVar16 != (byte *)0x0)) {
                          if ((pbVar19 != *(byte **)(param_1 + 0x670)) ||
                             (pbVar16 = (byte *)memcmp(local_14c,*(void **)(param_1 + 0x66c),
                                                       (size_t)pbVar19), pbVar16 != (byte *)0x0))
                          goto LAB_000168b4;
                          if (*(int *)(param_1 + 0x6b4) - 1U < 2) {
                            aw_rtmp_send_pause(param_1,0,*(int *)(param_1 + 0x6b0));
                            *(undefined4 *)(param_1 + 0x6b4) = 3;
                          }
                        }
                        goto LAB_000168b6;
                      }
                      *(undefined *)(param_1 + 0x6c1) = 1;
                      iVar2 = iVar17;
                      while (iVar2 < *(int *)(param_1 + 0x6c8)) {
                        iVar9 = *(int *)(param_1 + 0x6cc);
                        sVar14 = *(size_t *)(iVar9 + iVar17 + 4);
                        if ((sVar14 == *(size_t *)(param_1 + 0x5f0)) &&
                           (pbVar16 = (byte *)memcmp(*(void **)(iVar9 + iVar17),
                                                     *(void **)(param_1 + 0x5ec),sVar14),
                           pbVar16 == (byte *)0x0)) goto LAB_0001688a;
                        iVar2 = iVar2 + 1;
                        iVar17 = iVar17 + 0xc;
                      }
                    }
                  }
                }
                else {
                  if ((sVar14 == *(size_t *)(param_1 + 0x5b0)) &&
                     (iVar17 = memcmp(local_16c,*(void **)(param_1 + 0x5ac),sVar14), iVar2 = iVar17,
                     iVar17 == 0)) {
                    while (iVar2 < *(int *)(param_1 + 0x6c8)) {
                      iVar9 = *(int *)(param_1 + 0x6cc);
                      sVar14 = *(size_t *)(iVar9 + iVar17 + 4);
                      if ((sVar14 == *(size_t *)(param_1 + 0x550)) &&
                         (pbVar16 = (byte *)memcmp(*(void **)(iVar9 + iVar17),
                                                   *(void **)(param_1 + 0x54c),sVar14),
                         pbVar16 == (byte *)0x0)) goto LAB_0001688a;
                      iVar17 = iVar17 + 0xc;
                      iVar2 = iVar2 + 1;
                    }
                  }
                }
                goto LAB_000168b4;
              }
              aw_rtmp_close(param_1);
            }
          }
        }
      }
    }
  }
LAB_000168b6:
  aw_amf_reset((int *)auStack372);
LAB_000168bc:
  if (local_2c[0] == __stack_chk_guard) {
    return pbVar16;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
LAB_0001688a:
  FUN_000132cc(iVar9,(int *)(param_1 + 0x6c8),iVar2,1);
  goto LAB_000168b6;
}



int aw_rtmp_client_packet(int param_1,undefined4 *param_2,uint param_3)

{
  byte bVar1;
  uint uVar2;
  byte *pbVar3;
  undefined uVar4;
  ushort uVar5;
  undefined4 uVar6;
  uint uVar7;
  uint uVar8;
  uint uVar9;
  int iVar10;
  uint uVar11;
  
  switch(*(undefined *)((int)param_2 + 9)) {
  case 1:
    if (3 < (uint)param_2[4]) {
      uVar8 = aw_amf_decode_int32((byte *)param_2[7]);
      *(uint *)(param_1 + 0x68c) = uVar8;
    }
    break;
  case 4:
    pbVar3 = (byte *)param_2[7];
    if (pbVar3 == (byte *)0x0) {
LAB_0001693e:
      uVar5 = 0xffff;
    }
    else {
      uVar7 = param_2[4];
      uVar8 = uVar7;
      if (1 < uVar7) {
        param_3 = (uint)*pbVar3;
        uVar8 = (uint)pbVar3[1];
      }
      if (uVar7 < 2) goto LAB_0001693e;
      uVar5 = (ushort)uVar8 | (ushort)(param_3 << 8);
    }
    if (5 < (uint)param_2[4]) {
      if (uVar5 == 6) {
        uVar8 = aw_amf_decode_int32(pbVar3 + 2);
        aw_rtmp_send_ctrl(param_1,7,uVar8,0);
      }
      else {
        if (uVar5 == 0x1f) {
          if ((*(uint *)(param_1 + 0xc4ac8) & 0x10) == 0) {
            return 0;
          }
          if (*(int *)(param_1 + 0x6b4) == 0) {
            iVar10 = *(int *)(param_1 +
                             (int)(
                                  "<%s:%u>: ******asfHttpCtrl->packetSize:%d chunkSize:%d > 32*1024."
                                  + *(int *)(param_1 + 0x6a8)) * 4);
            *(int *)(param_1 + 0x6b0) = iVar10;
            aw_rtmp_send_pause(param_1,1,iVar10);
            *(undefined4 *)(param_1 + 0x6b4) = 1;
            return 0;
          }
          if (*(int *)(param_1 + 0x6b4) != 2) {
            return 0;
          }
          aw_rtmp_send_pause(param_1,0,*(int *)(param_1 + 0x6b0));
          uVar6 = 3;
        }
        else {
          if (uVar5 != 1) {
            return 0;
          }
          if (*(int *)(param_1 + 0x6b4) != 1) {
            return 0;
          }
          uVar6 = 2;
        }
        *(undefined4 *)(param_1 + 0x6b4) = uVar6;
      }
    }
    break;
  case 5:
    uVar8 = aw_amf_decode_int32((byte *)param_2[7]);
    *(uint *)(param_1 + 0x6b8) = uVar8;
    break;
  case 6:
    uVar8 = aw_amf_decode_int32((byte *)param_2[7]);
    *(uint *)(param_1 + 0x6bc) = uVar8;
    uVar7 = param_2[4];
    uVar8 = uVar7;
    if (4 < uVar7) {
      uVar8 = (uint)*(byte *)(param_2[7] + 4);
    }
    uVar4 = (undefined)uVar8;
    if (uVar7 < 5) {
      uVar4 = 0xff;
    }
    *(undefined *)(param_1 + 0x6c0) = uVar4;
    break;
  case 8:
  case 9:
    if (*(int *)(param_1 + 0x6a8) == 0) {
      *(undefined4 *)(param_1 + 0x6a8) = *param_2;
    }
    if (*(int *)(param_1 + 0x6b4) == 0) {
      *(undefined4 *)(param_1 + 0x6ac) = param_2[3];
    }
    return 1;
  case 0x11:
    bVar1 = *(byte *)(param_2[7] + 1);
    iVar10 = param_2[4] + -1;
    pbVar3 = (byte *)(param_2[7] + 1);
    goto joined_r0x00016a42;
  case 0x12:
    iVar10 = FUN_00015d68(param_1,(byte *)param_2[7],param_2[4]);
    if (iVar10 != 0) {
      iVar10 = 1;
    }
    return iVar10;
  case 0x14:
    pbVar3 = (byte *)param_2[7];
    iVar10 = param_2[4];
    bVar1 = *pbVar3;
joined_r0x00016a42:
    if (bVar1 == 2) {
      pbVar3 = FUN_0001606c(param_1,pbVar3,iVar10);
      if (pbVar3 == (byte *)0x1) {
        iVar10 = 2;
      }
      else {
        iVar10 = 0;
      }
      return iVar10;
    }
    break;
  case 0x16:
    uVar7 = param_2[3];
    uVar8 = 0;
    while( true ) {
      uVar9 = uVar8;
      uVar11 = param_2[4];
      if (uVar11 <= uVar9 + 0xb) break;
      iVar10 = param_2[7];
      uVar2 = aw_amf_decode_int24((byte *)(iVar10 + uVar9 + 1));
      uVar8 = uVar2 + 0xf + uVar9;
      if (uVar11 < uVar8) break;
      if (*(char *)(iVar10 + uVar9) == '\x12') {
        FUN_00015d68(param_1,(byte *)(iVar10 + uVar9 + 0xb),uVar2);
      }
      else {
        if ((byte)(*(char *)(iVar10 + uVar9) - 8U) < 2) {
          uVar7 = aw_amf_decode_int24((byte *)(iVar10 + uVar9 + 4));
          uVar7 = uVar7 | (uint)*(byte *)(uVar9 + iVar10 + 7) << 0x18;
        }
      }
    }
    if (*(int *)(param_1 + 0x6b4) != 0) {
      return 1;
    }
    *(uint *)(param_1 + 0x6ac) = uVar7;
    return 1;
  }
  return 0;
}



undefined8 FUN_00016ae4(int param_1,void *param_2,size_t param_3)

{
  int iVar1;
  size_t *psVar2;
  size_t __n;
  size_t sVar3;
  size_t sVar4;
  int iVar5;
  undefined8 uVar6;
  
  psVar2 = (size_t *)(param_1 + 0xc0a3c);
  *(undefined4 *)(param_1 + 0xc4a44) = 0;
  sVar4 = param_3;
  do {
    if ((int)sVar4 < 1) {
LAB_00016c36:
      sVar3 = param_3 - sVar4;
LAB_00016c48:
      return CONCAT44(param_1,sVar3);
    }
    if (*(int *)(param_1 + 0xc4ad0) << 0x1f < 0) {
LAB_00016b5e:
      if (*(size_t *)(param_1 + 0xc09fc) == 0) {
        if (0x8f < (int)*psVar2) break;
        if (*(int *)(param_1 + 0xc0a00) == 0) {
          FUN_00013b74(param_1,2,(int)&DAT_0001eea1,1);
        }
        uVar6 = aw_rtmp_sockbuf_fill((uint *)(param_1 + 0xc0a38),(int *)(param_1 + 0x54));
        if (0 < (int)uVar6) break;
        sVar4 = *(size_t *)(param_1 + 0xc4a44);
        if (*(size_t *)(param_1 + 0xc4a44) != 0) goto LAB_00016c3e;
        goto LAB_00016ba4;
      }
      if (*psVar2 == 0) {
        aw_rtmp_sockbuf_fill((uint *)(param_1 + 0xc0a38),(int *)(param_1 + 0x54));
      }
      sVar3 = *(size_t *)(param_1 + 0xc09fc);
      __n = *psVar2;
      if ((int)sVar3 <= (int)*psVar2) {
        __n = sVar3;
      }
    }
    else {
      sVar3 = *psVar2;
      __n = sVar3;
      if (sVar3 == 0) {
        uVar6 = aw_rtmp_sockbuf_fill((uint *)(param_1 + 0xc0a38),(int *)(param_1 + 0x54));
        if ((int)uVar6 < 1) {
          sVar4 = *(size_t *)(param_1 + 0xc4a44);
          if (*(size_t *)(param_1 + 0xc4a44) == 0) {
LAB_00016ba4:
            sVar3 = sVar4;
            aw_rtmp_close(param_1);
          }
          goto LAB_00016c48;
        }
        __n = *psVar2;
      }
    }
    if ((int)sVar4 <= (int)__n) {
      __n = sVar4;
    }
    if ((int)__n < 1) {
      aw_rtmp_close(param_1);
      goto LAB_00016c36;
    }
    memcpy(param_2,*(void **)(param_1 + 0xc0a40),__n);
    *(size_t *)(param_1 + 0xc0a40) = *(int *)(param_1 + 0xc0a40) + __n;
    *psVar2 = *psVar2 - __n;
    iVar5 = __n + *(int *)(param_1 + 0x698);
    *(int *)(param_1 + 0x698) = iVar5;
    if (((*(char *)(param_1 + 0x6c2) != '\0') &&
        (iVar1 = __aeabi_idiv(*(undefined4 *)(param_1 + 0x6bc),10),
        iVar1 + *(int *)(param_1 + 0x69c) < iVar5)) && (sVar3 = FUN_00014c20(param_1), sVar3 == 0))
    goto LAB_00016c48;
    if (*(int *)(param_1 + 0xc4ad0) << 0x1f < 0) {
      *(int *)(param_1 + 0xc09fc) = *(int *)(param_1 + 0xc09fc) - __n;
    }
    sVar4 = sVar4 - __n;
    param_2 = (void *)((int)param_2 + __n);
  } while( true );
  iVar5 = FUN_00013da4(param_1,0);
  if (iVar5 == -1) {
    aw_rtmp_close(param_1);
LAB_00016c3e:
    sVar3 = 0;
    goto LAB_00016c48;
  }
  goto LAB_00016b5e;
}



void * aw_rtmp_read_packet(int param_1,void **param_2)

{
  void *pvVar1;
  void *pvVar2;
  byte *pbVar3;
  int iVar4;
  size_t sVar5;
  byte *__n;
  undefined8 uVar6;
  int local_48 [4];
  byte local_38;
  byte local_37;
  byte local_36;
  byte abStack53 [4];
  byte abStack49 [13];
  int local_24;
  
  local_24 = __stack_chk_guard;
  memset(&local_38,0,0x12);
  local_48[0] = 0xc;
  local_48[1] = 8;
  local_48[2] = 4;
  local_48[3] = 1;
  uVar6 = FUN_00016ae4(param_1,&local_38,1);
  pvVar2 = (void *)uVar6;
  if (pvVar2 == (void *)0x0) goto LAB_00016ebe;
  pvVar2 = (void *)(local_38 & 0x3f);
  *(byte *)(param_2 + 2) = local_38 >> 6;
  pbVar3 = &local_37;
  *param_2 = pvVar2;
  if ((local_38 & 0x3f) == 0) {
    uVar6 = FUN_00016ae4(param_1,pbVar3,1);
    if ((int)uVar6 != 1) goto LAB_00016ebe;
    pbVar3 = &local_36;
    *param_2 = (void *)(local_37 + 0x40);
LAB_00016d0a:
    iVar4 = local_48[*(byte *)(param_2 + 2)];
    if (iVar4 == 0xc) {
      *(undefined *)((int)param_2 + 10) = 1;
    }
    else {
      if ((iVar4 < 0xc) &&
         (pvVar2 = *(void **)(param_1 + ((int)*param_2 + 0x1b4) * 4), pvVar2 != (void *)0x0)) {
        memcpy(param_2,pvVar2,0x20);
      }
    }
    sVar5 = iVar4 - 1;
    if (((int)sVar5 < 1) || (uVar6 = FUN_00016ae4(param_1,pbVar3,sVar5), (size_t)uVar6 == sVar5)) {
      __n = pbVar3 + (sVar5 - (int)&local_38);
      if (2 < (int)sVar5) {
        pvVar2 = (void *)aw_amf_decode_int24(pbVar3);
        param_2[3] = pvVar2;
        if (5 < (int)sVar5) {
          pvVar2 = (void *)aw_amf_decode_int24(pbVar3 + 3);
          param_2[5] = (void *)0x0;
          param_2[4] = pvVar2;
          aw_rtmp_packet_free((int)param_2);
          if ((sVar5 != 6) && (*(byte *)((int)param_2 + 9) = pbVar3[6], sVar5 == 0xb)) {
            param_2[1] = (void *)((uint)pbVar3[9] << 0x10 | (uint)pbVar3[10] << 0x18 |
                                  (uint)pbVar3[7] | (uint)pbVar3[8] << 8);
          }
        }
        if (param_2[3] == (void *)0xffffff) {
          uVar6 = FUN_00016ae4(param_1,pbVar3 + sVar5,4);
          if ((int)uVar6 != 4) goto LAB_00016ebc;
          __n = __n + 4;
          pvVar2 = (void *)aw_amf_decode_int32(pbVar3 + sVar5);
          param_2[3] = pvVar2;
        }
      }
      if ((param_2[4] != (void *)0x0) && (param_2[7] == (void *)0x0)) {
        pvVar2 = aw_rtmp_packet_alloc((int)param_2,(int)param_2[4]);
        if (pvVar2 == (void *)0x0) goto LAB_00016ebe;
        *(byte *)(param_2 + 2) = local_38 >> 6;
      }
      pvVar2 = (void *)((int)param_2[4] - (int)param_2[5]);
      if ((int)*(void **)(param_1 + 0x68c) <= (int)(void *)((int)param_2[4] - (int)param_2[5])) {
        pvVar2 = *(void **)(param_1 + 0x68c);
      }
      if ((byte **)param_2[6] != (byte **)0x0) {
        *(byte **)param_2[6] = __n;
        memcpy((void *)((int)param_2[6] + 0xc),&local_38,(size_t)__n);
        *(int *)((int)param_2[6] + 8) = (int)param_2[7] + (int)param_2[5];
        *(void **)((int)param_2[6] + 4) = pvVar2;
      }
      uVar6 = FUN_00016ae4(param_1,(void *)((int)param_2[7] + (int)param_2[5]),(size_t)pvVar2);
      if ((void *)uVar6 == pvVar2) {
        pvVar1 = *param_2;
        param_2[5] = (void *)((int)param_2[5] + (int)pvVar2);
        if (*(int *)(param_1 + ((int)pvVar1 + 0x1b4) * 4) == 0) {
          pvVar2 = malloc(0x20);
          *(void **)(param_1 + ((int)pvVar1 + 0x1b4) * 4) = pvVar2;
        }
        memcpy(*(void **)(param_1 + ((int)*param_2 + 0x1b4) * 4),param_2,0x20);
        if (param_2[5] == param_2[4]) {
          if (*(char *)((int)param_2 + 10) == '\0') {
            param_2[3] = (void *)((int)param_2[3] +
                                 *(int *)(param_1 +
                                         (int)(
                                              "<%s:%u>: ******asfHttpCtrl->packetSize:%d chunkSize:%d > 32*1024."
                                              + (int)*param_2) * 4));
          }
          *(void **)(param_1 +
                    (int)("<%s:%u>: ******asfHttpCtrl->packetSize:%d chunkSize:%d > 32*1024." +
                         (int)*param_2) * 4) = param_2[3];
          *(undefined4 *)(*(int *)(param_1 + ((int)*param_2 + 0x1b4) * 4) + 0x1c) = 0;
          *(undefined4 *)(*(int *)(param_1 + ((int)*param_2 + 0x1b4) * 4) + 0x14) = 0;
          *(undefined *)(*(int *)(param_1 + ((int)*param_2 + 0x1b4) * 4) + 10) = 0;
        }
        else {
          param_2[7] = (void *)0x0;
        }
        pvVar2 = (void *)0x1;
        goto LAB_00016ebe;
      }
    }
  }
  else {
    if (pvVar2 != (void *)0x1) goto LAB_00016d0a;
    uVar6 = FUN_00016ae4(param_1,pbVar3,2);
    if ((int)uVar6 == 2) {
      pbVar3 = abStack53;
      *param_2 = (void *)((uint)local_37 + (uint)local_36 * 0x100 + 0x40);
      goto LAB_00016d0a;
    }
  }
LAB_00016ebc:
  pvVar2 = (void *)0x0;
LAB_00016ebe:
  if (local_24 != __stack_chk_guard) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return pvVar2;
}



undefined aw_rtmp_connect_stream(int param_1,int param_2)

{
  void *pvVar1;
  uint uVar2;
  void *apvStack48 [2];
  byte local_27;
  int local_20;
  int local_1c;
  
  pvVar1 = memset(apvStack48,0,0x20);
  if (0 < param_2) {
    pvVar1 = (void *)(param_1 + 0xc4000);
  }
  if (0 < param_2) {
    *(int *)((int)pvVar1 + 0xac0) = param_2;
  }
  *(undefined4 *)(param_1 + 0x6a8) = 0;
  while (((*(char *)(param_1 + 0x6c1) == '\0' && (*(int *)(param_1 + 0xc0a38) != -1)) &&
         (pvVar1 = aw_rtmp_read_packet(param_1,apvStack48), pvVar1 != (void *)0x0))) {
    if ((local_1c == local_20) && (local_1c != 0)) {
      uVar2 = local_27 - 8;
      if (1 < (uVar2 & 0xff) && local_27 != 0x12) {
        aw_rtmp_client_packet(param_1,apvStack48,uVar2);
      }
      aw_rtmp_packet_free((int)apvStack48);
    }
  }
  return *(undefined *)(param_1 + 0x6c1);
}



uint FUN_00016f68(int param_1)

{
  long lVar1;
  uint uVar2;
  int iVar3;
  undefined8 uVar4;
  undefined local_c29;
  undefined4 local_c28;
  undefined4 local_c24;
  undefined4 local_c20 [384];
  byte abStack1568 [5];
  undefined auStack1563 [4];
  byte abStack1559 [1531];
  int local_1c;
  
  local_c29 = 0;
  local_c24 = 0;
  local_1c = __stack_chk_guard;
  abStack1568[0] = 3;
  local_c28 = 0;
  memcpy(abStack1568 + 1,&local_c28,4);
  iVar3 = 9;
  memset(auStack1563,0,4);
  do {
    lVar1 = lrand48();
    abStack1568[iVar3] = (byte)lVar1;
    iVar3 = iVar3 + 1;
  } while (iVar3 != 0x601);
  uVar2 = FUN_00013c3c(param_1,(int)abStack1568,0x601);
  if (uVar2 == 0) {
    __android_log_print(5,"CdxRtmpConnect.c:","<%s:%u>: write C0,C1 error","aw_rtmp_hand_shake",
                        0x6b4);
  }
  else {
    uVar4 = FUN_00016ae4(param_1,&local_c29,1);
    if ((int)uVar4 == 1) {
      uVar4 = FUN_00016ae4(param_1,local_c20,0x600);
      if ((int)uVar4 == 0x600) {
        local_c24 = local_c20[0];
        uVar2 = FUN_00013c3c(param_1,(int)local_c20,0x600);
        if (uVar2 != 0) {
          uVar4 = FUN_00016ae4(param_1,local_c20,0x600);
          uVar2 = (uint)((int)uVar4 == 0x600);
        }
        goto LAB_00017064;
      }
      __android_log_print(5,"CdxRtmpConnect.c:","<%s:%u>:  the size of server send S1 is 1536",
                          "aw_rtmp_hand_shake",0x6bf);
    }
    uVar2 = 0;
  }
LAB_00017064:
  if (local_1c != __stack_chk_guard) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar2;
}



int * aw_rtmp_connect1(int param_1,int *param_2)

{
  int iVar1;
  undefined4 uVar2;
  char *pcVar3;
  int *piVar4;
  int *piVar5;
  
  if ((*(uint *)(param_1 + 0xc4ad0) & 4) == 0) {
    piVar5 = param_2;
    if ((int)(*(uint *)(param_1 + 0xc4ad0) << 0x1f) < 0) {
      *(undefined4 *)(param_1 + 0xc09f8) = 1;
      *(undefined4 *)(param_1 + 0xc0a04) = 0;
      *(undefined4 *)(param_1 + 0xc0a08) = 0;
      FUN_00013b74(param_1,0,(int)&DAT_0001eea1,1);
      iVar1 = FUN_00013da4(param_1,1);
      if (iVar1 != 0) {
        *(undefined4 *)(param_1 + 0xc09f8) = 0;
        return (int *)0x0;
      }
      *(undefined4 *)(param_1 + 0xc09f8) = 0;
    }
    piVar4 = (int *)FUN_00016f68(param_1);
    if (piVar4 == (int *)0x0) {
      uVar2 = 0x7ec;
      pcVar3 = "<%s:%u>: hand shake error, rtmp close";
    }
    else {
      piVar4 = FUN_00014d38(param_1,param_2);
      if (piVar4 != (int *)0x0) {
        return (int *)0x1;
      }
      uVar2 = 0x7f2;
      pcVar3 = "<%s:%u>: connect packet error, rtmp close";
    }
    __android_log_print(5,"CdxRtmpConnect.c:",pcVar3,"aw_rtmp_connect1",uVar2,piVar5);
  }
  else {
    piVar4 = (int *)0x0;
    __android_log_print(6,"CdxRtmpConnect.c:",&DAT_0001f089,"aw_rtmp_connect1",0x7d6,param_2);
  }
  return piVar4;
}



undefined8 FUN_00017178(int param_1)

{
  uint uVar1;
  uint uVar2;
  undefined8 uVar3;
  char local_30;
  byte local_2f;
  undefined local_2e;
  undefined local_2d;
  undefined local_2c;
  undefined local_2b;
  undefined local_2a;
  undefined local_29;
  undefined local_28;
  undefined auStack36 [4];
  undefined4 local_20;
  int local_14;
  
  local_14 = __stack_chk_guard;
  memset(auStack36,0,0x10);
  FUN_0001331c((int)auStack36,(char **)(param_1 + 0xc4a4c),(uint)*(ushort *)(param_1 + 0xc4ada));
  local_2b = (undefined)((uint)local_20 >> 8);
  local_2a = (undefined)((uint)local_20 >> 0x10);
  local_30 = '\x04';
  local_2f = 1;
  local_2c = (undefined)local_20;
  local_2e = (undefined)((ushort)*(undefined2 *)(param_1 + 0xc4ada) >> 8);
  local_2d = (undefined)*(undefined2 *)(param_1 + 0xc4ada);
  uVar2 = 0;
  local_29 = (undefined)((uint)local_20 >> 0x18);
  local_28 = 0;
  FUN_00013c3c(param_1,(int)&local_30,9);
  uVar3 = FUN_00016ae4(param_1,&local_30,8);
  uVar1 = (uint)((ulonglong)uVar3 >> 0x20);
  if (((int)uVar3 == 8) && (local_30 == '\0')) {
    uVar1 = (uint)local_2f;
    uVar2 = (uint)(uVar1 == 0x5a);
  }
  if (local_14 != __stack_chk_guard) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return CONCAT44(uVar1,uVar2);
}



int aw_rtmp_connect0(int param_1,sockaddr *param_2)

{
  int iVar1;
  uint uVar2;
  int *piVar3;
  int iVar4;
  undefined8 uVar5;
  undefined4 local_a8;
  int local_a4;
  timeval local_a0;
  uint local_98 [32];
  
  iVar4 = 0;
  *(undefined4 *)(param_1 + 0xc4a44) = 0;
  *(undefined4 *)(param_1 + 0x6b4) = 0;
  *(undefined4 *)(param_1 + 0xc09f0) = 0;
  *(undefined4 *)(param_1 + 0xc09f4) = 0;
  local_a4 = 0;
  local_a8 = 1;
  iVar1 = socket(2,1,6);
  *(int *)(param_1 + 0xc0a38) = iVar1;
  uVar2 = fcntl(iVar1,3,0);
  iVar1 = fcntl(iVar1,4,uVar2 | 0x800);
  if ((-1 < iVar1) && (*(int *)(param_1 + 0xc0a38) != -1)) {
    iVar1 = connect(*(int *)(param_1 + 0xc0a38),param_2,0x10);
    if (iVar1 == 0) {
LAB_0001730c:
      local_a4 = *(int *)(param_1 + 0xc4ad4) * 1000;
      setsockopt(*(int *)(param_1 + 0xc0a38),1,0x14,&local_a4,4);
      setsockopt(*(int *)(param_1 + 0xc0a38),6,1,&local_a8,4);
      iVar4 = 1;
    }
    else {
      piVar3 = (int *)__errno();
      if (*piVar3 == 0x73) {
        while (*(int *)(param_1 + 0x54) != 1) {
          local_a0.tv_sec = 0;
          local_a0.tv_usec = 50000;
          memset(local_98,0,0x80);
          uVar2 = *(uint *)(param_1 + 0xc0a38);
          local_98[0] = 1;
          local_98[(int)uVar2 >> 5] = 1 << (uVar2 & 0x1f) | local_98[(int)uVar2 >> 5];
          iVar1 = select(uVar2 + 1,(fd_set *)0x0,(fd_set *)local_98,(fd_set *)0x0,&local_a0);
          if (0 < iVar1) {
            if (*(short *)(param_1 + 0xc4ad8) == 0) goto LAB_0001730c;
            uVar5 = FUN_00017178(param_1);
            iVar4 = (int)uVar5;
            if (iVar4 == 0) goto LAB_000172fe;
            goto LAB_0001730c;
          }
          *(undefined4 *)(param_1 + 0x34) = 2;
        }
        iVar4 = -1;
      }
      else {
        *(undefined4 *)(param_1 + 0x34) = 2;
LAB_000172fe:
        aw_rtmp_close(param_1);
      }
    }
  }
  return iVar4;
}



hostent * aw_rtmp_connect(int param_1,int *param_2)

{
  hostent *phVar1;
  undefined4 uVar2;
  char *pcVar3;
  undefined4 uVar4;
  sockaddr local_2c;
  int local_1c;
  
  local_1c = __stack_chk_guard;
  phVar1 = *(hostent **)(param_1 + 0xc4a50);
  if (phVar1 == (hostent *)0x0) goto LAB_00017412;
  memset(&local_2c,0,0x10);
  local_2c.sa_family = 2;
  if (*(ushort *)(param_1 + 0xc4ad8) == 0) {
    phVar1 = FUN_0001331c((int)&local_2c,(char **)(param_1 + 0xc4a4c),
                          (uint)*(ushort *)(param_1 + 0xc4ada));
    if (phVar1 != (hostent *)0x0) goto LAB_000173dc;
    uVar4 = 0x813;
    pcVar3 = "<%s:%u>: -- Connect directly error, hostname = %s";
LAB_000173d8:
    uVar2 = 5;
  }
  else {
    phVar1 = FUN_0001331c((int)&local_2c,(char **)(param_1 + 0xc4a54),
                          (uint)*(ushort *)(param_1 + 0xc4ad8));
    if (phVar1 == (hostent *)0x0) {
      pcVar3 = "<%s:%u>: Connect via SOCKS  error";
      uVar4 = 0x80a;
      goto LAB_000173d8;
    }
LAB_000173dc:
    phVar1 = (hostent *)aw_rtmp_connect0(param_1,&local_2c);
    if (phVar1 != (hostent *)0x0) {
      *(undefined *)(param_1 + 0x6c2) = 1;
      phVar1 = (hostent *)aw_rtmp_connect1(param_1,param_2);
      goto LAB_00017412;
    }
    uVar4 = 0x81a;
    pcVar3 = "<%s:%u>: aw_rtmp_connect0  error";
    uVar2 = 3;
  }
  __android_log_print(uVar2,"CdxRtmpConnect.c:",pcVar3,"aw_rtmp_connect",uVar4);
LAB_00017412:
  if (local_1c != __stack_chk_guard) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return phVar1;
}



int aw_rtmp_connect3(int param_1,sockaddr *param_2)

{
  int iVar1;
  int iVar2;
  undefined8 uVar3;
  undefined4 local_28;
  int local_24 [2];
  
  iVar2 = 0;
  *(undefined4 *)(param_1 + 0xc4a44) = 0;
  *(undefined4 *)(param_1 + 0x6b4) = 0;
  *(undefined4 *)(param_1 + 0xc09f0) = 0;
  *(undefined4 *)(param_1 + 0xc09f4) = 0;
  local_28 = 1;
  local_24[0] = 0;
  iVar1 = socket(2,1,6);
  *(int *)(param_1 + 0xc0a38) = iVar1;
  if (iVar1 == -1) {
    return 0;
  }
  iVar1 = connect(iVar1,param_2,0x10);
  if (iVar1 < 0) {
LAB_000174b6:
    aw_rtmp_close(param_1);
  }
  else {
    if (*(short *)(param_1 + 0xc4ad8) != 0) {
      uVar3 = FUN_00017178(param_1);
      iVar2 = (int)uVar3;
      if (iVar2 == 0) goto LAB_000174b6;
    }
    local_24[0] = *(int *)(param_1 + 0xc4ad4) * 1000;
    setsockopt(*(int *)(param_1 + 0xc0a38),1,0x14,local_24,4);
    setsockopt(*(int *)(param_1 + 0xc0a38),6,1,&local_28,4);
    iVar2 = 1;
  }
  return iVar2;
}



int __RtmpGetProbeData(int param_1)

{
  return param_1 + 4;
}



undefined4 __RtmpAttribute(void)

{
  return 4;
}



undefined4 __RtmpGetIoState(int param_1)

{
  return *(undefined4 *)(param_1 + 0x34);
}



undefined4 __RtmpEos(int param_1)

{
  return *(undefined4 *)(param_1 + 0x30);
}



undefined8 __RtmpSize(int param_1)

{
  if (*(int *)(param_1 + 0x38) == 0) {
    return *(undefined8 *)(param_1 + 0x20);
  }
  return 0xffffffffffffffff;
}



undefined8 __RtmpTell(int param_1)

{
  undefined8 uVar1;
  
  pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0x60));
  uVar1 = *(undefined8 *)(param_1 + 0x70);
  pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0x60));
  return uVar1;
}



undefined8 __RtmpSeek(int param_1,undefined4 param_2,uint param_3,uint param_4,int param_5)

{
  undefined4 uVar1;
  undefined4 *puVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  bool bVar6;
  undefined8 uVar7;
  longlong lVar8;
  int iVar9;
  
  puVar2 = (undefined4 *)(param_1 + 0x10);
  do {
    ExclusiveAccess(puVar2);
    bVar6 = (bool)hasExclusiveAccess(puVar2);
  } while (!bVar6);
  *puVar2 = 3;
  DataMemoryBarrier(0x1f);
  iVar9 = param_1;
  if (param_5 == 1) {
    uVar7 = VectorAdd(CONCAT44(param_4,param_3),*(undefined8 *)(param_1 + 0x70),8);
    param_4 = (uint)((ulonglong)uVar7 >> 0x20);
    uVar5 = (uint)uVar7;
LAB_0001769e:
    if (-1 < (int)param_4) {
LAB_00017706:
      iVar3 = *(int *)(param_1 + 0x2c);
      bVar6 = uVar5 <= *(uint *)(param_1 + 0x28);
      if ((int)((iVar3 - param_4) - (uint)!bVar6) < 0 !=
          (iVar3 < 0 == -1 < (int)param_4 && (int)(iVar3 + ~param_4 + (uint)bVar6) < 0 != iVar3 < 0)
         ) {
        if (*(int *)(param_1 + 0x54) == 0) goto LAB_000176fe;
        puVar2 = (undefined4 *)(param_1 + 0x10);
        do {
          ExclusiveAccess(puVar2);
          bVar6 = (bool)hasExclusiveAccess(puVar2);
        } while (!bVar6);
        *puVar2 = 0;
        DataMemoryBarrier(0x1f);
        goto LAB_000176dc;
      }
      lVar8 = VectorAdd(*(undefined8 *)(param_1 + 0x70),0xfffffffffff00001,8);
      uVar4 = (uint)((ulonglong)lVar8 >> 0x20);
      bVar6 = (uint)lVar8 <= uVar5;
      if ((int)((param_4 - uVar4) - (uint)!bVar6) < 0 !=
          ((int)param_4 < 0 == -1 < lVar8 &&
          (int)(param_4 + ~uVar4 + (uint)bVar6) < 0 != (int)param_4 < 0)) {
        iVar9 = 0x5a2;
        __android_log_print(5,"awplayer",
                                                        
                            "<%s:%u>: maybe the buffer is override by the new data, so we can not support to seek to this position"
                            ,"__RtmpSeek",0x5a2,param_2,param_3);
      }
      pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0x60));
      uVar4 = *(int *)(param_1 + 0x3c) + (uVar5 - *(int *)(param_1 + 0x70));
      *(uint *)(param_1 + 0x3c) = uVar4;
      *(uint *)(param_1 + 0x5c) = (*(int *)(param_1 + 0x70) + *(int *)(param_1 + 0x5c)) - uVar5;
      if (*(uint *)(param_1 + 0x44) < uVar4) {
        iVar3 = -*(int *)(param_1 + 0x78);
LAB_00017776:
        *(uint *)(param_1 + 0x3c) = uVar4 + iVar3;
      }
      else {
        if (uVar4 < *(uint *)(param_1 + 0x4c)) {
          iVar3 = *(int *)(param_1 + 0x78);
          goto LAB_00017776;
        }
      }
      *(uint *)(param_1 + 0x70) = uVar5;
      *(uint *)(param_1 + 0x74) = param_4;
      pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0x60));
      puVar2 = (undefined4 *)(param_1 + 0x10);
      uVar1 = 0;
      do {
        ExclusiveAccess(puVar2);
        bVar6 = (bool)hasExclusiveAccess(puVar2);
      } while (!bVar6);
      *puVar2 = 0;
      DataMemoryBarrier(0x1f);
      goto LAB_00017798;
    }
    puVar2 = (undefined4 *)(param_1 + 0x10);
    iVar9 = 0x580;
    __android_log_print(5,"awplayer","<%s:%u>: we can not seek to this position","__RtmpSeek",0x580,
                        param_2,param_3);
    do {
      ExclusiveAccess(puVar2);
      bVar6 = (bool)hasExclusiveAccess(puVar2);
    } while (!bVar6);
    *puVar2 = 0;
    DataMemoryBarrier(0x1f);
  }
  else {
    if (param_5 != 2) {
      uVar5 = param_3;
      if (param_5 == 0) goto LAB_0001769e;
      uVar5 = 0;
      param_4 = 0;
      goto LAB_00017706;
    }
    do {
      ExclusiveAccess(puVar2);
      bVar6 = (bool)hasExclusiveAccess(puVar2);
    } while (!bVar6);
    *puVar2 = 0;
    DataMemoryBarrier(0x1f);
  }
LAB_000176dc:
  uVar1 = 0xffffffff;
LAB_00017798:
  return CONCAT44(iVar9,uVar1);
LAB_000176fe:
  usleep(1000);
  goto LAB_00017706;
}



uint __RtmpRead(int param_1,void *param_2,uint param_3)

{
  bool bVar1;
  void *__src;
  size_t __n;
  undefined4 *puVar2;
  uint uVar3;
  uint uVar4;
  size_t __n_00;
  
  puVar2 = (undefined4 *)(param_1 + 0x10);
  do {
    ExclusiveAccess(puVar2);
    bVar1 = (bool)hasExclusiveAccess(puVar2);
  } while (!bVar1);
  *puVar2 = 2;
  DataMemoryBarrier(0x1f);
  do {
    uVar3 = *(uint *)(param_1 + 0x5c);
    if ((int)param_3 <= (int)uVar3) {
LAB_00017840:
      __src = *(void **)(param_1 + 0x3c);
      __n_00 = (*(int *)(param_1 + 0x44) - (int)__src) + 1;
      __n = param_3;
      if ((int)__n_00 < (int)param_3) {
        memcpy(param_2,__src,__n_00);
        __src = *(void **)(param_1 + 0x4c);
        param_2 = (void *)((int)param_2 + __n_00);
        __n = param_3 - __n_00;
      }
      memcpy(param_2,__src,__n);
      uVar4 = *(int *)(param_1 + 0x3c) + param_3;
      *(uint *)(param_1 + 0x3c) = uVar4;
      uVar3 = uVar4;
      if (*(uint *)(param_1 + 0x44) < uVar4) {
        uVar3 = uVar4 - *(int *)(param_1 + 0x78);
      }
      if (*(uint *)(param_1 + 0x44) < uVar4) {
        *(uint *)(param_1 + 0x3c) = uVar3;
      }
      *(undefined4 *)(param_1 + 0x48) = *(undefined4 *)(param_1 + 0x3c);
      pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0x60));
      uVar3 = *(uint *)(param_1 + 0x70);
      *(uint *)(param_1 + 0x70) = uVar3 + param_3;
      *(uint *)(param_1 + 0x74) =
           *(int *)(param_1 + 0x74) + ((int)param_3 >> 0x1f) + (uint)CARRY4(uVar3,param_3);
      *(uint *)(param_1 + 0x5c) = *(int *)(param_1 + 0x5c) - param_3;
      pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0x60));
      puVar2 = (undefined4 *)(param_1 + 0x10);
      do {
        ExclusiveAccess(puVar2);
        bVar1 = (bool)hasExclusiveAccess(puVar2);
      } while (!bVar1);
      *puVar2 = 0;
      DataMemoryBarrier(0x1f);
      return param_3;
    }
    if (*(int *)(param_1 + 0x54) == 1) {
      puVar2 = (undefined4 *)(param_1 + 0x10);
      do {
        ExclusiveAccess(puVar2);
        bVar1 = (bool)hasExclusiveAccess(puVar2);
      } while (!bVar1);
      *puVar2 = 0;
      DataMemoryBarrier(0x1f);
      return 0xffffffff;
    }
    if (*(int *)(param_1 + 0x30) == 1) {
      if ((int)uVar3 <= (int)param_3) {
        param_3 = uVar3;
      }
      goto LAB_00017840;
    }
    if (*(int *)(param_1 + 0x58) != 0) {
      puVar2 = (undefined4 *)(param_1 + 0x10);
      do {
        ExclusiveAccess(puVar2);
        bVar1 = (bool)hasExclusiveAccess(puVar2);
      } while (!bVar1);
      *puVar2 = 0;
      DataMemoryBarrier(0x1f);
      return 0xffffffff;
    }
    usleep(4000);
  } while( true );
}



undefined8 __RtmpSeekToTime(int param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4)

{
  int iVar1;
  undefined8 uVar2;
  undefined4 uVar3;
  
  if (*(int *)(param_1 + 0x38) == 0) {
    uVar2 = VectorSub(CONCAT44(param_4,param_3),*(undefined8 *)(param_1 + 0x68),8);
    uVar3 = param_3;
    iVar1 = aw_send_seek(param_1,param_2,(int)uVar2,(int)((ulonglong)uVar2 >> 0x20));
    if (iVar1 != 0) goto LAB_000178fa;
    param_1 = 0x5c5;
    __android_log_print(6,"awplayer",&DAT_0001f25f,"__RtmpSeekToTime",0x5c5,param_2,uVar3);
  }
  param_3 = 0xffffffff;
LAB_000178fa:
  return CONCAT44(param_1,param_3);
}



void aw_rtmp_parse_playpath(char **param_1,char **param_2)

{
  char *pcVar1;
  uint uVar2;
  uint uVar3;
  uint uVar4;
  char *pcVar5;
  uint uVar6;
  char *pcVar7;
  char *__s;
  char *__src;
  char *__s1;
  
  *param_2 = (char *)0x0;
  param_2[1] = (char *)0x0;
  pcVar5 = *param_1;
  pcVar7 = param_1[1];
  __s = pcVar5;
  if ((*pcVar5 == '?') && (pcVar1 = strstr(pcVar5,"slist="), pcVar1 != (char *)0x0)) {
    __s = pcVar1 + 6;
    pcVar7 = (char *)strlen(__s);
    pcVar1 = strchr(__s,0x26);
    if (pcVar1 != (char *)0x0) {
      pcVar7 = pcVar1 + -(int)__s;
    }
  }
  pcVar1 = strchr(__s,0x3f);
  if ((int)pcVar7 < 4) {
    __s1 = (char *)0x0;
    uVar6 = 0;
    uVar2 = 0;
    uVar4 = 0;
  }
  else {
    __s1 = pcVar1 + -4;
    if (pcVar1 == (char *)0x0) {
      __s1 = __s + (int)(pcVar7 + -4);
    }
    uVar2 = strncmp(__s1,".f4v",4);
    if ((uVar2 == 0) || (uVar2 = strncmp(__s1,".mp4",4), uVar2 == 0)) {
      uVar6 = 1;
      uVar4 = uVar6;
    }
    else {
      if (__s == pcVar5) {
        uVar6 = 1;
        uVar2 = strncmp(__s1,".flv",4);
        uVar4 = uVar2;
        if (uVar2 == 0) goto LAB_000179c4;
      }
      uVar6 = 0;
      uVar3 = strncmp(__s1,".mp3",4);
      uVar2 = 0;
      uVar4 = uVar6;
      if (uVar3 == 0) {
        uVar6 = 1;
        uVar2 = 1;
        uVar4 = uVar3;
      }
    }
  }
LAB_000179c4:
  pcVar5 = (char *)malloc((size_t)(pcVar7 + 5));
  if (pcVar5 == (char *)0x0) {
    return;
  }
  pcVar1 = pcVar5;
  if (uVar4 == 0) {
    uVar3 = uVar6;
    if (uVar2 == 0) goto LAB_00017a5e;
    __src = "mp3:";
    uVar2 = strncmp(__s,"mp3:",4);
    uVar3 = uVar4;
  }
  else {
    __src = "mp4:";
    uVar3 = strncmp(__s,"mp4:",4);
    uVar2 = uVar3;
  }
  if (uVar2 != 0) {
    strcpy(pcVar5,__src);
    pcVar1 = pcVar5 + 4;
    uVar3 = uVar6;
  }
LAB_00017a5e:
  while (0 < (int)pcVar7) {
    if (__s == __s1) {
      uVar4 = uVar3 & 1;
    }
    else {
      uVar4 = 0;
    }
    if (uVar4 == 0) {
      if (*__s == '%') {
        sscanf(__s + 1,"%02x");
        pcVar7 = pcVar7 + -3;
        *pcVar1 = (char)param_2;
        __s = __s + 3;
        pcVar1 = pcVar1 + 1;
      }
      else {
        pcVar7 = pcVar7 + -1;
        *pcVar1 = *__s;
        __s = __s + 1;
        pcVar1 = pcVar1 + 1;
      }
    }
    else {
      pcVar7 = pcVar7 + -4;
      __s = __s + 4;
    }
  }
  *pcVar1 = '\0';
  *param_2 = pcVar5;
  param_2[1] = pcVar1 + -(int)pcVar5;
  return;
}



undefined4
aw_rtmp_parseUrl(char *param_1,undefined4 *param_2,char **param_3,uint *param_4,char **param_5,
                char **param_6)

{
  char **ppcVar1;
  char *pcVar2;
  int iVar3;
  size_t sVar4;
  char *pcVar5;
  char **ppcVar6;
  uint uVar7;
  char *pcVar8;
  undefined4 uVar9;
  char **ppcVar10;
  char *__s;
  char *pcVar11;
  char *pcVar12;
  char *local_30;
  char *local_2c;
  
  *param_2 = 0;
  *param_4 = 0;
  param_5[1] = (char *)0x0;
  *param_5 = (char *)0x0;
  param_6[1] = (char *)0x0;
  *param_6 = (char *)0x0;
  pcVar2 = strstr(param_1,"://");
  if (pcVar2 == (char *)0x0) {
    return 0;
  }
  pcVar12 = pcVar2 + -(int)param_1;
  if (pcVar12 == (char *)0x4) {
    iVar3 = strncasecmp(param_1,(char *)&DAT_0001f2af,4);
    if (iVar3 == 0) {
      *param_2 = 0;
    }
  }
  else {
    if (pcVar12 == (char *)0x5) {
      iVar3 = strncasecmp(param_1,(char *)((int)&DAT_0001f2b3 + 1),5);
      uVar9 = 1;
      if (iVar3 != 0) {
        iVar3 = strncasecmp(param_1,"rtmps",5);
        uVar9 = 4;
        if (iVar3 != 0) {
          iVar3 = strncasecmp(param_1,"rtmpe",5);
          uVar9 = 2;
          if (iVar3 != 0) {
            iVar3 = strncasecmp(param_1,"rtmfp",5);
            uVar9 = 8;
            if (iVar3 != 0) goto LAB_00017b54;
          }
        }
      }
    }
    else {
      if (pcVar12 != (char *)0x6) goto LAB_00017b54;
      iVar3 = strncasecmp(param_1,"rtmpte",6);
      uVar9 = 3;
      if (iVar3 != 0) {
        iVar3 = strncasecmp(param_1,"rtmpts",6);
        if (iVar3 != 0) goto LAB_00017b54;
        uVar9 = 5;
      }
    }
    *param_2 = uVar9;
  }
LAB_00017b54:
  if (pcVar2[3] == '\0') {
    return 0;
  }
  pcVar2 = pcVar2 + 3;
  sVar4 = strlen(pcVar2);
  local_2c = pcVar2 + sVar4;
  pcVar12 = strchr(pcVar2,0x3a);
  pcVar5 = strchr(pcVar2,0x3f);
  ppcVar6 = (char **)strchr(pcVar2,0x2f);
  ppcVar10 = (char **)((int)ppcVar6 - (int)pcVar2);
  if (ppcVar6 == (char **)0x0) {
    ppcVar10 = (char **)(local_2c + -(int)pcVar2);
  }
  if ((pcVar12 != (char *)0x0) && ((int)(pcVar12 + -(int)pcVar2) <= (int)ppcVar10)) {
    ppcVar10 = (char **)(pcVar12 + -(int)pcVar2);
  }
  ppcVar1 = ppcVar6;
  if ((int)ppcVar10 < 0x100) {
    *param_3 = pcVar2;
    ppcVar1 = param_3;
  }
  if ((int)ppcVar10 < 0x100) {
    ppcVar1[1] = (char *)ppcVar10;
  }
  if ((pcVar2[(int)ppcVar10] == ':') &&
     (uVar7 = atoi((char *)((int)pcVar2 + (int)ppcVar10 + 1)), uVar7 < 0x10000)) {
    *param_4 = uVar7;
  }
  if (ppcVar6 == (char **)0x0) {
    return 0;
  }
  __s = (char *)((int)ppcVar6 + 1);
  pcVar12 = strchr(__s,0x2f);
  pcVar2 = pcVar12;
  if (pcVar12 != (char *)0x0) {
    pcVar2 = strchr(pcVar12 + 1,0x2f);
  }
  pcVar11 = local_2c + -(int)__s;
  if (pcVar5 != (char *)0x0) {
    pcVar8 = strstr(__s,"slist=");
    pcVar5 = pcVar5 + -(int)__s;
    if (pcVar8 != (char *)0x0) goto LAB_00017c1a;
  }
  iVar3 = strncmp(__s,"ondemand/",9);
  if (iVar3 == 0) {
    pcVar11 = (char *)0x8;
    pcVar5 = pcVar11;
  }
  else {
    if (pcVar2 == (char *)0x0) {
      pcVar5 = pcVar11;
      if (pcVar12 != (char *)0x0) {
        pcVar11 = pcVar12 + -(int)__s;
        pcVar5 = pcVar11;
      }
    }
    else {
      pcVar11 = pcVar2 + -(int)__s;
      pcVar5 = pcVar11;
    }
  }
LAB_00017c1a:
  *param_6 = __s;
  param_6[1] = pcVar11;
  local_30 = __s + (int)pcVar5;
  if (__s[(int)pcVar5] == '/') {
    local_30 = local_30 + 1;
  }
  if (local_2c != local_30) {
    local_2c = local_2c + -(int)local_30;
    aw_rtmp_parse_playpath(&local_30,param_5);
  }
  return 1;
}



void aw_amf_add_prop(uint *param_1,void *param_2)

{
  void *pvVar1;
  uint uVar2;
  
  if ((*param_1 & 0xf) == 0) {
    pvVar1 = realloc((void *)param_1[1],(*param_1 + 0x10) * 0x18);
    param_1[1] = (uint)pvVar1;
  }
  uVar2 = *param_1;
  *param_1 = uVar2 + 1;
  memcpy((void *)(uVar2 * 0x18 + param_1[1]),param_2,0x18);
  return;
}



int aw_rtmp_setOpt(int param_1,char **param_2,byte **param_3)

{
  byte bVar1;
  int iVar2;
  long lVar3;
  int iVar4;
  byte *__nptr;
  char *pcVar5;
  uint *puVar6;
  undefined4 extraout_r1;
  int iVar7;
  byte *pbVar8;
  int iVar9;
  uint uVar10;
  byte *local_38;
  char *local_34;
  int local_30;
  byte *local_2c;
  byte *local_28;
  
  iVar9 = 0;
  iVar7 = 0;
  while (*(char **)((int)&DAT_00022bb8 + iVar9) != (char *)0x0) {
    if ((param_2[1] == *(char **)((int)&DAT_00022bb8 + iVar9)) &&
       (iVar2 = strcasecmp(*param_2,*(char **)((int)&PTR_s_socks_00022bb4 + iVar9)), iVar2 == 0)) {
      iVar9 = (&DAT_00022bbc)[iVar7 * 6];
      switch((&DAT_00022bc0)[iVar7 * 6]) {
      case 0:
        pbVar8 = param_3[1];
        *(byte **)(param_1 + iVar9) = *param_3;
        ((byte **)(param_1 + iVar9))[1] = pbVar8;
        goto switchD_00017cf0_caseD_4;
      case 1:
        lVar3 = strtol((char *)*param_3,(char **)0x0,0);
        *(long *)(param_1 + iVar9) = lVar3;
        goto switchD_00017cf0_caseD_4;
      case 2:
        iVar2 = 0;
        uVar10 = *(uint *)(param_1 + iVar9);
        goto LAB_00017d4a;
      case 3:
        goto switchD_00017cf0_caseD_3;
      default:
        goto switchD_00017cf0_caseD_4;
      }
    }
    iVar7 = iVar7 + 1;
    iVar9 = iVar9 + 0x18;
  }
switchD_00017cf0_caseD_4:
  iVar7 = (&DAT_00022bb8)[iVar7 * 6];
  if (iVar7 != 0) {
    iVar7 = 1;
  }
  return iVar7;
switchD_00017cf0_caseD_3:
  memset(&local_38,0,0x18);
  pbVar8 = *param_3;
  if (pbVar8[1] == 0x3a) {
    bVar1 = *pbVar8;
    __nptr = pbVar8 + 2;
    if (bVar1 == 0x4f) {
      iVar9 = atoi((char *)__nptr);
      if (iVar9 == 0) {
        *(int *)(param_1 + 0xc4abc) = *(int *)(param_1 + 0xc4abc) + -1;
        goto switchD_00017cf0_caseD_4;
      }
LAB_00017e2e:
      local_30 = 3;
    }
    else {
      if (bVar1 < 0x50) {
        if (bVar1 == 0x42) goto LAB_00017dfa;
        if (bVar1 != 0x4e) {
          return 0;
        }
        goto LAB_00017e1a;
      }
      if (bVar1 == 0x53) {
        local_28 = param_3[1] + -2;
        local_30 = 2;
        local_2c = __nptr;
      }
      else {
        if (bVar1 != 0x5a) {
          return 0;
        }
        local_30 = 5;
      }
    }
  }
  else {
    if ((pbVar8[2] != 0x3a) || (*pbVar8 != 0x4e)) {
      return 0;
    }
    local_38 = pbVar8 + 3;
    pcVar5 = strchr((char *)local_38,0x3a);
    if (pcVar5 == (char *)0x0) {
      return 0;
    }
    if (*(int *)(param_1 + 0xc4abc) == 0) {
      return 0;
    }
    local_34 = pcVar5 + -(int)local_38;
    __nptr = (byte *)(pcVar5 + 1);
    bVar1 = pbVar8[1];
    if (bVar1 == 0x4e) {
LAB_00017e1a:
      strtod((char *)__nptr,(char **)0x0);
      local_2c = SUB84(ROUND((double)CONCAT44(extraout_r1,__nptr)),0);
    }
    else {
      if (bVar1 < 0x4f) {
        if (bVar1 != 0x42) {
          return 0;
        }
LAB_00017dfa:
        local_30 = 1;
        local_2c = (byte *)atoi((char *)__nptr);
      }
      else {
        if (bVar1 == 0x4f) goto LAB_00017e2e;
        if (bVar1 != 0x53) {
          return 0;
        }
        local_28 = param_3[1] + (int)(pbVar8 + -(int)__nptr);
        local_30 = 2;
        local_2c = __nptr;
      }
    }
  }
  iVar9 = 0;
  puVar6 = (uint *)(param_1 + 0xc4ab4);
  if (*(int *)(param_1 + 0xc4abc) != 0) {
    while (iVar9 < *(int *)(param_1 + 0xc4abc)) {
      iVar9 = iVar9 + 1;
      puVar6 = (uint *)((*puVar6 - 1) * 0x18 + puVar6[1] + 0xc);
    }
  }
  aw_amf_add_prop(puVar6,&local_38);
  if (local_30 == 3) {
    *(int *)(param_1 + 0xc4abc) = *(int *)(param_1 + 0xc4abc) + 1;
  }
  goto switchD_00017cf0_caseD_4;
LAB_00017d4a:
  if (*(byte **)((int)&DAT_00022b90 + iVar2) == (byte *)0x0) goto LAB_00017d56;
  if ((param_3[1] == *(byte **)((int)&DAT_00022b90 + iVar2)) &&
     (iVar4 = strcasecmp((char *)*param_3,*(char **)((int)&PTR_DAT_00022b8c + iVar2)), iVar4 == 0))
  {
    uVar10 = uVar10 | (&DAT_00022bc4)[iVar7 * 6];
    goto LAB_00017d56;
  }
  iVar2 = iVar2 + 8;
  goto LAB_00017d4a;
LAB_00017d56:
  *(uint *)(param_1 + iVar9) = uVar10;
  goto switchD_00017cf0_caseD_4;
}



// WARNING: Type propagation algorithm not settling
// WARNING: Could not reconcile some variable overlaps

int aw_rtmp_setupUrl2(char **param_1,int param_2)

{
  char *pcVar1;
  size_t sVar2;
  int iVar3;
  byte *__s;
  char *pcVar4;
  undefined2 uVar5;
  byte *__s_00;
  char *pcVar6;
  bool bVar7;
  char *local_40;
  undefined4 local_3c;
  char *local_38;
  char *local_34;
  byte *local_30;
  char *local_2c;
  
  local_40 = (char *)0x0;
  pcVar1 = strstr(*param_1,"live");
  if (pcVar1 != (char *)0x0) {
    *(undefined4 *)(param_2 + 0x38) = 1;
    *(uint *)(param_2 + 0xc4ac8) = *(uint *)(param_2 + 0xc4ac8) | 2;
  }
  pcVar1 = strchr(*param_1,0x20);
  if (pcVar1 != (char *)0x0) {
    *pcVar1 = '\0';
  }
  pcVar6 = *param_1;
  sVar2 = strlen(pcVar6);
  iVar3 = aw_rtmp_parseUrl(pcVar6,(undefined4 *)(param_2 + 0xc4ad0),(char **)(param_2 + 0xc4a4c),
                           (uint *)&local_40,(char **)(param_2 + 0xc4a5c),
                           (char **)(param_2 + 0xc4a84));
  if (iVar3 == 0) {
    return 0;
  }
  *(undefined2 *)(param_2 + 0xc4ada) = local_40._0_2_;
  *(char **)(param_2 + 0xc4a64) = *(char **)(param_2 + 0xc4a5c);
  *(undefined4 *)(param_2 + 0xc4a68) = *(undefined4 *)(param_2 + 0xc4a60);
  while (pcVar1 != (char *)0x0) {
    pcVar4 = pcVar1 + 1;
    *pcVar1 = '\0';
    pcVar6 = strchr(pcVar4,0x3d);
    if (pcVar6 == (char *)0x0) break;
    local_34 = pcVar6 + -(int)pcVar4;
    __s_00 = (byte *)(pcVar6 + 1);
    *pcVar6 = '\0';
    local_38 = pcVar4;
    local_30 = __s_00;
    pcVar1 = strchr((char *)__s_00,0x20);
    if (pcVar1 == (char *)0x0) {
      local_2c = (char *)strlen((char *)__s_00);
    }
    else {
      *pcVar1 = '\0';
      local_2c = pcVar1 + -(int)__s_00;
      while (pcVar1[1] == ' ') {
        *pcVar1 = '\0';
        pcVar1 = pcVar1 + 1;
      }
    }
    pcVar6 = pcVar6 + 2;
    local_40 = local_2c;
    while (local_40 != (char *)0x0) {
      if (*__s_00 == 0x5c) {
        if (local_40 < (char *)0x3) {
          return -1;
        }
        __s = __s_00 + 1;
        __s_00 = __s_00 + 3;
        sscanf((char *)__s,"%02x",&local_3c);
        pcVar6[-1] = (char)local_3c;
        local_40 = local_40 + -3;
      }
      else {
        pcVar6[-1] = *__s_00;
        __s_00 = __s_00 + 1;
        local_40 = local_40 + -1;
      }
      pcVar6 = pcVar6 + 1;
    }
    local_2c = pcVar6 + (-1 - (int)local_30);
    iVar3 = aw_rtmp_setOpt(param_2,&local_38,&local_30);
    if (iVar3 == 0) {
      return 0;
    }
  }
  if (*(int *)(param_2 + 0xc4a70) == 0) {
    *(char **)(param_2 + 0xc4a6c) = *param_1;
    pcVar1 = *(char **)(param_2 + 0xc4a88);
    if (pcVar1 == (char *)0x0) {
      sVar2 = strlen(*param_1);
      *(size_t *)(param_2 + 0xc4a70) = sVar2;
    }
    else {
      pcVar6 = *(char **)(param_2 + 0xc4a84);
      bVar7 = pcVar6 < *param_1 + sVar2;
      if (bVar7) {
        pcVar6 = pcVar6 + -(int)*param_1;
        pcVar1 = pcVar6 + (int)pcVar1;
      }
      if (bVar7) {
        *(char **)(param_2 + 0xc4a70) = pcVar1;
      }
      else {
        iVar3 = *(int *)(param_2 + 0xc4a50);
        pcVar4 = (char *)malloc((size_t)(pcVar1 + iVar3 + 0x11));
        *(char **)(param_2 + 0xc4a6c) = pcVar4;
        iVar3 = snprintf(pcVar4,(size_t)(pcVar1 + iVar3 + 0x11),"%s://%.*s:%d/%.*s",
                         &RTMPProtocolStringsLower + *(int *)(param_2 + 0xc4ad0) * 7,iVar3,
                         *(undefined4 *)(param_2 + 0xc4a4c),(uint)*(ushort *)(param_2 + 0xc4ada),
                         pcVar1,pcVar6);
        *(int *)(param_2 + 0xc4a70) = iVar3;
        *(uint *)(param_2 + 0xc4ac8) = *(uint *)(param_2 + 0xc4ac8) | 0x20;
      }
    }
  }
  if (*(short *)(param_2 + 0xc4ada) == 0) {
    iVar3 = *(int *)(param_2 + 0xc4ad0);
    bVar7 = iVar3 << 0x1d < 0;
    if (bVar7) {
      iVar3 = 0x1bb;
    }
    uVar5 = (undefined2)iVar3;
    if (!bVar7) {
      if (iVar3 << 0x1f < 0) {
        *(undefined2 *)(param_2 + 0xc4ada) = 0x50;
        return 1;
      }
      uVar5 = 0x78f;
    }
    *(undefined2 *)(param_2 + 0xc4ada) = uVar5;
  }
  return 1;
}



int aw_rtmp_get_next_media_packet(int param_1,void **param_2)

{
  int iVar1;
  void *pvVar2;
  
LAB_00018130:
  do {
    while( true ) {
      do {
        iVar1 = aw_rtmp_is_connected(param_1);
        if ((iVar1 == 0) || (pvVar2 = aw_rtmp_read_packet(param_1,param_2), pvVar2 == (void *)0x0))
        {
          if (*(int *)(param_1 + 0xc4a44) == 0) {
            return 0;
          }
          if (*(int *)(param_1 + 0x6b4) != 0) {
            return 0;
          }
          *(undefined4 *)(param_1 + 0x6b0) =
               *(undefined4 *)
                (param_1 +
                (int)("<%s:%u>: ******asfHttpCtrl->packetSize:%d chunkSize:%d > 32*1024." +
                     *(int *)(param_1 + 0x6a8)) * 4);
          return 0;
        }
      } while (param_2[5] != param_2[4]);
      iVar1 = aw_rtmp_client_packet(param_1,param_2,(uint)param_2[5]);
      if (iVar1 != 0) break;
      aw_rtmp_packet_free((int)param_2);
    }
    if (*(int *)(param_1 + 0x6b4) == 3) {
      if (param_2[3] <= *(void **)(param_1 + 0x6ac)) goto LAB_00018130;
      *(undefined4 *)(param_1 + 0x6b4) = 0;
    }
    if (iVar1 != 0) {
      *(undefined *)(param_1 + 0x6c1) = 1;
      return iVar1;
    }
  } while( true );
}



uint aw_rtmp_read_one_packet(int param_1,char *param_2,uint param_3)

{
  bool bVar1;
  byte bVar2;
  int iVar3;
  undefined *puVar4;
  char *__dest;
  uint uVar5;
  void *__src;
  char *pcVar6;
  size_t __n;
  byte *pbVar7;
  uint uVar8;
  uint uVar9;
  uint uVar10;
  uint uVar11;
  byte bVar12;
  int iVar13;
  uint local_58;
  void *apvStack72 [2];
  char local_3f;
  uint local_3c;
  uint local_38;
  void *local_2c;
  
  pbVar7 = (byte *)(param_1 + 0xc0a10);
  do {
    memset(apvStack72,0,0x20);
    iVar3 = aw_rtmp_get_next_media_packet(param_1,apvStack72);
    if (iVar3 < 1) {
      if (iVar3 == 0) {
        return 0;
      }
      bVar1 = false;
      uVar10 = 0;
      goto LAB_000183de;
    }
    if (*(int *)(param_1 + 0x54) == 1) {
      return 0xffffffff;
    }
    if (iVar3 == 2) {
      return 0xffffffff;
    }
    if (local_3f == '\b') {
      bVar2 = 4;
    }
    else {
      bVar2 = 0;
    }
    *pbVar7 = local_3f == '\t' | *pbVar7 | bVar2;
  } while ((local_38 < 6 && local_3f == '\t') || (bVar1 = local_38 < 2 && local_3f == '\b', bVar1));
  uVar9 = (uint)(local_3f == '\x12');
  if (local_3f == '\x16') {
    iVar3 = 0;
  }
  else {
    iVar3 = 4;
  }
  if ((byte)(local_3f - 8U) < 2) {
    uVar9 = 1;
  }
  if (uVar9 == 0) {
    iVar13 = 0;
  }
  else {
    iVar13 = 0xb;
  }
  uVar10 = iVar13 + local_38 + iVar3;
  uVar11 = uVar10 + 4;
  __dest = param_2;
  if (param_3 < uVar11) {
    __dest = *(char **)(param_1 + 0x50);
  }
  bVar1 = param_3 < uVar11 || bVar1;
  pcVar6 = __dest + uVar11;
  uVar11 = uVar9;
  if (uVar9 != 0) {
    uVar11 = local_38 + 0xb;
    *(undefined4 *)(param_1 + 0x6c) = 0;
    uVar9 = local_3c + *(int *)(param_1 + 0xc0a14);
    *(uint *)(param_1 + 0x68) = uVar9;
    *__dest = local_3f;
    puVar4 = aw_amf_encode_int24(__dest + 1,pcVar6,local_38);
    puVar4 = aw_amf_encode_int24(puVar4,pcVar6,uVar9);
    *puVar4 = (char)(uVar9 >> 0x18);
    __dest = aw_amf_encode_int24(puVar4 + 1,pcVar6,0);
  }
  memcpy(__dest,local_2c,local_38);
  local_58 = local_38;
  if (local_3f == '\x16') {
    uVar9 = aw_amf_decode_int24((byte *)((int)local_2c + 4));
    uVar9 = uVar9 | (uint)*(byte *)((int)local_2c + 7) << 0x18;
    iVar13 = 0;
    iVar3 = (*(int *)(param_1 + 0xc0a14) + local_3c) - uVar9;
    while (iVar13 + 0xbU < local_38) {
      if (*(int *)(param_1 + 0x54) == 1) {
        return 0xffffffff;
      }
      uVar5 = aw_amf_decode_int24((byte *)((int)local_2c + iVar13 + 1));
      uVar9 = aw_amf_decode_int24((byte *)((int)local_2c + iVar13 + 4));
      uVar9 = uVar9 | (uint)*(byte *)((int)local_2c + iVar13 + 7) << 0x18;
      if (iVar3 != 0) {
        uVar9 = uVar9 + iVar3;
        aw_amf_encode_int24(__dest + iVar13 + 4,pcVar6,uVar9);
        __dest[iVar13 + 7] = (char)(uVar9 >> 0x18);
      }
      bVar2 = *pbVar7;
      if (*(char *)((int)local_2c + iVar13) == '\b') {
        bVar12 = 4;
      }
      else {
        bVar12 = 0;
      }
      if (*(char *)((int)local_2c + iVar13) == '\t') {
        bVar2 = bVar2 | 1;
      }
      *pbVar7 = bVar2 | bVar12;
      uVar8 = uVar5 + iVar13 + 0xb;
      if (local_38 < uVar5 + iVar13 + 0xf) {
        if (local_38 < uVar8) {
          return 0xffffffff;
        }
        uVar10 = uVar10 + 4;
        aw_amf_encode_int32(__dest + uVar8,pcVar6,uVar5 + 0xb);
        local_58 = local_58 + 4;
        uVar11 = uVar5 + 0xb;
      }
      else {
        uVar11 = aw_amf_decode_int32((byte *)((int)local_2c + uVar8));
        uVar5 = uVar5 + 0xb;
        if (uVar11 != uVar5) {
          aw_amf_encode_int32(__dest + uVar8,pcVar6,uVar5);
          uVar11 = uVar5;
        }
      }
      iVar13 = iVar13 + uVar11 + 4;
    }
  }
  if (local_3f != '\x16') {
    aw_amf_encode_int32(__dest + local_58,pcVar6,uVar11);
  }
  if (*(int *)(param_1 + 0xc4ac8) << 0x1e < 0) {
    uVar9 = local_3c;
  }
  *(uint *)(param_1 + 0xc0a0c) = uVar9;
LAB_000183de:
  aw_rtmp_packet_free((int)apvStack72);
  if (bVar1) {
    __src = *(void **)(param_1 + 0x50);
    __n = uVar10;
    if (param_3 < uVar10) {
      memcpy(param_2,__src,param_3);
      param_2 = *(char **)(param_1 + 0x4c);
      __src = (void *)(*(int *)(param_1 + 0x50) + param_3);
      __n = uVar10 - param_3;
    }
    memcpy(param_2,__src,__n);
  }
  return uVar10;
}



uint aw_rtmp_stream_read(int param_1,char *param_2,uint param_3)

{
  uint uVar1;
  uint uVar2;
  uint uVar3;
  char *pcVar4;
  undefined auStack60 [16];
  int local_2c;
  
  local_2c = __stack_chk_guard;
  memcpy(auStack60,&DAT_00021409,0xd);
  if ((*(byte *)(param_1 + 0xc0a11) & 1) == 0) {
    pcVar4 = param_2 + 0xd;
    memcpy(param_2,auStack60,0xd);
    uVar3 = param_3 - 0xd;
    uVar2 = 0xd;
    do {
      if (*(int *)(param_1 + 0xc0a0c) != 0) {
LAB_000184a6:
        param_2[4] = *(char *)(param_1 + 0xc0a10);
        *(byte *)(param_1 + 0xc0a11) = *(byte *)(param_1 + 0xc0a11) | 1;
        goto LAB_000184d8;
      }
      uVar1 = aw_rtmp_read_one_packet(param_1,pcVar4,uVar3);
      if ((int)uVar1 < 1) break;
      pcVar4 = pcVar4 + uVar1;
      uVar3 = uVar3 - uVar1;
      uVar2 = uVar2 + uVar1;
      if (*(char *)(param_1 + 0xc0a10) == '\x05') goto LAB_000184a6;
    } while (*(int *)(param_1 + 0x54) != 1);
    uVar2 = 0xffffffff;
  }
  else {
    uVar2 = aw_rtmp_read_one_packet(param_1,param_2,param_3);
    if ((int)uVar2 < 1) {
      uVar2 = 0xffffffff;
    }
  }
LAB_000184d8:
  if (local_2c != __stack_chk_guard) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar2;
}



undefined4 aw_read_rtmp_stream2(int param_1)

{
  bool bVar1;
  uint uVar2;
  char *pcVar3;
  char *pcVar4;
  uint uVar5;
  uint uVar6;
  
  bVar1 = true;
  while (*(int *)(param_1 + 0x54) != 1) {
    if (*(int *)(param_1 + 0x78) - *(int *)(param_1 + 0x5c) < 0x300001) {
      usleep(4000);
    }
    else {
      pcVar3 = *(char **)(param_1 + 0x40);
      if (pcVar3 < *(char **)(param_1 + 0x48)) {
        pcVar4 = *(char **)(param_1 + 0x48) + -(int)pcVar3;
      }
      else {
        pcVar4 = (char *)((*(int *)(param_1 + 0x44) - (int)pcVar3) + 1);
      }
      uVar2 = aw_rtmp_stream_read(param_1,pcVar3,(uint)pcVar4);
      if ((int)uVar2 < 1) break;
      uVar5 = *(int *)(param_1 + 0x40) + uVar2;
      *(uint *)(param_1 + 0x40) = uVar5;
      uVar6 = uVar5;
      if (*(uint *)(param_1 + 0x44) < uVar5) {
        uVar6 = uVar5 - *(int *)(param_1 + 0x78);
      }
      if (*(uint *)(param_1 + 0x44) < uVar5) {
        *(uint *)(param_1 + 0x40) = uVar6;
      }
      pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0x60));
      *(uint *)(param_1 + 0x5c) = *(int *)(param_1 + 0x5c) + uVar2;
      uVar6 = *(uint *)(param_1 + 0x28);
      *(uint *)(param_1 + 0x28) = uVar6 + uVar2;
      *(uint *)(param_1 + 0x2c) =
           *(int *)(param_1 + 0x2c) + ((int)uVar2 >> 0x1f) + (uint)CARRY4(uVar6,uVar2);
      pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0x60));
      if ((bVar1) && (0x3ff < *(int *)(param_1 + 0x5c))) {
        bVar1 = false;
        memcpy(*(void **)(param_1 + 4),*(void **)(param_1 + 0x4c),0x400);
        pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0x14));
        *(undefined4 *)(param_1 + 0x34) = 0;
        pthread_cond_signal((pthread_cond_t *)(param_1 + 0x18));
        pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0x14));
      }
    }
  }
  pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0x14));
  *(undefined4 *)(param_1 + 0x34) = 2;
  pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0x14));
  *(undefined4 *)(param_1 + 0x30) = 1;
  return 0;
}



void RtmpClose(void *param_1)

{
  if (param_1 == (void *)0x0) {
    return;
  }
  *(undefined4 *)((int)param_1 + 0x54) = 1;
  while (*(int *)((int)param_1 + 0x30) == 0) {
    usleep(1000);
  }
  aw_rtmp_close((int)param_1);
  if (*(void **)((int)param_1 + 0x4c) != (void *)0x0) {
    free(*(void **)((int)param_1 + 0x4c));
    *(undefined4 *)((int)param_1 + 0x4c) = 0;
  }
  if (*(void **)((int)param_1 + 4) != (void *)0x0) {
    free(*(void **)((int)param_1 + 4));
    *(undefined4 *)((int)param_1 + 4) = 0;
  }
  if (*(void **)((int)param_1 + 0x50) != (void *)0x0) {
    free(*(void **)((int)param_1 + 0x50));
    *(undefined4 *)((int)param_1 + 0x50) = 0;
  }
  pthread_mutex_destroy((pthread_mutex_t *)((int)param_1 + 0x60));
  pthread_mutex_destroy((pthread_mutex_t *)((int)param_1 + 0x14));
  pthread_cond_destroy((pthread_cond_t *)((int)param_1 + 0x18));
  free(param_1);
  return;
}



undefined4 __RtmpClose(void *param_1)

{
  *(undefined4 *)((int)param_1 + 0x54) = 1;
  RtmpClose(param_1);
  return 0;
}



longlong __RtmpForceStop(int param_1,uint param_2)

{
  bool bVar1;
  int iVar2;
  uint uVar3;
  int *piVar4;
  uint *puVar5;
  
  piVar4 = (int *)(param_1 + 0x10);
  *(undefined4 *)(param_1 + 0x54) = 1;
  DataMemoryBarrier(0x1f);
  do {
    ExclusiveAccess(piVar4);
    iVar2 = *piVar4;
    bVar1 = (bool)hasExclusiveAccess(piVar4);
  } while (!bVar1);
  *piVar4 = iVar2;
  DataMemoryBarrier(0x1f);
  if (iVar2 != 4) {
    while( true ) {
      puVar5 = (uint *)(param_1 + 0x10);
      DataMemoryBarrier(0x1f);
      do {
        ExclusiveAccess(puVar5);
        uVar3 = *puVar5;
        bVar1 = (bool)hasExclusiveAccess(puVar5);
      } while (!bVar1);
      *puVar5 = uVar3;
      DataMemoryBarrier(0x1f);
      if (uVar3 == 0) break;
      usleep(10000);
    }
    do {
      ExclusiveAccess(puVar5);
      param_2 = *puVar5;
      bVar1 = (bool)hasExclusiveAccess(puVar5);
    } while (!bVar1);
    *puVar5 = 4;
    DataMemoryBarrier(0x1f);
  }
  return (longlong)((ulonglong)param_2 << 0x20);
}



undefined4 __RtmpClrForceStop(int param_1)

{
  bool bVar1;
  undefined4 *puVar2;
  
  *(undefined4 *)(param_1 + 0x54) = 0;
  puVar2 = (undefined4 *)(param_1 + 0x10);
  do {
    ExclusiveAccess(puVar2);
    bVar1 = (bool)hasExclusiveAccess(puVar2);
  } while (!bVar1);
  *puVar2 = 0;
  DataMemoryBarrier(0x1f);
  return 0;
}



undefined4 __RtmpControl(int param_1,int param_2,undefined4 *param_3)

{
  undefined4 uVar1;
  longlong lVar2;
  
  if (param_2 == 0x105) {
    lVar2 = __RtmpForceStop(param_1,0x105);
    return (int)lVar2;
  }
  if (param_2 == 0x106) {
    uVar1 = __RtmpClrForceStop(param_1);
    return uVar1;
  }
  if (param_2 != 0x104) {
    return 0;
  }
  if (param_1 != 0) {
    memset(param_3,0,0x10);
    *param_3 = *(undefined4 *)(param_1 + 0x78);
    param_3[1] = *(undefined4 *)(param_1 + 0x5c);
    return 0;
  }
  return 0xffffffff;
}



void aw_rtmp_init(undefined **param_1)

{
  undefined *__s;
  undefined **ppuVar1;
  
  ppuVar1 = param_1;
  if (param_1 == (undefined **)0x0) {
    ppuVar1 = (undefined **)&DAT_0001f2af;
    param_1 = (undefined **)
              __android_log_assert
                        ("!(rtmp)","awplayer","<%s:%d>CDX_CHECK(%s) failed.","aw_rtmp_init",0x638,
                         &DAT_0001f2af);
  }
  memset(param_1,0,0xc4ae0);
  __s = (undefined *)malloc(0x400);
  ppuVar1[2] = (undefined *)0x400;
  ppuVar1[1] = __s;
  memset(__s,0,0x400);
  *ppuVar1 = (undefined *)&PTR_LAB_0001754c_1_00023008;
  ppuVar1[0xc] = (undefined *)0x0;
  ppuVar1[0xe] = (undefined *)0x1;
  ppuVar1[0xd] = (undefined *)0x1;
  ppuVar1[0x3028e] = (undefined *)0xffffffff;
  ppuVar1[0x1a3] = (undefined *)0x80;
  ppuVar1[0x1a4] = (undefined *)0x80;
  ppuVar1[0x1a8] = (undefined *)0x7530;
  *(undefined *)(ppuVar1 + 0x1b0) = 2;
  ppuVar1[0x1af] = (undefined *)0x2625a0;
  ppuVar1[0x1ae] = (undefined *)0x2625a0;
  ppuVar1[0x30274] = (undefined *)0x0;
  ppuVar1[0x30275] = (undefined *)0x40a8ee00;
  ppuVar1[0x30276] = (undefined *)0x0;
  ppuVar1[0x30277] = (undefined *)0x406f8000;
  ppuVar1[0x312b5] = (undefined *)0x1e;
  ppuVar1[0x312b3] = (undefined *)0x1e;
  aw_set_rtmp_parameter((int)ppuVar1);
  return;
}



undefined8 aw_rtmp_streaming_start2(char **param_1,int param_2,uint param_3)

{
  undefined **__ptr;
  int iVar1;
  undefined *puVar2;
  undefined *puVar3;
  pthread_condattr_t *__cond_attr;
  pthread_condattr_t *extraout_r1;
  undefined **ppuVar4;
  undefined *__size;
  bool bVar5;
  char **ppcVar6;
  int iVar7;
  uint uVar8;
  
  ppcVar6 = param_1;
  iVar7 = param_2;
  uVar8 = param_3;
  __ptr = (undefined **)malloc(0xc4ae0);
  if (__ptr != (undefined **)0x0) {
    aw_rtmp_init(__ptr);
    iVar1 = aw_rtmp_setupUrl2(param_1,(int)__ptr);
    if (iVar1 != 0) {
      iVar1 = param_2 << 0x1f;
      bVar5 = iVar1 < 0;
      ppuVar4 = __ptr + 4;
      if (bVar5) {
        iVar1 = 0xc4ad0;
        param_3 = (uint)__ptr[0x312b4] | 0x10;
      }
      if (bVar5) {
        *(uint *)((int)__ptr + iVar1) = param_3;
      }
      __ptr[0x1e] = (undefined *)0xc00000;
      do {
        ExclusiveAccess(ppuVar4);
        bVar5 = (bool)hasExclusiveAccess(ppuVar4);
      } while (!bVar5);
      *ppuVar4 = (undefined *)0x0;
      DataMemoryBarrier(0x1f);
      __size = __ptr[0x1e];
      puVar2 = (undefined *)malloc((size_t)__size);
      __ptr[0x13] = puVar2;
      if (puVar2 != (undefined *)0x0) {
        puVar3 = (undefined *)malloc(0x20000);
        __ptr[0x14] = puVar3;
        if (puVar3 != (undefined *)0x0) {
          __ptr[0x10] = puVar2;
          __ptr[0x11] = puVar2 + (int)(__size + -1);
          __ptr[0xf] = puVar2;
          __ptr[0x12] = puVar2;
          __ptr[0x17] = (undefined *)0x0;
          pthread_mutex_init((pthread_mutex_t *)(__ptr + 0x18),(pthread_mutexattr_t *)0x0);
          __ptr[0x1c] = (undefined *)0x0;
          __ptr[0x1d] = (undefined *)0x0;
          __cond_attr = (pthread_condattr_t *)
                        pthread_mutex_init((pthread_mutex_t *)(__ptr + 5),(pthread_mutexattr_t *)0x0
                                          );
          if (__cond_attr != (pthread_condattr_t *)0x0) {
            ppcVar6 = (char **)0x681;
            __ptr = (undefined **)&DAT_0001f306;
            __android_log_assert
                      ("!(!ret)","awplayer","<%s:%d>CDX_CHECK(%s) failed.",
                       "aw_rtmp_streaming_start2",0x681,&DAT_0001f306);
            __cond_attr = extraout_r1;
          }
          pthread_cond_init((pthread_cond_t *)(__ptr + 6),__cond_attr);
          goto LAB_0001890a;
        }
      }
    }
    ppcVar6 = (char **)0x689;
    __android_log_print(5,"awplayer","<%s:%u>: failed in rtmp stream start",
                        "aw_rtmp_streaming_start2",0x689,iVar7,uVar8);
    __ptr[0xd] = (undefined *)0x2;
    __ptr[0xc] = (undefined *)0x1;
    RtmpClose(__ptr);
    free(__ptr);
    __ptr = (undefined **)0x0;
  }
LAB_0001890a:
  return CONCAT44(ppcVar6,__ptr);
}



void FUN_00018984(void **param_1)

{
  void **__ptr;
  void **ppvVar1;
  
  if (param_1 == (void **)0x0) {
    return;
  }
  if (*param_1 != (void *)0x0) {
    free(*param_1);
    *param_1 = (void *)0x0;
  }
  if (param_1[2] != (void *)0x0) {
    free(param_1[2]);
    param_1[2] = (void *)0x0;
  }
  if (param_1[4] != (void *)0x0) {
    free(param_1[4]);
    param_1[4] = (void *)0x0;
  }
  if (param_1[9] != (void *)0x0) {
    free(param_1[9]);
    param_1[9] = (void *)0x0;
  }
  if (param_1[1] != (void *)0x0) {
    free(param_1[1]);
    param_1[1] = (void *)0x0;
  }
  if (param_1[0xd] != (void *)0x0) {
    free(param_1[0xd]);
    param_1[0xd] = (void *)0x0;
  }
  __ptr = (void **)param_1[6];
  while (__ptr != (void **)0x0) {
    if (*__ptr != (void *)0x0) {
      free(*__ptr);
      *__ptr = (void *)0x0;
    }
    ppvVar1 = (void **)__ptr[1];
    free(__ptr);
    __ptr = ppvVar1;
  }
  free(param_1);
  return;
}



undefined8 FUN_00018a00(uint param_1,void *param_2,uint param_3)

{
  uint uVar1;
  void *pvVar2;
  undefined4 uVar3;
  undefined *puVar4;
  int iVar5;
  uint uVar6;
  void *pvVar7;
  
  uVar6 = 1 - param_1;
  if (1 < param_1) {
    uVar6 = 0;
  }
  if (param_2 == (void *)0x0) {
    uVar6 = uVar6 | 1;
  }
  uVar1 = param_1;
  if ((uVar6 == 0) && (-1 < (int)param_3)) {
    pvVar7 = param_2;
    uVar6 = param_3;
    if (~*(uint *)(param_1 + 0x38) - 1 < param_3) {
      uVar1 = 0x98;
      puVar4 = &DAT_0001f612;
    }
    else {
      pvVar2 = realloc(*(void **)(param_1 + 0x34),*(uint *)(param_1 + 0x38) + 1 + param_3);
      *(void **)(param_1 + 0x34) = pvVar2;
      if (pvVar2 != (void *)0x0) {
        memcpy((void *)((int)pvVar2 + *(int *)(param_1 + 0x38)),param_2,param_3);
        iVar5 = param_3 + *(int *)(param_1 + 0x38);
        *(int *)(param_1 + 0x38) = iVar5;
        *(undefined *)(*(int *)(param_1 + 0x34) + iVar5) = 0;
        uVar3 = *(undefined4 *)(param_1 + 0x38);
        goto LAB_00018a7e;
      }
      uVar1 = 0x9e;
      puVar4 = &DAT_0001f65e;
    }
    __android_log_print(6,"awplayer",puVar4,"CdxMmshResponseAppend",uVar1,pvVar7,uVar6);
  }
  uVar3 = 0xffffffff;
LAB_00018a7e:
  return CONCAT44(uVar1,uVar3);
}



char * FUN_00018a98(int param_1)

{
  char *pcVar1;
  char *pcVar2;
  
  if (param_1 == 0) {
    return (char *)0xffffffff;
  }
  pcVar2 = *(char **)(param_1 + 0x34);
  if (pcVar2 != (char *)0x0) {
    pcVar1 = strstr(pcVar2,"\r\n\r\n");
    if (pcVar1 == (char *)0x0) {
      pcVar2 = strstr(pcVar2,"\n\n");
      if (pcVar2 != (char *)0x0) {
        pcVar2 = (char *)0x1;
      }
      return pcVar2;
    }
    return (char *)0x1;
  }
  return (char *)0x0;
}



char ** FUN_00018ad4(char **param_1)

{
  char **ppcVar1;
  int iVar2;
  char **ppcVar3;
  char **ppcVar4;
  char *pcVar5;
  
  ppcVar4 = param_1;
  if (param_1 != (char **)0x0) {
    ppcVar4 = (char **)param_1[10];
    while (ppcVar4 != (char **)0x0) {
      pcVar5 = *ppcVar4;
      ppcVar1 = (char **)strchr(pcVar5,0x3a);
      if (ppcVar1 == (char **)0x0) {
        return (char **)0x0;
      }
      iVar2 = strncasecmp(pcVar5,param_1[9],(size_t)((int)ppcVar1 - (int)pcVar5));
      if (iVar2 == 0) {
        do {
          ppcVar3 = (char **)((int)ppcVar1 + 1);
          pcVar5 = (char *)((int)ppcVar1 + 1);
          ppcVar1 = ppcVar3;
        } while (*pcVar5 == ' ');
        param_1[10] = ppcVar4[1];
        return ppcVar3;
      }
      ppcVar4 = (char **)ppcVar4[1];
    }
  }
  return ppcVar4;
}



char ** FUN_00018b16(char **param_1,char *param_2)

{
  size_t sVar1;
  char **ppcVar2;
  uint uVar3;
  
  uVar3 = 1 - (int)param_1;
  if ((char **)0x1 < param_1) {
    uVar3 = 0;
  }
  if (param_2 == (char *)0x0) {
    uVar3 = uVar3 | 1;
  }
  if (uVar3 == 0) {
    param_1[10] = param_1[6];
    sVar1 = strlen(param_2);
    ppcVar2 = (char **)realloc(param_1[9],sVar1 + 1);
    param_1[9] = (char *)ppcVar2;
    if (ppcVar2 != (char **)0x0) {
      strcpy((char *)ppcVar2,param_2);
      ppcVar2 = FUN_00018ad4(param_1);
      return ppcVar2;
    }
  }
  else {
    ppcVar2 = (char **)0x0;
  }
  return ppcVar2;
}



void CdxMmshSetField(uint param_1,char *param_2,undefined4 param_3)

{
  char **__ptr;
  size_t sVar1;
  char *__dest;
  uint uVar2;
  char *pcVar3;
  
  uVar2 = 1 - param_1;
  if (1 < param_1) {
    uVar2 = 0;
  }
  if (param_2 == (char *)0x0) {
    uVar2 = uVar2 | 1;
  }
  if (uVar2 == 0) {
    pcVar3 = param_2;
    __ptr = (char **)malloc(8);
    if (__ptr == (char **)0x0) {
      __android_log_print(6,"awplayer",&DAT_0001f6a8,"CdxMmshSetField",0xc3,pcVar3,param_3);
    }
    else {
      __ptr[1] = (char *)0x0;
      sVar1 = strlen(param_2);
      __dest = (char *)malloc(sVar1 + 1);
      *__ptr = __dest;
      if (__dest == (char *)0x0) {
        __android_log_print(6,"awplayer",&DAT_0001f6f9,"CdxMmshSetField",0xca,pcVar3,param_3);
        free(__ptr);
        return;
      }
      strcpy(__dest,param_2);
      if (*(int *)(param_1 + 0x1c) == 0) {
        *(char ***)(param_1 + 0x18) = __ptr;
      }
      else {
        *(char ***)(*(int *)(param_1 + 0x1c) + 4) = __ptr;
      }
      *(char ***)(param_1 + 0x1c) = __ptr;
      *(int *)(param_1 + 0x20) = *(int *)(param_1 + 0x20) + 1;
    }
  }
  return;
}



undefined8 CdxMmshResponseParse(char **param_1,undefined4 param_2,undefined4 param_3)

{
  char *pcVar1;
  char **ppcVar2;
  char *pcVar3;
  int iVar4;
  int iVar5;
  undefined4 uVar6;
  undefined *puVar7;
  byte *pbVar8;
  byte *pbVar9;
  char *pcVar10;
  byte *pbVar11;
  char *pcVar12;
  char *pcVar13;
  uint uVar14;
  byte *__src;
  
  ppcVar2 = param_1;
  if (param_1 != (char **)0x0) {
    if (param_1[0xf] != (char *)0x0) {
LAB_00018dd4:
      uVar6 = 0;
      goto LAB_00018ddc;
    }
    pcVar12 = param_1[0xd];
    pcVar1 = strchr(pcVar12,0x20);
    if (pcVar1 == (char *)0x0) {
      ppcVar2 = (char **)0xf3;
      puVar7 = &DAT_0001f741;
    }
    else {
      pcVar10 = pcVar1 + -(int)pcVar12;
      pcVar3 = (char *)malloc((size_t)(pcVar10 + 1));
      *param_1 = pcVar3;
      if (pcVar3 == (char *)0x0) goto LAB_00018dd8;
      strncpy(pcVar3,pcVar12,(size_t)pcVar10);
      (*param_1)[(int)pcVar10] = '\0';
      pcVar12 = *param_1;
      iVar4 = strncasecmp(pcVar12,"HTTP",4);
      if ((iVar4 == 0) && (iVar4 = sscanf(pcVar12 + 5,"1.%d",param_1 + 5), iVar4 != 1)) {
        ppcVar2 = (char **)0x101;
        puVar7 = &DAT_0001f7a2;
      }
      else {
        iVar4 = sscanf(pcVar1 + 1,"%d",param_1 + 3);
        if (iVar4 == 1) {
          pcVar1 = pcVar1 + 5;
          pcVar12 = strchr(pcVar1,10);
          if (pcVar12 == (char *)0x0) {
            ppcVar2 = (char **)0x112;
            puVar7 = &DAT_0001f861;
          }
          else {
            pcVar12 = pcVar12 + -(int)pcVar1;
            pcVar3 = (char *)malloc((size_t)(pcVar12 + 1));
            param_1[4] = pcVar3;
            if (pcVar3 != (char *)0x0) {
              strncpy(pcVar3,pcVar1,(size_t)pcVar12);
              if (*(char *)((int)param_1[4] + (int)pcVar12 + -1) == '\r') {
                pcVar12 = pcVar12 + -1;
              }
              param_1[4][(int)pcVar12] = '\0';
              pcVar12 = param_1[0xd];
              pcVar1 = strstr(pcVar12,"\r\n\r\n");
              if (pcVar1 == (char *)0x0) {
                pcVar1 = strstr(pcVar12,"\n\n");
                if (pcVar1 == (char *)0x0) {
                  ppcVar2 = (char **)0x12b;
                  puVar7 = &DAT_0001f8c2;
                  goto LAB_00018d28;
                }
                iVar4 = 2;
              }
              else {
                iVar4 = 4;
              }
              pcVar3 = strchr(pcVar12,10);
              __src = (byte *)(pcVar3 + 1);
              pcVar3 = (char *)0x0;
              pbVar11 = __src;
              do {
                do {
                  pbVar9 = pbVar11;
                  pcVar10 = (char *)(uint)*pbVar9;
                  pcVar13 = pcVar10 + -0xd;
                  if (pcVar13 != (char *)0x0) {
                    pcVar13 = (char *)0x1;
                  }
                  if (pcVar10 == (char *)0xa) {
                    uVar14 = 0;
                  }
                  else {
                    uVar14 = (uint)pcVar13 & 1;
                  }
                  pbVar11 = pbVar9 + 1;
                } while (uVar14 != 0);
                pbVar11 = pbVar9 + -(int)__src;
                if (pbVar11 == (byte *)0x0) {
                  if (pcVar3 == (char *)0x0) goto LAB_00018dba;
                  break;
                }
                pcVar3 = (char *)realloc(pcVar3,(size_t)(pbVar11 + 1));
                if (pcVar3 == (char *)0x0) goto LAB_00018dd8;
                pbVar8 = pbVar11;
                strncpy(pcVar3,(char *)__src,(size_t)pbVar11);
                pcVar3[(int)pbVar11] = '\0';
                CdxMmshSetField((uint)param_1,pcVar3,pbVar8);
                pcVar10 = param_1[0xd];
                if (*pbVar9 == 0xd) {
                  iVar5 = 2;
                }
                else {
                  iVar5 = 1;
                }
                __src = pbVar9 + iVar5;
                pbVar11 = __src;
              } while (__src < pcVar10 + (int)(pcVar1 + -(int)pcVar12));
              free(pcVar3);
LAB_00018dba:
              pcVar3 = param_1[0xe];
              pcVar12 = pcVar1 + -(int)pcVar12 + iVar4;
              pcVar1 = pcVar3;
              if ((int)pcVar12 < (int)pcVar3) {
                pcVar1 = pcVar3 + -(int)pcVar12;
              }
              if ((int)pcVar12 < (int)pcVar3) {
                param_1[0xc] = pcVar1;
                pcVar10 = param_1[0xd] + (int)pcVar12;
              }
              if ((int)pcVar12 < (int)pcVar3) {
                param_1[0xb] = pcVar10;
              }
              param_1[0xf] = (char *)0x1;
              goto LAB_00018dd4;
            }
            ppcVar2 = (char **)0x119;
            puVar7 = &DAT_0001f6f9;
          }
        }
        else {
          ppcVar2 = (char **)0x109;
          puVar7 = &DAT_0001f806;
        }
      }
    }
LAB_00018d28:
    __android_log_print(6,"awplayer",puVar7,"CdxMmshResponseParse",ppcVar2,param_2,param_3);
  }
LAB_00018dd8:
  uVar6 = 0xffffffff;
LAB_00018ddc:
  return CONCAT44(ppcVar2,uVar6);
}



void CdxMmshSetUri(uint param_1,char *param_2,undefined4 param_3)

{
  size_t sVar1;
  char *__dest;
  uint uVar2;
  char *pcVar3;
  
  uVar2 = 1 - param_1;
  if (1 < param_1) {
    uVar2 = 0;
  }
  if (param_2 == (char *)0x0) {
    uVar2 = uVar2 | 1;
  }
  if (uVar2 == 0) {
    pcVar3 = param_2;
    sVar1 = strlen(param_2);
    __dest = (char *)malloc(sVar1 + 1);
    *(char **)(param_1 + 8) = __dest;
    if (__dest != (char *)0x0) {
      strcpy(__dest,param_2);
      return;
    }
    __android_log_print(6,"awplayer",&DAT_0001f91b,"CdxMmshSetUri",0x16a,pcVar3,param_3);
  }
  return;
}



uint CdxMmshAddBasicAuthentication(uint param_1,char *param_2,char *param_3)

{
  char *pcVar1;
  size_t sVar2;
  byte *__s;
  uint uVar3;
  char *pcVar4;
  uint uVar5;
  uint uVar6;
  uint uVar7;
  byte *pbVar8;
  char *pcVar9;
  char acStack112 [68];
  int local_2c;
  
  uVar5 = 1 - param_1;
  if (1 < param_1) {
    uVar5 = 0;
  }
  if (param_2 == (char *)0x0) {
    uVar5 = uVar5 | 1;
  }
  local_2c = __stack_chk_guard;
  if (uVar5 == 0) {
    pcVar1 = param_3;
    if (param_3 != (char *)0x0) {
      pcVar1 = (char *)strlen(param_3);
    }
    sVar2 = strlen(param_2);
    __s = (byte *)malloc((size_t)(pcVar1 + sVar2 + 2));
    if (__s != (byte *)0x0) {
      if (param_3 == (char *)0x0) {
        param_3 = "";
      }
      sprintf((char *)__s,"%s:%s",param_2,param_3);
      sVar2 = strlen((char *)__s);
      uVar5 = sVar2 * 2;
      pcVar1 = (char *)malloc(uVar5);
      if (pcVar1 != (char *)0x0) {
        sVar2 = strlen((char *)__s);
        memcpy(acStack112,"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",0x41);
        uVar6 = 0;
        uVar7 = 0;
        uVar3 = 0;
        pcVar9 = pcVar1;
        pbVar8 = __s;
        do {
          pcVar4 = pcVar9;
          if ((int)sVar2 < 1) {
            if (uVar6 == 0) goto LAB_00018f9c;
            uVar7 = uVar7 << (6 - uVar6 & 0xff);
            uVar6 = 6;
          }
          else {
            uVar6 = uVar6 + 8;
            sVar2 = sVar2 - 1;
            uVar7 = (uint)*pbVar8 | uVar7 << 8;
            pbVar8 = pbVar8 + 1;
          }
          do {
            if ((int)(uVar5 & 0xfffffffc) <= (int)uVar3) goto LAB_00018fce;
            uVar6 = uVar6 - 6;
            uVar3 = uVar3 + 1;
            pcVar9 = pcVar4 + 1;
            *pcVar4 = acStack112[uVar7 >> (uVar6 & 0xff) & 0x3f];
            pcVar4 = pcVar9;
          } while (5 < uVar6);
        } while( true );
      }
      uVar7 = 0xffffffff;
      __android_log_print(6,"awplayer",&DAT_0001f9ac,"CdxMmshAddBasicAuthentication",0x1cb);
      pcVar9 = pcVar1;
      goto LAB_00019052;
    }
    __android_log_print(6,"awplayer",&DAT_0001f95c,"CdxMmshAddBasicAuthentication",0x1c0);
  }
  uVar7 = 0xffffffff;
  goto LAB_00019044;
LAB_00018f9c:
  while (uVar7 = uVar3 & 3, uVar7 != 0) {
    *pcVar9 = '=';
    uVar3 = uVar3 + 1;
    pcVar9 = pcVar9 + 1;
  }
  if ((int)uVar3 < 0) {
LAB_00018fce:
    uVar7 = 0xffffffff;
    __android_log_print(6,"awplayer",&DAT_0001f9f0,"CdxMmshAddBasicAuthentication",0x1d2);
    pcVar9 = (char *)0x0;
  }
  else {
    pcVar1[uVar3] = '\0';
    pcVar9 = (char *)malloc(uVar5 + 0x16);
    if (pcVar9 == (char *)0x0) {
      uVar7 = 0xffffffff;
      __android_log_print(6,"awplayer",&DAT_0001f6f9,"CdxMmshAddBasicAuthentication",0x1db);
    }
    else {
      pcVar4 = pcVar1;
      sprintf(pcVar9,"Authorization: Basic %s");
      CdxMmshSetField(param_1,pcVar9,pcVar4);
    }
  }
LAB_00019052:
  free(__s);
  if (pcVar1 != (char *)0x0) {
    free(pcVar1);
  }
  if (pcVar9 != (char *)0x0) {
    free(pcVar9);
  }
LAB_00019044:
  if (local_2c == __stack_chk_guard) {
    return uVar7;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



char * CdxMmshBuildRequest(char *param_1,undefined4 param_2,undefined4 param_3)

{
  int iVar1;
  char *pcVar2;
  char *__dest;
  size_t sVar3;
  size_t sVar4;
  char **ppcVar5;
  undefined4 *puVar6;
  
  pcVar2 = param_1;
  if (param_1 != (char *)0x0) {
    if (*(int *)(param_1 + 4) == 0) {
      iVar1 = __strlen_chk(&DAT_0001fa8b,4,param_3,0,param_1,param_2);
      pcVar2 = (char *)malloc(iVar1 + 1);
      *(char **)(param_1 + 4) = pcVar2;
      if (pcVar2 != (char *)0x0) {
        strcpy(pcVar2,"GET");
      }
    }
    pcVar2 = *(char **)(param_1 + 8);
    if (pcVar2 == (char *)0x0) {
      CdxMmshSetUri((uint)param_1,"/",param_3);
      __dest = pcVar2;
    }
    else {
      sVar3 = strlen(pcVar2);
      __dest = (char *)malloc(sVar3 + 1);
      if (__dest == (char *)0x0) {
        return (char *)0x0;
      }
      strcpy(__dest,pcVar2);
    }
    sVar3 = strlen(*(char **)(param_1 + 4));
    sVar4 = strlen(__dest);
    ppcVar5 = *(char ***)(param_1 + 0x18);
    iVar1 = sVar3 + sVar4 + 0xc;
    while (iVar1 = iVar1 + 2, ppcVar5 != (char **)0x0) {
      sVar3 = strlen(*ppcVar5);
      ppcVar5 = (char **)ppcVar5[1];
      iVar1 = iVar1 + sVar3;
    }
    if (*(int *)(param_1 + 0x2c) != 0) {
      iVar1 = iVar1 + *(int *)(param_1 + 0x30);
    }
    if (*(void **)(param_1 + 0x34) != (void *)0x0) {
      free(*(void **)(param_1 + 0x34));
    }
    pcVar2 = (char *)malloc(iVar1 + 1);
    *(char **)(param_1 + 0x34) = pcVar2;
    if (pcVar2 == (char *)0x0) {
      __android_log_print(6,"awplayer",&DAT_0001fa91,"CdxMmshBuildRequest",0x23c);
      free(__dest);
    }
    else {
      *(int *)(param_1 + 0x38) = iVar1;
      iVar1 = sprintf(pcVar2,"%s %s HTTP/1.%u\r\n",*(undefined4 *)(param_1 + 4),__dest,
                      *(undefined4 *)(param_1 + 0x14));
      puVar6 = *(undefined4 **)(param_1 + 0x18);
      pcVar2 = pcVar2 + iVar1;
      while (puVar6 != (undefined4 *)0x0) {
        iVar1 = sprintf(pcVar2,"%s\r\n",*puVar6);
        puVar6 = (undefined4 *)puVar6[1];
        pcVar2 = pcVar2 + iVar1;
      }
      strcpy(pcVar2,"\r\n");
      if (*(void **)(param_1 + 0x2c) != (void *)0x0) {
        memcpy(pcVar2 + 2,*(void **)(param_1 + 0x2c),*(size_t *)(param_1 + 0x30));
      }
      if (__dest != (char *)0x0) {
        free(__dest);
      }
      pcVar2 = *(char **)(param_1 + 0x34);
    }
  }
  return pcVar2;
}



undefined4 CdxMmshAuthenticate(char **param_1,int param_2,int *param_3)

{
  if (*param_3 != 1) {
    if (0 < *param_3) {
      if (*(void **)(param_2 + 0x14) != (void *)0x0) {
        free(*(void **)(param_2 + 0x14));
        *(undefined4 *)(param_2 + 0x14) = 0;
      }
      if (*(void **)(param_2 + 0x18) != (void *)0x0) {
        free(*(void **)(param_2 + 0x18));
        *(undefined4 *)(param_2 + 0x18) = 0;
      }
    }
    FUN_00018b16(param_1,"WWW-Authenticate");
    *param_3 = *param_3 + 1;
    return 0;
  }
  return 0xffffffff;
}



char ** MmshRequest(char **param_1,undefined4 param_2,undefined4 param_3,undefined4 param_4,
                   int param_5,int param_6)

{
  int iVar1;
  char **ppcVar2;
  int iVar3;
  undefined4 extraout_r1;
  undefined4 uVar4;
  char *pcVar5;
  int *piVar6;
  char *pcVar7;
  uint uVar8;
  int iVar9;
  char acStack288 [28];
  char acStack260 [224];
  int local_24;
  
  local_24 = __stack_chk_guard;
  if (param_1 != (char **)0x0) {
    pcVar7 = param_1[0x11];
    piVar6 = (int *)param_1[0x39];
    uVar8 = 1 - (int)pcVar7;
    if ((char *)0x1 < pcVar7) {
      uVar8 = 0;
    }
    if (piVar6 == (int *)0x0) {
      uVar8 = uVar8 | 1;
    }
    param_1 = (char **)0x0;
    if (uVar8 == 0) {
      uVar4 = param_3;
      param_1 = (char **)malloc(0x40);
      if (param_1 != (char **)0x0) {
        uVar4 = 0x40;
        memset(param_1,0,0x40);
      }
      CdxMmshSetField((uint)param_1,"Accept: */*",uVar4);
      CdxMmshSetField((uint)param_1,"User-Agent: NSPlayer/4.1.0.3856",uVar4);
      pcVar5 = *(char **)(pcVar7 + 0x18);
      CdxMmshAddBasicAuthentication((uint)param_1,*(char **)(pcVar7 + 0x14),pcVar5);
      iVar1 = strcasecmp(*(char **)(pcVar7 + 4),"http_proxy");
      if (iVar1 == 0) {
        ppcVar2 = (char **)CdxUrlNew(*(int *)(pcVar7 + 0xc) + 1);
        if (ppcVar2 == (char **)0x0) {
          FUN_00018984(param_1);
          param_1 = ppcVar2;
          goto LAB_00019412;
        }
        CdxMmshSetUri((uint)param_1,*ppcVar2,pcVar5);
        uVar4 = 0xfa;
        __sprintf_chk(acStack288,0,0xfa,"Host: %.220s:%d",ppcVar2[2],ppcVar2[4]);
        CdxUrlFree(ppcVar2);
      }
      else {
        CdxMmshSetUri((uint)param_1,*(char **)(pcVar7 + 0xc),pcVar5);
        uVar4 = 0xfa;
        __sprintf_chk(acStack288,0,0xfa,"Host: %.220s:%d",*(undefined4 *)(pcVar7 + 8),
                      *(undefined4 *)(pcVar7 + 0x10));
      }
      CdxMmshSetField((uint)param_1,acStack288,uVar4);
      CdxMmshSetField((uint)param_1,"Pragma: xClientGUID={c77e7400-738a-11d2-9add-0020af0a3278}",
                      uVar4);
      pcVar7 = (char *)0xfa;
      __sprintf_chk(acStack288,0,0xfa,
                                        
                    "Pragma: no-cache,rate=1.000000,stream-time=0,stream-offset=%u:%u,request-context=%d,max-duration=%d"
                    ,param_2,param_3,piVar6[1],0);
      CdxMmshSetField((uint)param_1,acStack288,pcVar7);
      if ((int)(param_6 - (uint)(param_5 == 0)) < 0 ==
          (param_6 < 0 && (int)(param_6 + -1 + (uint)(param_5 != 0)) < 0 != param_6 < 0)) {
        pcVar7 = "Range: bytes=%lld-";
        snprintf(acStack288,0xfa,"Range: bytes=%lld-");
        CdxMmshSetField((uint)param_1,acStack288,pcVar7);
      }
      if (*piVar6 - 1U < 3) {
        iVar1 = 0;
        pcVar5 = acStack260;
        CdxMmshSetField((uint)param_1,"Pragma: xPlayStrm=1",pcVar7);
        strcpy(acStack288,"Pragma: stream-switch-entry=");
        if (0 < piVar6[4]) {
          iVar9 = 0;
          while (iVar9 < piVar6[4]) {
            pcVar7 = *(char **)(piVar6[3] + iVar9 * 4);
            if (pcVar7 == (char *)piVar6[7]) {
              iVar1 = iVar1 + 1;
              iVar3 = sprintf(pcVar5,"ffff:%x:%d ",pcVar7,0);
              pcVar5 = pcVar5 + iVar3;
            }
            iVar9 = iVar9 + 1;
          }
        }
        if (0 < piVar6[6]) {
          iVar9 = 0;
          while (iVar9 < piVar6[6]) {
            pcVar7 = *(char **)(piVar6[5] + iVar9 * 4);
            if (pcVar7 == (char *)piVar6[8]) {
              iVar1 = iVar1 + 1;
              iVar3 = sprintf(pcVar5,"ffff:%x:%d ",pcVar7,0);
              pcVar5 = pcVar5 + iVar3;
            }
            iVar9 = iVar9 + 1;
          }
        }
        CdxMmshSetField((uint)param_1,acStack288,pcVar7);
        pcVar7 = (char *)0xfa;
        __sprintf_chk(acStack288,0,0xfa,"Pragma: stream-switch-count=%d",iVar1);
        CdxMmshSetField((uint)param_1,acStack288,pcVar7);
      }
      CdxMmshSetField((uint)param_1,"Connection: Close",pcVar7);
      CdxMmshBuildRequest((char *)param_1,extraout_r1,pcVar7);
    }
  }
LAB_00019412:
  if (local_24 == __stack_chk_guard) {
    return param_1;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



size_t NopStreamingRead(int param_1,void *param_2,size_t param_3,int param_4)

{
  void *__src;
  size_t __n;
  int iVar1;
  size_t sVar2;
  
  __n = *(size_t *)(param_4 + 0xf4);
  if (__n != 0) {
    sVar2 = *(int *)(param_4 + 0xf8) - *(int *)(param_4 + 0xfc);
    __src = (void *)(__n + *(int *)(param_4 + 0xfc));
    __n = sVar2;
    if ((int)param_3 < (int)sVar2) {
      __n = param_3;
    }
    memcpy(param_2,__src,__n);
    iVar1 = __n + *(int *)(param_4 + 0xfc);
    *(int *)(param_4 + 0xfc) = iVar1;
    if (*(int *)(param_4 + 0xf8) <= iVar1) {
      free(*(void **)(param_4 + 0xf4));
      *(undefined4 *)(param_4 + 0xf4) = 0;
      *(undefined4 *)(param_4 + 0xf8) = 0;
      *(undefined4 *)(param_4 + 0xfc) = 0;
    }
  }
  while( true ) {
    if ((int)param_3 <= (int)__n) {
      return __n;
    }
    iVar1 = MmsGetNetworkData(param_4,param_1,(void *)((int)param_2 + __n),param_3 - __n);
    if (iVar1 < 1) break;
    __n = __n + iVar1;
  }
  __android_log_print(5,"awplayer","<%s:%u>: ******************ret=%d, want=%d\n","NopStreamingRead"
                      ,0x412,iVar1,param_3 - __n);
  return 0xffffffff;
}



size_t FUN_00019510(int param_1,void *param_2,size_t param_3,int param_4)

{
  size_t sVar1;
  
  while( true ) {
    if ((int)param_3 < 1) {
      return 1;
    }
    sVar1 = NopStreamingRead(param_1,param_2,param_3,param_4);
    if ((int)sVar1 < 1) break;
    param_2 = (void *)((int)param_2 + sVar1);
    param_3 = param_3 - sVar1;
  }
  return sVar1;
}



undefined4 AsfStreamingType(ushort *param_1,undefined4 *param_2)

{
  ushort uVar1;
  
  if (param_2 != (undefined4 *)0x0) {
    *param_2 = 0;
  }
  uVar1 = *param_1;
  if (uVar1 == 0x4424) {
    return 0;
  }
  if (uVar1 < 0x4425) {
    if (uVar1 == 0x4324) {
      __android_log_print(3,"awplayer","<%s:%u>: =====> Clearing ASF stream configuration!\n",
                          "AsfStreamingType",0x46e,param_2);
      if (param_2 == (undefined4 *)0x0) {
        return 1;
      }
      *param_2 = 1;
      return 1;
    }
  }
  else {
    if (uVar1 == 0x4524) {
      __android_log_print(3,"awplayer","<%s:%u>: =====> Transfer complete, End of stream\n",
                          "AsfStreamingType",0x47a,param_2);
      if (param_2 != (undefined4 *)0x0) {
        *param_2 = 1;
      }
      return 3;
    }
    if (uVar1 == 0x4824) {
      __android_log_print(3,"awplayer","<%s:%u>: =====> ASF header chunk follows\n",
                          "AsfStreamingType",0x482,param_2);
      return 2;
    }
  }
  __android_log_print(5,"awplayer","<%s:%u>: =====> Unknown chunk type 0x%x\n","AsfStreamingType",
                      0x486,uVar1);
  return 0xffffffff;
}



int MmshFindAsfGuid(int param_1,void *param_2,int param_3,int param_4)

{
  int iVar1;
  
  while( true ) {
    if (param_4 + -0x13 <= param_3) {
      return -1;
    }
    iVar1 = memcmp((void *)(param_1 + param_3),param_2,0x10);
    if (iVar1 == 0) break;
    param_3 = param_3 + 1;
  }
  return param_3 + 0x18;
}



int MmshGetMaxIdx(int param_1,int *param_2,int param_3)

{
  int iVar1;
  int iVar2;
  int iVar3;
  int iVar4;
  
  iVar3 = -1;
  iVar2 = 0;
  iVar1 = -1;
  while (iVar2 < param_1) {
    iVar4 = *param_2;
    if ((iVar3 < iVar4) && (iVar4 <= param_3)) {
      iVar1 = iVar2;
      iVar3 = iVar4;
    }
    iVar2 = iVar2 + 1;
    param_2 = param_2 + 1;
  }
  return iVar1;
}



char * MmshStreamingStart(undefined4 param_1,char **param_2)

{
  undefined uVar1;
  undefined uVar2;
  ushort uVar3;
  char **__ptr;
  int iVar4;
  char **__s;
  ssize_t sVar5;
  uint uVar6;
  undefined4 uVar7;
  char *pcVar8;
  char **__s1;
  char **__s1_00;
  char *pcVar9;
  void *__dest;
  size_t sVar10;
  int iVar11;
  int iVar12;
  uint uVar13;
  char *pcVar14;
  undefined4 extraout_r1;
  byte *pbVar15;
  ushort *puVar16;
  uint *puVar17;
  uint *puVar18;
  size_t sVar19;
  uint uVar20;
  size_t sVar21;
  char *__src;
  int iVar22;
  uint *__ptr_00;
  void *pvVar23;
  int *__ptr_01;
  undefined8 uVar24;
  char *pcVar25;
  char *local_95c;
  size_t local_954;
  void *local_950;
  char *local_918;
  char *local_914;
  int local_8bc;
  ushort local_8b8;
  ushort local_8b6;
  ushort local_8ae;
  char acStack2220 [128];
  undefined auStack2092 [2048];
  int local_2c;
  
  pcVar14 = param_2[0x11];
  local_8bc = 0;
  local_2c = __stack_chk_guard;
  __ptr = (char **)malloc(0x24);
  if (__ptr == (char **)0x0) {
    __android_log_print(6,"awplayer",&DAT_0001fd4d,"MmshStreamingStart",0x610);
    local_95c = (char *)0xffffffff;
  }
  else {
    __ptr[2] = (char *)0x0;
    *__ptr = (char *)0x0;
    __ptr[1] = (char *)0x1;
    __ptr[3] = (char *)0x0;
    __ptr[5] = (char *)0x0;
    __ptr[4] = (char *)0x0;
    __ptr[6] = (char *)0x0;
    param_2[0x39] = (char *)__ptr;
LAB_000196fe:
    if (0 < (int)param_2[0x1b]) {
      close((int)param_2[0x1b]);
    }
    iVar4 = strcasecmp(*(char **)(pcVar14 + 4),"http_proxy");
    if (iVar4 == 0) {
      if (*(int *)(pcVar14 + 0x10) == 0) {
        *(undefined4 *)(pcVar14 + 0x10) = 0x1f90;
      }
    }
    else {
      if (*(int *)(pcVar14 + 0x10) == 0) {
        *(undefined4 *)(pcVar14 + 0x10) = 0x50;
      }
    }
    local_95c = (char *)Connect2Server((int)param_2,*(char **)(pcVar14 + 8),
                                       *(uint *)(pcVar14 + 0x10),1);
    if ((int)local_95c < 0) goto LAB_0001a16c;
    pcVar25 = (char *)0x0;
    __s = MmshRequest(param_2,0,0,0,0,0);
    iVar4 = 0;
    while (iVar4 < (int)__s[0xe]) {
      sVar5 = send((int)local_95c,__s[0xd] + iVar4,(size_t)(__s[0xe] + -iVar4),0x4000);
      if (sVar5 < 0) goto switchD_0001a196_caseD_6;
      iVar4 = iVar4 + sVar5;
      usleep(30000);
    }
    FUN_00018984(__s);
    __s = (char **)malloc(0x40);
    if (__s != (char **)0x0) {
      memset(__s,0,0x40);
    }
    do {
      uVar6 = MmsGetNetworkData((int)param_2,(int)param_2[0x1b],auStack2092,0x800);
      if ((int)uVar6 < 1) {
        uVar7 = 0x64f;
        pcVar14 = "<%s:%u>: *****MmsGetNetworkData error!";
        goto LAB_0001a0c6;
      }
      FUN_00018a00((uint)__s,auStack2092,uVar6);
      pcVar8 = FUN_00018a98((int)__s);
    } while (pcVar8 == (char *)0x0);
    sVar21 = 0;
    __s[0xd][(int)__s[0xe]] = '\0';
    memcpy(acStack2220,&DAT_000214b5,2);
    uVar7 = 0x7e;
    memset(acStack2220 + 2,0,0x7e);
    uVar24 = CdxMmshResponseParse(__s,extraout_r1,uVar7);
    if ((int)uVar24 < 0) {
LAB_00019a1c:
      uVar7 = 0x65a;
      pcVar14 = "<%s:%u>: ***** mmsh parse response error!";
      goto LAB_0001a0c6;
    }
    pcVar25 = __s[3];
    __android_log_print(3,"awplayer","<%s:%u>: status Code = %d","MmshParseResponse",0x3a8,pcVar25);
    if (__s[3] == (char *)0xc8) {
      __s1 = FUN_00018b16(__s,"Content-Type");
      __s1_00 = FUN_00018b16(__s,"Pragma");
      while (__s1_00 != (char **)0x0) {
        while (iVar4 = strncasecmp((char *)__s1_00,"features=",9), iVar4 != 0) {
          pcVar8 = strchr((char *)__s1_00,0x2c);
          if (pcVar8 == (char *)0x0) goto LAB_000198ce;
          __s1_00 = (char **)(pcVar8 + 2);
          if (pcVar8[1] != ' ') {
            __s1_00 = (char **)(pcVar8 + 1);
          }
        }
        if (*(char *)((int)__s1_00 + 9) == '\"') {
          sVar19 = sVar21 + 1;
          do {
            sVar19 = sVar19 + 1;
            if (0x7f < sVar19) {
              sVar19 = 0x7f;
              break;
            }
          } while (*(char *)((int)__s1_00 + (sVar19 - sVar21) + 8) != '\"');
        }
        else {
          sVar19 = strlen((char *)((int)__s1_00 + 9));
          if (0x7e < sVar19) {
            sVar19 = 0x7f;
          }
        }
        __strncpy_chk(acStack2220,(char *)((int)__s1_00 + 9),sVar19,0x80);
        acStack2220[sVar19] = '\0';
        sVar21 = sVar19;
LAB_000198ce:
        __s1_00 = FUN_00018ad4(__s);
      }
      if (__s1 != (char **)0x0) {
        iVar4 = strcasecmp((char *)__s1,"application/octet-stream");
        if ((((iVar4 == 0) ||
             (iVar4 = strcasecmp((char *)__s1,"application/vnd.ms.wms-hdr.asfv1"), iVar4 == 0)) ||
            (iVar4 = strcasecmp((char *)__s1,"application/x-mms-framed"), iVar4 == 0)) ||
           ((iVar4 = strcasecmp((char *)__s1,"video/x-ms-wmv"), iVar4 == 0 ||
            (iVar4 = strcasecmp((char *)__s1,"video/x-ms-asf"), iVar4 == 0)))) {
          pcVar8 = strstr(acStack2220,"broadcast");
          if (pcVar8 == (char *)0x0) {
            __android_log_print(3,"awplayer","<%s:%u>: =====> ASF Prerecorded\n","MmshStreamingType"
                                ,0x354);
            __s1 = (char **)0x3;
          }
          else {
            pcVar8 = strstr(acStack2220,"playlist");
            if (pcVar8 == (char *)0x0) {
              __android_log_print(3,"awplayer","<%s:%u>: =====> ASF Live stream\n",
                                  "MmshStreamingType",0x34a);
              __s1 = (char **)0x1;
            }
            else {
              __android_log_print(3,"awplayer","<%s:%u>: =====> ASF Playlist stream\n",
                                  "MmshStreamingType",0x34f);
              __s1 = (char **)0x2;
            }
          }
        }
        else {
          if (__s[0xc] < (char *)0x19) {
            iVar4 = strcasecmp((char *)__s1,"audio/x-ms-wax");
            if (((iVar4 == 0) || (iVar4 = strcasecmp((char *)__s1,"audio/x-ms-wma"), iVar4 == 0)) ||
               ((iVar4 = strcasecmp((char *)__s1,"video/x-ms-afs"), iVar4 == 0 ||
                (iVar4 = strcasecmp((char *)__s1,"video/x-ms-wma"), iVar4 == 0)))) {
              __s1 = (char **)0x4;
            }
            else {
              iVar4 = strcasecmp((char *)__s1,"text/plain");
              if (iVar4 == 0) {
                __s1 = (char **)0x5;
              }
              else {
                __s1 = (char **)0x0;
              }
            }
          }
          else {
            pbVar15 = (byte *)__s[0xb];
            if ((pbVar15 == (byte *)0x0) ||
               (((uint)pbVar15[2] << 0x10 | (uint)pbVar15[3] << 0x18 | (uint)*pbVar15 |
                (uint)pbVar15[1] << 8) != 0x75b22630)) {
              iVar4 = strcasecmp((char *)__s1,"text/html");
              if (iVar4 == 0) {
                __s1 = (char **)0x0;
              }
              else {
                __s1 = (char **)0x4;
              }
            }
            else {
              __s1 = (char **)0x5;
            }
          }
        }
      }
      *__ptr = (char *)__s1;
    }
    else {
      if (__s[3] != (char *)0x191) goto LAB_00019a1c;
    }
    switch(*__ptr) {
    case (char *)0x1:
    case (char *)0x2:
    case (char *)0x3:
    case (char *)0x5:
      pcVar8 = __s[0xc];
      if (pcVar8 == (char *)0x0) {
LAB_00019a8e:
        pcVar8 = *__ptr;
        param_2[0x3b] = (char *)(uint)(pcVar8 == (char *)0x2);
        if ((__ptr[1] != (char *)0x1) || (pcVar8 == (char *)0x5)) {
          param_2[7] = local_95c;
          FUN_00018984(__s);
          local_95c = (char *)0x0;
          goto LAB_0001a16c;
        }
        pcVar8 = param_2[0x39];
        if (pcVar8 != (char *)0x0) {
          uVar6 = 0;
          pvVar23 = (void *)0x0;
          local_954 = 0;
          local_950 = (void *)0x0;
          local_918 = "=====> Data follows";
          local_914 = "=====> Transfer complete";
          do {
            sVar21 = FUN_00019510((int)local_95c,&local_8b8,0xc,(int)param_2);
            if ((int)sVar21 < 0) goto LAB_0001a08c;
            if (local_8b6 < 8) {
              printf("****************streamChunck->size=%d\n");
LAB_00019b18:
              uVar20 = 0xffffffff;
            }
            else {
              if (local_8b6 != local_8ae) {
                printf("****************streamChunck->size=%d, streamChunck->sizeConfirm=%d\n");
                goto LAB_00019b18;
              }
              pcVar9 = local_918;
              if (local_8b8 == 0x4424) {
LAB_00019b62:
                puts(pcVar9);
LAB_00019b70:
                uVar20 = local_8b6 + 4;
              }
              else {
                if (local_8b8 < 0x4425) {
                  if (local_8b8 != 0x4324) {
LAB_00019b68:
                    printf("=====> Unknown stream type 0x%x\n");
                    goto LAB_00019b70;
                  }
                  pcVar9 = "=====> Clearing ASF stream configuration!";
                }
                else {
                  pcVar9 = local_914;
                  if (local_8b8 != 0x4524) {
                    if (local_8b8 == 0x4824) {
                      pcVar9 = "=====> ASF header chunk follows";
                      goto LAB_00019b62;
                    }
                    goto LAB_00019b68;
                  }
                }
                puts(pcVar9);
                uVar20 = (uint)local_8b6;
              }
            }
            sVar21 = uVar20 - 0xc;
            if ((int)sVar21 < 0) {
              uVar7 = 0x4d6;
              pcVar14 = "<%s:%u>: ****************here1:MSGTR_MPDEMUX_ASF_ErrorParsingChunkHeader";
LAB_00019bb4:
              __android_log_print(5,"awplayer",pcVar14,"AsfStreamingParseHeader",uVar7);
LAB_0001a06a:
              __dest = pvVar23;
              if (__dest == (void *)0x0) goto LAB_0001a08c;
              __ptr_00 = (uint *)0x0;
              __ptr_01 = (int *)0x0;
              goto LAB_0001a070;
            }
            if (local_8b8 != 0x4824) {
              uVar7 = 0x4db;
              pcVar14 = "<%s:%u>: ***************MSGTR_MPDEMUX_ASF_NoHeaderAtFirstChunk";
              goto LAB_00019bb4;
            }
            sVar19 = sVar21 + local_954;
            __dest = malloc(sVar19);
            if (__dest == (void *)0x0) goto LAB_0001a08c;
            if (local_950 != (void *)0x0) {
              memcpy(__dest,local_950,local_954);
              free(local_950);
            }
            pvVar23 = (void *)(local_954 + (int)__dest);
            sVar10 = FUN_00019510((int)local_95c,pvVar23,sVar21,(int)param_2);
            if ((int)sVar10 < 1) goto LAB_0001a06a;
            if (uVar6 == 0) {
              if ((int)sVar21 < 0x20) goto LAB_0001a06a;
              uVar6 = (uint)*(byte *)((int)pvVar23 + 0x12) << 0x10 |
                      (uint)*(byte *)((int)pvVar23 + 0x13) << 0x18 |
                      (uint)*(byte *)((int)pvVar23 + 0x10) |
                      (uint)*(byte *)((int)pvVar23 + 0x11) << 8;
            }
            local_954 = sVar19;
            local_950 = __dest;
          } while ((int)sVar19 < (int)uVar6);
          iVar4 = MmshFindAsfGuid((int)__dest,&asf_file_header_guid,0x20,sVar19);
          if (iVar4 < 0) {
LAB_00019e60:
            iVar4 = 0x20;
LAB_00019ef8:
            iVar12 = MmshFindAsfGuid((int)__dest,&asf_stream_header_guid,iVar4,sVar19);
            if (-1 < iVar12) {
              iVar4 = iVar12 + 0x38;
              if (iVar4 <= (int)sVar19) {
                iVar22 = (int)__dest + iVar12;
                uVar6 = (uint)*(byte *)(iVar22 + 2) << 0x10 | (uint)*(byte *)(iVar22 + 3) << 0x18 |
                        (uint)*(byte *)((int)__dest + iVar12) | (uint)*(byte *)(iVar22 + 1) << 8;
                if (uVar6 != 0xbc19efc0) goto code_r0x00019e94;
                if (*(void **)(pcVar8 + 0x14) == (void *)0x0) {
                  pvVar23 = malloc(4);
                  *(undefined4 *)(pcVar8 + 0x18) = 1;
                  *(void **)(pcVar8 + 0x14) = pvVar23;
                }
                else {
                  iVar12 = *(int *)(pcVar8 + 0x18);
                  *(int *)(pcVar8 + 0x18) = iVar12 + 1;
                  pvVar23 = realloc(*(void **)(pcVar8 + 0x14),(iVar12 + 1) * 4);
                  *(void **)(pcVar8 + 0x14) = pvVar23;
                }
                iVar11 = *(int *)(pcVar8 + 0x18);
                iVar12 = *(int *)(pcVar8 + 0x14);
                goto LAB_00019ee8;
              }
              goto LAB_0001a1b6;
            }
            sVar10 = *(size_t *)(pcVar8 + 0x18);
            __ptr_01 = (int *)calloc(sVar10,4);
            sVar21 = *(size_t *)(pcVar8 + 0x10);
            __ptr_00 = (uint *)calloc(sVar21,4);
            iVar4 = MmshFindAsfGuid((int)__dest,asf_stream_group_guid,0x20,sVar19);
            if (-1 < iVar4) {
              puVar16 = (ushort *)((int)__dest + iVar4 + 2);
              if ((ushort *)(sVar19 + (int)__dest) < puVar16) goto LAB_0001a070;
              uVar1 = *(undefined *)((int)__dest + iVar4 + 1);
              uVar2 = *(undefined *)((int)__dest + iVar4);
              iVar4 = 0;
              while (iVar4 < (int)(uint)CONCAT11(uVar1,uVar2)) {
                if ((ushort *)(sVar19 + (int)__dest) < puVar16 + 3) goto LAB_0001a070;
                uVar3 = *puVar16;
                iVar12 = 0;
                uVar6 = (uint)*(byte *)(puVar16 + 2) << 0x10 |
                        (uint)*(byte *)((int)puVar16 + 5) << 0x18 | (uint)*(byte *)(puVar16 + 1) |
                        (uint)*(byte *)((int)puVar16 + 3) << 8;
                while (iVar12 < (int)sVar10) {
                  if ((uint)uVar3 == *(uint *)(*(int *)(pcVar8 + 0x14) + iVar12 * 4)) {
                    __ptr_01[iVar12] = uVar6;
                    break;
                  }
                  iVar12 = iVar12 + 1;
                }
                iVar12 = 0;
                while (iVar12 < (int)sVar21) {
                  if ((uint)uVar3 == *(uint *)(*(int *)(pcVar8 + 0xc) + iVar12 * 4)) {
                    __ptr_00[iVar12] = uVar6;
                    break;
                  }
                  iVar12 = iVar12 + 1;
                }
                iVar4 = iVar4 + 1;
                puVar16 = puVar16 + 3;
              }
            }
            free(__dest);
            uVar20 = *(uint *)(pcVar8 + 0x10);
            uVar6 = uVar20;
            if (uVar20 != 0) {
              iVar4 = 0;
              puVar18 = __ptr_00;
              uVar6 = *__ptr_00;
              while (iVar4 < (int)uVar20) {
                puVar17 = puVar18 + 1;
                uVar13 = *puVar18;
                iVar4 = iVar4 + 1;
                puVar18 = puVar17;
                if ((int)uVar13 <= (int)uVar6) {
                  uVar6 = uVar13;
                }
              }
              iVar4 = MmshGetMaxIdx(*(int *)(pcVar8 + 0x18),__ptr_01,0x7fffffff - uVar6);
              uVar6 = uVar6 & ~(iVar4 >> 0x1f);
            }
            uVar6 = MmshGetMaxIdx(*(int *)(pcVar8 + 0x18),__ptr_01,0x7fffffff - uVar6);
            if ((int)uVar6 < 0) {
              iVar4 = 0;
            }
            else {
              iVar4 = __ptr_01[uVar6];
            }
            uVar20 = MmshGetMaxIdx(uVar20,(int *)__ptr_00,0x7fffffff - iVar4);
            free(__ptr_01);
            free(__ptr_00);
            if (-1 < (int)(uVar20 & uVar6)) {
              if (-1 < (int)uVar20) {
                iVar4 = *(int *)(*(int *)(pcVar8 + 0xc) + uVar20 * 4);
              }
              if (-1 < (int)uVar20) {
                *(int *)(pcVar8 + 0x1c) = iVar4;
              }
              if (-1 < (int)uVar6) {
                iVar4 = *(int *)(*(int *)(pcVar8 + 0x14) + uVar6 * 4);
              }
              if (-1 < (int)uVar6) {
                *(int *)(pcVar8 + 0x20) = iVar4;
              }
              if ((__ptr[4] == (char *)0x0) && (__ptr[6] == (char *)0x0))
              goto switchD_0001a196_caseD_6;
              __ptr[1] = __ptr[1] + 1;
              goto LAB_000196fe;
            }
          }
          else {
            if (iVar4 + 0x50 <= (int)sVar19) {
              iVar4 = iVar4 + (int)__dest;
              *(uint *)(pcVar8 + 8) =
                   (uint)*(byte *)(iVar4 + 0x48) |
                   (uint)*(byte *)(iVar4 + 0x4a) << 0x10 | (uint)*(byte *)(iVar4 + 0x4b) << 0x18 |
                   (uint)*(byte *)(iVar4 + 0x49) << 8;
              *(ulonglong *)(param_2 + 0x40) =
                   ((ulonglong)*(byte *)(iVar4 + 0x17) << 0x18 |
                   (ulonglong)*(byte *)(iVar4 + 0x16) << 0x10) << 0x20 |
                   (ulonglong)*(byte *)(iVar4 + 0x10) | (ulonglong)*(byte *)(iVar4 + 0x15) << 0x28 |
                   (ulonglong)*(byte *)(iVar4 + 0x14) << 0x20 |
                   (ulonglong)*(byte *)(iVar4 + 0x13) << 0x18 |
                   (ulonglong)*(byte *)(iVar4 + 0x12) << 0x10 |
                   (ulonglong)*(byte *)(iVar4 + 0x11) << 8;
              uVar24 = __aeabi_uldivmod((uint)*(byte *)(iVar4 + 0x28) |
                                        (uint)*(byte *)(iVar4 + 0x2b) << 0x18 |
                                        (uint)*(byte *)(iVar4 + 0x2a) << 0x10 |
                                        (uint)*(byte *)(iVar4 + 0x29) << 8,
                                        (uint)*(byte *)(iVar4 + 0x2f) << 0x18 |
                                        (uint)*(byte *)(iVar4 + 0x2e) << 0x10 |
                                        (uint)(((ulonglong)*(byte *)(iVar4 + 0x2d) << 0x28) >> 0x20)
                                        | (uint)*(byte *)(iVar4 + 0x2c),10000,0);
              param_2[0x42] = (char *)uVar24;
              param_2[0x43] = (char *)((ulonglong)uVar24 >> 0x20);
              goto LAB_00019e60;
            }
LAB_0001a1b6:
            __ptr_00 = (uint *)0x0;
            __ptr_01 = (int *)0x0;
LAB_0001a070:
            free(__dest);
            if (__ptr_01 != (int *)0x0) {
              free(__ptr_01);
            }
            if (__ptr_00 != (uint *)0x0) {
              free(__ptr_00);
            }
          }
        }
LAB_0001a08c:
        uVar7 = 0x67b;
        pcVar14 = "<%s:%u>: ****** streaming parse header error!";
      }
      else {
        __src = __s[0xb];
        param_2[0x3c] = (char *)0x80000;
        pcVar9 = (char *)malloc(0x80000);
        param_2[0x3d] = pcVar9;
        if (pcVar9 == (char *)0x0) {
          param_2[0x3c] = pcVar8;
          pcVar9 = (char *)malloc((size_t)pcVar8);
          param_2[0x3d] = pcVar9;
          if (pcVar9 != (char *)0x0) goto LAB_00019a5e;
        }
        else {
LAB_00019a5e:
          memcpy(param_2[0x3d],__src,(size_t)pcVar8);
          param_2[0x3e] = pcVar8;
          param_2[0x3f] = (char *)0x0;
          if (-1 < (int)pcVar8) goto LAB_00019a8e;
        }
        uVar7 = 0x667;
        pcVar14 = "<%s:%u>: ***** streaming bufferize error!";
      }
      break;
    case (char *)0x4:
      uVar7 = 0x68c;
      pcVar14 = "<%s:%u>: -- ASF_TYPE_REDIRECTOR";
      break;
    case (char *)0x6:
      iVar4 = CdxMmshAuthenticate(__s,(int)pcVar14,&local_8bc);
      if (-1 < iVar4) goto code_r0x0001a0de;
    default:
      goto switchD_0001a196_caseD_6;
    }
LAB_0001a0c6:
    __android_log_print(3,"awplayer",pcVar14,"MmshStreamingStart",uVar7,pcVar25);
switchD_0001a196_caseD_6:
    __android_log_print(3,"awplayer","<%s:%u>: MmshStreamingStart  error","MmshStreamingStart",0x6a6
                        ,pcVar25);
    if (0 < (int)param_2[0x1b]) {
      close((int)param_2[0x1b]);
    }
    param_2[7] = (char *)0xffffffff;
    FUN_00018984(__s);
    free(__ptr);
    local_95c = (char *)0xffffffff;
    param_2[0x39] = (char *)0x0;
  }
LAB_0001a16c:
  if (local_2c == __stack_chk_guard) {
    return local_95c;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
code_r0x0001a0de:
  *__ptr = (char *)0x0;
  goto LAB_000196fe;
code_r0x00019e94:
  if (uVar6 == 0xf8699e40) {
    if (*(void **)(pcVar8 + 0xc) == (void *)0x0) {
      pvVar23 = malloc(4);
      *(undefined4 *)(pcVar8 + 0x10) = 1;
      *(void **)(pcVar8 + 0xc) = pvVar23;
    }
    else {
      iVar12 = *(int *)(pcVar8 + 0x10);
      *(int *)(pcVar8 + 0x10) = iVar12 + 1;
      pvVar23 = realloc(*(void **)(pcVar8 + 0xc),(iVar12 + 1) * 4);
      *(void **)(pcVar8 + 0xc) = pvVar23;
    }
    iVar11 = *(int *)(pcVar8 + 0x10);
    iVar12 = *(int *)(pcVar8 + 0xc);
LAB_00019ee8:
    *(uint *)(iVar12 + (iVar11 + -1) * 4) = (uint)*(ushort *)(iVar22 + 0x30);
  }
  goto LAB_00019ef8;
}



// WARNING: Could not reconcile some variable overlaps

uint MmshStreamingReadFunc(int param_1,int param_2)

{
  int iVar1;
  size_t sVar2;
  size_t sVar3;
  int iVar4;
  void *__src;
  size_t __n;
  uint uVar5;
  uint uVar6;
  void *__dest;
  int iVar7;
  uint uVar8;
  uint uVar9;
  undefined8 uVar10;
  uint local_44;
  ushort local_40;
  ushort local_3e;
  uint local_3c;
  undefined2 local_38;
  ushort local_36;
  undefined4 local_34;
  undefined4 local_30;
  int local_2c;
  
  local_2c = __stack_chk_guard;
  iVar7 = *(int *)(param_1 + 0x6c);
  __dest = *(void **)(param_1 + 0x50);
  iVar1 = *(int *)(param_1 + 0xe4);
  if (0xffff < param_2 || param_2 < 1) {
    param_2 = 0x10000;
  }
  local_44 = 0;
  local_34 = 0;
  local_30 = 0;
LAB_0001a246:
  do {
    if (*(int *)(param_1 + 0x74) == 1) goto LAB_0001a68c;
    memset(&local_40,0,0xc);
    sVar2 = FUN_00019510(iVar7,&local_34,4,param_1);
    if ((int)sVar2 < 1) goto LAB_0001a68c;
    sVar2 = (size_t)local_34._2_2_;
    local_3e = local_34._2_2_;
    if (7 < sVar2) {
      sVar2 = 8;
    }
    local_40 = (ushort)local_34;
    sVar3 = FUN_00019510(iVar7,&local_34,sVar2,param_1);
    if ((int)sVar3 < 1) goto LAB_0001a68c;
    local_3c = (local_34 >> 0x10 & 0xff) << 0x10 | local_34 & 0xff000000 | local_34 & 0xff |
               (local_34 >> 8 & 0xff) << 8;
    local_38 = (undefined2)local_30;
    if (sVar2 == 8) {
      local_36 = local_30._2_2_;
    }
    else {
      local_36 = 8;
    }
    iVar4 = AsfStreamingType(&local_40,&local_44);
    if (iVar4 == 1) {
      if (*(int *)(param_1 + 0x18) == 0) {
        __android_log_print(3,"awplayer","<%s:%u>: --- CDX_IO_STATE_CLEAR, buf_pos = %llx",
                            "MmshStreamingRead",0x6f0);
        *(undefined4 *)(param_1 + 0x18) = 4;
        pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xd4));
        *(undefined4 *)(param_1 + 0x11c) = *(undefined4 *)(param_1 + 0x50);
        *(undefined4 *)(param_1 + 0x120) = *(undefined4 *)(param_1 + 0x50);
        *(undefined4 *)(param_1 + 0x128) = *(undefined4 *)(param_1 + 0x28);
        *(undefined4 *)(param_1 + 300) = *(undefined4 *)(param_1 + 0x2c);
        pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0xd4));
      }
    }
    else {
      if (iVar4 == 2) {
        __android_log_print(3,"awplayer","<%s:%u>: --- Header Chunk, buf_pos = %llx",
                            "MmshStreamingRead",0x6fb);
      }
    }
    uVar8 = local_44;
    sVar2 = local_36 - 8;
    uVar9 = sVar2;
    if (local_40 != 0x4824) {
      if ((local_44 == 0) && (uVar9 = *(size_t *)(iVar1 + 8), (int)uVar9 < (int)sVar2)) {
        __android_log_print(3,"awplayer",
                                                        
                            "<%s:%u>: **streamTYpe:%d, asfHttpCtrl->packetSize<%d> is smaller than the chunkSize<%d>, error."
                            ,"MmshStreamingRead",0x706,iVar4,uVar9,sVar2);
        goto LAB_0001a690;
      }
      if (local_40 == 0x4524) {
LAB_0001a6a2:
        uVar9 = 0;
        goto LAB_0001a646;
      }
    }
    while( true ) {
      if (*(int *)(param_1 + 0x74) == 1) goto LAB_0001a6a2;
      if ((int)uVar9 < *(int *)(param_1 + 0x40) - *(int *)(param_1 + 0x5c)) break;
      usleep(40000);
    }
    if ((int)uVar9 <= param_2) {
      sVar3 = FUN_00019510(iVar7,__dest,sVar2,param_1);
      if ((int)sVar3 < 1) {
        __android_log_print(3,"awplayer","<%s:%u>: -- 22 AsfReadWrapper error","MmshStreamingRead",
                            0x74d);
        goto LAB_0001a68c;
      }
      if (local_44 != 1) {
        memset((void *)((int)__dest + sVar2),0,uVar9 - sVar2);
        goto LAB_0001a4e6;
      }
      goto LAB_0001a246;
    }
    uVar8 = (uint)(0x7fff < *(int *)(iVar1 + 8));
    if (0x7fff < (int)sVar2) {
      uVar8 = 1;
    }
    if (uVar8 != 0) {
      __android_log_print(3,"awplayer",
                          "<%s:%u>: ******asfHttpCtrl->packetSize:%d chunkSize:%d > 32*1024.",
                          "MmshStreamingRead",0x724,*(int *)(iVar1 + 8),sVar2);
      goto LAB_0001a68c;
    }
    sVar3 = FUN_00019510(iVar7,*(void **)(param_1 + 100),sVar2,param_1);
    if ((int)sVar3 < 1) {
      __android_log_print(3,"awplayer","<%s:%u>: --- AsfReadWrapper error","MmshStreamingRead",0x729
                         );
      goto LAB_0001a690;
    }
  } while (local_44 == 1);
  memset((void *)(*(int *)(param_1 + 100) + sVar2),0,uVar9 - sVar2);
  uVar6 = *(uint *)(param_1 + 0x50);
  if (uVar6 < *(uint *)(param_1 + 0x54)) {
    if ((int)(*(uint *)(param_1 + 0x54) - uVar6) < (int)uVar9) goto LAB_0001a690;
LAB_0001a484:
    __src = *(void **)(param_1 + 100);
    __n = uVar9;
  }
  else {
    sVar3 = (*(int *)(param_1 + 0x58) + 1) - uVar6;
    if ((int)uVar9 <= (int)sVar3) goto LAB_0001a484;
    memcpy(__dest,*(void **)(param_1 + 100),sVar3);
    __dest = *(void **)(param_1 + 0x48);
    __n = uVar9 - sVar3;
    __src = (void *)(*(int *)(param_1 + 100) + sVar3);
  }
  memcpy(__dest,__src,__n);
  __dest = *(void **)(param_1 + 100);
LAB_0001a4e6:
  if (local_40 == 0x4824) {
    iVar7 = MmshFindAsfGuid((int)__dest,&asf_file_header_guid,0,sVar2);
    if (iVar7 < 0) {
      __android_log_print(5,"awplayer","<%s:%u>: can not find File_Properties_Object",
                          "MmshStreamingRead",0x767);
    }
    else {
      iVar7 = (int)__dest + iVar7;
      *(uint *)(iVar1 + 8) =
           (uint)*(byte *)(iVar7 + 0x4a) << 0x10 | (uint)*(byte *)(iVar7 + 0x4b) << 0x18 |
           (uint)*(byte *)(iVar7 + 0x48) | (uint)*(byte *)(iVar7 + 0x49) << 8;
      *(ulonglong *)(param_1 + 0x100) =
           (ulonglong)
           ((uint)*(byte *)(iVar7 + 0x17) << 0x18 | (uint)*(byte *)(iVar7 + 0x16) << 0x10) << 0x20 |
           (ulonglong)*(byte *)(iVar7 + 0x10) | (ulonglong)*(byte *)(iVar7 + 0x15) << 0x28 |
           (ulonglong)*(byte *)(iVar7 + 0x14) << 0x20 |
           (ulonglong)*(byte *)(iVar7 + 0x13) * 0x1000000 |
           (ulonglong)*(byte *)(iVar7 + 0x12) * 0x10000 | (ulonglong)*(byte *)(iVar7 + 0x11) * 0x100
      ;
      uVar10 = __aeabi_uldivmod((uint)*(byte *)(iVar7 + 0x28) |
                                (uint)*(byte *)(iVar7 + 0x2b) * 0x1000000 |
                                (uint)*(byte *)(iVar7 + 0x2a) * 0x10000 |
                                (uint)*(byte *)(iVar7 + 0x29) * 0x100,
                                (uint)(((ulonglong)*(byte *)(iVar7 + 0x2f) << 0x38) >> 0x20) |
                                (uint)*(byte *)(iVar7 + 0x2e) << 0x10 |
                                (uint)(((ulonglong)*(byte *)(iVar7 + 0x2d) << 0x28) >> 0x20) |
                                (uint)*(byte *)(iVar7 + 0x2c),10000,0);
      *(int *)(param_1 + 0x108) = (int)uVar10;
      *(int *)(param_1 + 0x10c) = (int)((ulonglong)uVar10 >> 0x20);
    }
  }
  if ((int)uVar9 < 0) {
LAB_0001a68c:
    uVar8 = 0;
  }
  else {
LAB_0001a646:
    uVar8 = 1;
    pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xd4));
    uVar5 = *(int *)(param_1 + 0x50) + uVar9;
    *(uint *)(param_1 + 0x50) = uVar5;
    uVar6 = uVar5;
    if (*(uint *)(param_1 + 0x58) < uVar5) {
      uVar6 = uVar5 - *(int *)(param_1 + 0x40);
    }
    if (*(uint *)(param_1 + 0x58) < uVar5) {
      *(uint *)(param_1 + 0x50) = uVar6;
    }
    *(uint *)(param_1 + 0x60) = *(int *)(param_1 + 0x60) + uVar9;
    uVar6 = *(uint *)(param_1 + 0x28);
    *(uint *)(param_1 + 0x28) = uVar6 + uVar9;
    *(uint *)(param_1 + 0x2c) =
         *(int *)(param_1 + 0x2c) + ((int)uVar9 >> 0x1f) + (uint)CARRY4(uVar6,uVar9);
    *(uint *)(param_1 + 0x5c) = *(int *)(param_1 + 0x5c) + uVar9;
    pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0xd4));
  }
LAB_0001a690:
  if (local_2c == __stack_chk_guard) {
    return uVar8;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



bool MmshNopStreamingReadFunc(int param_1,size_t param_2)

{
  size_t sVar1;
  uint uVar2;
  
  if (0xffff < (int)param_2 || (int)param_2 < 1) {
    param_2 = 0x10000;
  }
  sVar1 = NopStreamingRead(*(int *)(param_1 + 0x1c),*(void **)(param_1 + 0x50),param_2,param_1);
  pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xd4));
  uVar2 = *(int *)(param_1 + 0x50) + sVar1;
  *(uint *)(param_1 + 0x50) = uVar2;
  if (*(uint *)(param_1 + 0x58) < uVar2) {
    *(uint *)(param_1 + 0x50) = uVar2 + ~(*(uint *)(param_1 + 0x58) - *(int *)(param_1 + 0x48));
  }
  *(size_t *)(param_1 + 0x60) = *(int *)(param_1 + 0x60) + sVar1;
  uVar2 = *(uint *)(param_1 + 0x28);
  *(uint *)(param_1 + 0x28) = uVar2 + sVar1;
  *(uint *)(param_1 + 0x2c) =
       *(int *)(param_1 + 0x2c) + ((int)sVar1 >> 0x1f) + (uint)CARRY4(uVar2,sVar1);
  *(size_t *)(param_1 + 0x5c) = *(int *)(param_1 + 0x5c) + sVar1;
  pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0xd4));
  return sVar1 == param_2;
}



undefined4 CdxNopStreamingSeek(char **param_1)

{
  int iVar1;
  char **ppcVar2;
  ssize_t sVar3;
  uint uVar4;
  char *pcVar5;
  undefined4 uVar6;
  char *pcVar7;
  char *__ptr;
  undefined auStack2084 [2048];
  int local_24;
  
  pcVar7 = param_1[0x11];
  __ptr = param_1[0x39];
  local_24 = __stack_chk_guard;
  if (0 < (int)param_1[0x1b]) {
    close((int)param_1[0x1b]);
  }
  iVar1 = strcasecmp(*(char **)(pcVar7 + 4),"http_proxy");
  if (iVar1 == 0) {
    if (*(int *)(pcVar7 + 0x10) == 0) {
      uVar6 = 0x1f90;
LAB_0001a7d8:
      *(undefined4 *)(pcVar7 + 0x10) = uVar6;
    }
  }
  else {
    if (*(int *)(pcVar7 + 0x10) == 0) {
      uVar6 = 0x50;
      goto LAB_0001a7d8;
    }
  }
  pcVar7 = (char *)Connect2Server((int)param_1,*(char **)(pcVar7 + 8),*(uint *)(pcVar7 + 0x10),1);
  if ((int)pcVar7 < 1) {
    printf("*********************connect the stream fd=%d\n",pcVar7);
  }
  iVar1 = 0;
  ppcVar2 = MmshRequest(param_1,0,0,param_1[0xb],(int)param_1[10],(int)param_1[0xb]);
  while (iVar1 < (int)ppcVar2[0xe]) {
    sVar3 = send((int)pcVar7,ppcVar2[0xd] + iVar1,(size_t)(ppcVar2[0xe] + -iVar1),0x4000);
    if (sVar3 < 0) goto LAB_0001a86c;
    iVar1 = iVar1 + sVar3;
    usleep(30000);
  }
  do {
    uVar4 = MmsGetNetworkData((int)param_1,(int)pcVar7,auStack2084,0x800);
    if ((int)uVar4 < 1) goto LAB_0001a86c;
    FUN_00018a00((uint)ppcVar2,auStack2084,uVar4);
    pcVar5 = FUN_00018a98((int)ppcVar2);
  } while (pcVar5 == (char *)0x0);
  ppcVar2[0xd][(int)ppcVar2[0xe]] = '\0';
  param_1[7] = pcVar7;
  uVar6 = 0;
  FUN_00018984(ppcVar2);
LAB_0001a88a:
  if (local_24 != __stack_chk_guard) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return uVar6;
LAB_0001a86c:
  uVar6 = 0xffffffff;
  param_1[7] = (char *)0xffffffff;
  FUN_00018984(ppcVar2);
  if (__ptr != (char *)0x0) {
    free(__ptr);
    param_1[0x39] = (char *)0x0;
  }
  goto LAB_0001a88a;
}



// WARNING: Could not reconcile some variable overlaps

undefined4 CdxMmshStreamingSeek(char **param_1)

{
  bool bVar1;
  int iVar2;
  char **ppcVar3;
  ssize_t sVar4;
  uint uVar5;
  size_t sVar6;
  undefined4 uVar7;
  char *pcVar8;
  char *pcVar9;
  char *__ptr;
  size_t sVar10;
  undefined8 uVar11;
  undefined8 uVar12;
  int local_848;
  ushort local_844 [2];
  uint local_840;
  undefined2 local_83c;
  ushort local_83a;
  undefined2 local_838;
  byte local_836;
  byte local_835;
  undefined2 local_834;
  ushort local_832;
  undefined auStack2092 [2048];
  int local_2c;
  
  local_848 = 0;
  local_2c = __stack_chk_guard;
  memset(&local_838,0,0xc);
  pcVar9 = param_1[0x11];
  __ptr = param_1[0x39];
  if (0 < (int)param_1[0x1b]) {
    close((int)param_1[0x1b]);
  }
  iVar2 = strcasecmp(*(char **)(pcVar9 + 4),"http_proxy");
  if (iVar2 == 0) {
    if (*(int *)(pcVar9 + 0x10) == 0) {
      uVar7 = 0x1f90;
LAB_0001a90c:
      *(undefined4 *)(pcVar9 + 0x10) = uVar7;
    }
  }
  else {
    if (*(int *)(pcVar9 + 0x10) == 0) {
      uVar7 = 0x50;
      goto LAB_0001a90c;
    }
  }
  pcVar8 = (char *)0x1;
  pcVar9 = (char *)Connect2Server((int)param_1,*(char **)(pcVar9 + 8),*(uint *)(pcVar9 + 0x10),1);
  if ((int)pcVar9 < 1) {
    pcVar8 = "CdxMmshStreamingSeek";
    __android_log_print(5,"awplayer","<%s:%u>: *********************connect the stream fd=%d\n",
                        "CdxMmshStreamingSeek",0x838,pcVar9);
  }
  ppcVar3 = MmshRequest(param_1,param_1[0xb],param_1[10],pcVar8,0,0);
  iVar2 = 0;
  while (iVar2 < (int)ppcVar3[0xe]) {
    sVar4 = send((int)pcVar9,ppcVar3[0xd] + iVar2,(size_t)(ppcVar3[0xe] + -iVar2),0x4000);
    if (sVar4 < 0) goto LAB_0001ad10;
    iVar2 = iVar2 + sVar4;
    usleep(30000);
  }
  do {
    uVar5 = MmsGetNetworkData((int)param_1,(int)pcVar9,auStack2092,0x800);
    if ((int)uVar5 < 1) goto LAB_0001ad10;
    FUN_00018a00((uint)ppcVar3,auStack2092,uVar5);
    pcVar8 = FUN_00018a98((int)ppcVar3);
  } while (pcVar8 == (char *)0x0);
  ppcVar3[0xd][(int)ppcVar3[0xe]] = '\0';
  param_1[7] = pcVar9;
  FUN_00018984(ppcVar3);
  bVar1 = false;
LAB_0001a9ba:
  if (param_1[0x1d] != (char *)0x1) {
    memset(local_844,0,0xc);
    sVar6 = FUN_00019510((int)pcVar9,&local_838,4,(int)param_1);
    if (0 < (int)sVar6) {
      local_844[0] = local_838;
      uVar12 = VectorAdd(*(undefined8 *)(param_1 + 10),4,8);
      *(undefined8 *)(param_1 + 10) = uVar12;
      uVar5 = (uint)CONCAT11(local_835,local_836);
      uVar12 = VectorAdd(*(undefined8 *)(param_1 + 0xe),4,8);
      *(undefined8 *)(param_1 + 0xe) = uVar12;
      if (!bVar1) goto code_r0x0001aa1e;
      goto LAB_0001aa3e;
    }
    goto LAB_0001ad34;
  }
LAB_0001ad30:
  uVar7 = 0;
LAB_0001ad3c:
  if (local_2c == __stack_chk_guard) {
    return uVar7;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
code_r0x0001aa1e:
  if (local_838 == 0x4424 || local_838 == 0x4824) {
    bVar1 = true;
LAB_0001aa3e:
    if (7 < uVar5) {
      uVar5 = 8;
    }
    sVar6 = FUN_00019510((int)pcVar9,&local_838,uVar5,(int)param_1);
    if ((int)sVar6 < 1) {
LAB_0001ad34:
      uVar7 = 0xffffffff;
      goto LAB_0001ad3c;
    }
    local_840 = (uint)local_836 << 0x10 | (uint)local_835 << 0x18 | (uint)(byte)local_838 |
                (uint)local_838._1_1_ << 8;
    local_83c = local_834;
    if (uVar5 == 8) {
      local_83a = local_832;
    }
    else {
      local_83a = 8;
    }
    AsfStreamingType(local_844,&local_848);
    pcVar8 = param_1[0x14];
    sVar10 = local_83a - 8;
    uVar12 = VectorAdd(*(undefined8 *)(param_1 + 10),(longlong)(int)uVar5,8);
    *(undefined8 *)(param_1 + 10) = uVar12;
    uVar12 = VectorAdd(*(undefined8 *)(param_1 + 0xe),(longlong)(int)uVar5,8);
    *(undefined8 *)(param_1 + 0xe) = uVar12;
    sVar6 = FUN_00019510((int)pcVar9,pcVar8,sVar10,(int)param_1);
    if ((int)sVar6 < 1) goto LAB_0001ad10;
    if (local_844[0] == 0x4824) {
      iVar2 = MmshFindAsfGuid((int)pcVar8,&asf_file_header_guid,0,sVar10);
      if (-1 < iVar2) {
        pcVar8 = pcVar8 + iVar2;
        *(uint *)(__ptr + 8) =
             (uint)(byte)pcVar8[0x48] |
             (uint)(byte)pcVar8[0x4a] << 0x10 | (uint)(byte)pcVar8[0x4b] << 0x18 |
             (uint)(byte)pcVar8[0x49] << 8;
        *(ulonglong *)(param_1 + 0x40) =
             ((ulonglong)(byte)pcVar8[0x17] << 0x18 | (ulonglong)(byte)pcVar8[0x16] << 0x10) << 0x20
             | (ulonglong)(byte)pcVar8[0x10] | (ulonglong)(byte)pcVar8[0x15] << 0x28 |
             (ulonglong)(byte)pcVar8[0x14] << 0x20 | (ulonglong)(byte)pcVar8[0x13] << 0x18 |
             (ulonglong)(byte)pcVar8[0x12] << 0x10 | (ulonglong)(byte)pcVar8[0x11] << 8;
        uVar12 = __aeabi_uldivmod((uint)(byte)pcVar8[0x28] | (uint)(byte)pcVar8[0x2b] << 0x18 |
                                  (uint)(byte)pcVar8[0x2a] << 0x10 | (uint)(byte)pcVar8[0x29] << 8,
                                  (uint)(byte)pcVar8[0x2f] << 0x18 |
                                  (uint)(byte)pcVar8[0x2e] << 0x10 |
                                  (uint)(((ulonglong)(byte)pcVar8[0x2d] << 0x28) >> 0x20) |
                                  (uint)(byte)pcVar8[0x2c],10000,0);
        param_1[0x42] = (char *)uVar12;
        param_1[0x43] = (char *)((ulonglong)uVar12 >> 0x20);
      }
      uVar12 = VectorAdd(*(undefined8 *)(param_1 + 10),(longlong)(int)sVar10,8);
      uVar11 = VectorAdd(*(undefined8 *)(param_1 + 0xe),(longlong)(int)sVar10,8);
      *(undefined8 *)(param_1 + 10) = uVar12;
    }
    else {
      if (local_848 != 1) {
        pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0x35));
        memset(pcVar8 + sVar10,0,*(int *)(__ptr + 8) - sVar10);
        pcVar8 = param_1[0x14] + *(int *)(__ptr + 8);
        param_1[0x14] = pcVar8;
        pcVar9 = pcVar8;
        if (param_1[0x16] < pcVar8) {
          pcVar9 = pcVar8 + -(int)param_1[0x10];
        }
        if (param_1[0x16] < pcVar8) {
          param_1[0x14] = pcVar9;
        }
        param_1[0x18] = param_1[0x18] + *(int *)(__ptr + 8);
        pcVar9 = param_1[10];
        uVar5 = *(uint *)(__ptr + 8);
        param_1[10] = pcVar9 + uVar5;
        param_1[0xb] = param_1[0xb] + ((int)uVar5 >> 0x1f) + (uint)CARRY4((uint)pcVar9,uVar5);
        param_1[0x17] = param_1[0x17] + *(int *)(__ptr + 8);
        pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0x35));
        goto LAB_0001ad30;
      }
      uVar11 = VectorAdd(*(undefined8 *)(param_1 + 0xe),(longlong)(int)sVar10,8);
      uVar12 = VectorAdd(*(undefined8 *)(param_1 + 10),(longlong)(int)sVar10,8);
      *(undefined8 *)(param_1 + 10) = uVar12;
    }
    *(undefined8 *)(param_1 + 0xe) = uVar11;
  }
  goto LAB_0001a9ba;
LAB_0001ad10:
  param_1[7] = (char *)0xffffffff;
  FUN_00018984(ppcVar3);
  if (__ptr != (char *)0x0) {
    free(__ptr);
    param_1[0x39] = (char *)0x0;
  }
  uVar7 = 0xffffffff;
  goto LAB_0001ad3c;
}



void FUN_0001ad58(undefined4 *param_1)

{
  char *pcVar1;
  char *pcVar2;
  char *pcVar3;
  undefined4 uVar4;
  
  if (param_1 == (undefined4 *)0x0) {
    pcVar1 = "!(stream)";
    uVar4 = 0x154;
    pcVar3 = "stream";
  }
  else {
    pcVar2 = (char *)*param_1;
    if (pcVar2 != (char *)0x0) goto LAB_0001ad9c;
    pcVar1 = "!(stream->ops)";
    uVar4 = 0x155;
    pcVar3 = "stream->ops";
  }
  while( true ) {
    pcVar2 = "CdxStreamRead";
    __android_log_assert
              (pcVar1,"awplayer","<%s:%d>CDX_CHECK(%s) failed.","CdxStreamRead",uVar4,pcVar3);
LAB_0001ad9c:
    if (*(code **)(pcVar2 + 8) != (code *)0x0) break;
    pcVar1 = "!(stream->ops->read)";
    uVar4 = 0x156;
    pcVar3 = "stream->ops->read";
  }
  (**(code **)(pcVar2 + 8))();
  return;
}



// WARNING: Could not reconcile some variable overlaps

undefined4 aw_mms_http_streaming_start(char **param_1,int param_2)

{
  undefined uVar1;
  undefined uVar2;
  ushort uVar3;
  undefined4 *puVar4;
  int iVar5;
  undefined4 uVar6;
  char *pcVar7;
  uint *puVar8;
  void *pvVar9;
  int iVar10;
  int *__ptr;
  uint uVar11;
  uint uVar12;
  ushort *puVar13;
  uint *puVar14;
  uint *puVar15;
  undefined *puVar16;
  int iVar17;
  ushort *puVar18;
  uint uVar19;
  int iVar20;
  undefined8 uVar21;
  undefined4 local_74;
  undefined **local_70;
  uint local_6c;
  uint uStack104;
  undefined4 uStack100;
  undefined *local_60;
  undefined *puStack92;
  undefined *puStack88;
  undefined *puStack84;
  undefined *local_50;
  undefined *puStack76;
  undefined *puStack72;
  undefined *puStack68;
  undefined *local_40;
  undefined *puStack60;
  undefined *puStack56;
  undefined *puStack52;
  undefined *local_30;
  undefined *puStack44;
  
  puVar4 = (undefined4 *)malloc(0x24);
  if (puVar4 == (undefined4 *)0x0) {
    return 0xffffffff;
  }
  *puVar4 = 0;
  puVar4[1] = 1;
  puVar4[3] = 0;
  puVar4[5] = 0;
  puVar4[4] = 0;
  puVar4[6] = 0;
  *(undefined4 **)(param_2 + 0xe4) = puVar4;
  local_60 = PTR_s_Accept_00023040;
  puStack92 = PTR_DAT_00023044;
  puStack88 = PTR_s_User_Agent_00023048;
  puStack84 = PTR_s_NSPlayer_4_1_0_3856_0002304c;
  local_50 = PTR_s_Pragma_00023050;
  puStack76 = PTR_s_xClientGUID__c77e7400_738a_11d2__00023054;
  puStack72 = PTR_s_Pragma_00023058;
  puStack68 = PTR_s_no_cache_rate_1_000000_stream_ti_0002305c;
  local_40 = PTR_s_Pragma_00023060;
  puStack60 = PTR_s__xPlayStrm_1_00023064;
  puStack56 = PTR_s_Pragma_00023068;
  puStack52 = PTR_s_stream_switch_entry_ffff_1_0_fff_0002306c;
  local_30 = PTR_s_Pragma_00023070;
  puStack44 = PTR_s_stream_switch_count_2_00023074;
  param_1[1] = (char *)&local_74;
  local_70 = &local_60;
  local_74 = 7;
  iVar5 = CdxStreamOpen(param_1,(pthread_mutex_t *)0x0,(int *)(param_2 + 0x74),
                        (undefined **)(param_2 + 0xe8),(undefined4 *)0x0);
  if (iVar5 < 0) {
    uVar6 = 0x42;
    puVar16 = &DAT_00020377;
  }
  else {
    iVar5 = FUN_0001ad58(*(undefined4 **)(param_2 + 0xe8));
    if (0xb < iVar5) {
      pcVar7 = (char *)(local_6c >> 0x10);
      if ((pcVar7 < (char *)0x8) || ((char *)(uint)uStack100._2_2_ != pcVar7)) {
        puVar16 = &DAT_000203e0;
        uVar6 = 0x4e;
      }
      else {
        if ((short)local_6c != 0x4824) {
          uVar6 = 0x53;
          puVar16 = &DAT_00020426;
          goto LAB_0001af08;
        }
        pcVar7 = (char *)(uint)uStack100._2_2_ + 4;
        *(char **)(param_2 + 0x114) = pcVar7;
        puVar8 = (uint *)malloc((size_t)pcVar7);
        *(undefined4 *)(param_2 + 0x118) = 0;
        *(uint **)(param_2 + 0x110) = puVar8;
        *puVar8 = local_6c;
        puVar8[1] = uStack104;
        puVar8[2] = uStack100;
        if (puVar8 == (uint *)0x0) {
          return 0xffffffff;
        }
        iVar5 = FUN_0001ad58(*(undefined4 **)(param_2 + 0xe8));
        if (-1 < iVar5) {
          if (iVar5 < *(int *)(param_2 + 0x114)) {
            __android_log_print(5,"awplayer",
                                "<%s:%u>: ****<%s, %d>******the data red is not enough.\n",
                                "aw_mms_http_streaming_start",0x66,
                                                                
                                "/home/zhangjingzhou/sdk/v3-cdr-ips2.0-0104/CamCedarX/LIBRARY/DEMUX/STREAM/mms/CdxMmsHttpStream.c"
                                ,0x66);
          }
          iVar5 = MmshFindAsfGuid(*(int *)(param_2 + 0x110),&asf_file_header_guid,0x20,
                                  *(int *)(param_2 + 0x114));
          if (-1 < iVar5) {
            if (*(int *)(param_2 + 0x114) < iVar5 + 0x50) {
              return 0xffffffff;
            }
            iVar5 = *(int *)(param_2 + 0x110) + iVar5;
            puVar4[2] = (uint)*(byte *)(iVar5 + 0x4a) << 0x10 |
                        (uint)*(byte *)(iVar5 + 0x4b) << 0x18 | (uint)*(byte *)(iVar5 + 0x48) |
                        (uint)*(byte *)(iVar5 + 0x49) << 8;
            *(ulonglong *)(param_2 + 0x100) =
                 (ulonglong)
                 ((uint)*(byte *)(iVar5 + 0x17) << 0x18 | (uint)*(byte *)(iVar5 + 0x16) << 0x10) <<
                 0x20 | (ulonglong)*(byte *)(iVar5 + 0x10) |
                 (ulonglong)*(byte *)(iVar5 + 0x15) << 0x28 |
                 (ulonglong)*(byte *)(iVar5 + 0x14) << 0x20 |
                 (ulonglong)*(byte *)(iVar5 + 0x13) * 0x1000000 |
                 (ulonglong)*(byte *)(iVar5 + 0x12) * 0x10000 |
                 (ulonglong)*(byte *)(iVar5 + 0x11) * 0x100;
            uVar21 = __aeabi_uldivmod((uint)*(byte *)(iVar5 + 0x28) |
                                      (uint)*(byte *)(iVar5 + 0x2b) * 0x1000000 |
                                      (uint)*(byte *)(iVar5 + 0x2a) * 0x10000 |
                                      (uint)*(byte *)(iVar5 + 0x29) * 0x100,
                                      (uint)*(byte *)(iVar5 + 0x2f) << 0x18 |
                                      (uint)*(byte *)(iVar5 + 0x2e) << 0x10 |
                                      (uint)(((ulonglong)*(byte *)(iVar5 + 0x2d) << 0x28) >> 0x20) |
                                      (uint)*(byte *)(iVar5 + 0x2c),10000,0);
            *(int *)(param_2 + 0x108) = (int)uVar21;
            *(int *)(param_2 + 0x10c) = (int)((ulonglong)uVar21 >> 0x20);
          }
          iVar5 = 0x20;
LAB_0001b176:
          iVar10 = MmshFindAsfGuid(*(int *)(param_2 + 0x110),&asf_stream_header_guid,iVar5,
                                   *(int *)(param_2 + 0x114));
          if (iVar10 < 0) {
            __ptr = (int *)calloc(puVar4[6],4);
            puVar8 = (uint *)calloc(puVar4[4],4);
            iVar5 = MmshFindAsfGuid(*(int *)(param_2 + 0x110),asf_stream_group_guid,0x20,
                                    *(int *)(param_2 + 0x114));
            if (-1 < iVar5) {
              iVar10 = *(int *)(param_2 + 0x110);
              puVar13 = (ushort *)(iVar10 + *(int *)(param_2 + 0x114));
              puVar18 = (ushort *)(iVar10 + iVar5 + 2);
              if (puVar13 < puVar18) {
                if (__ptr != (int *)0x0) {
                  free(__ptr);
                }
                if (puVar8 == (uint *)0x0) {
                  return 0xffffffff;
                }
                free(puVar8);
                return 0xffffffff;
              }
              uVar2 = *(undefined *)(iVar10 + iVar5 + 1);
              uVar1 = *(undefined *)(iVar10 + iVar5);
              iVar5 = 0;
              while (iVar5 < (int)(uint)CONCAT11(uVar2,uVar1)) {
                if (puVar13 < puVar18 + 3) {
                  return 0xffffffff;
                }
                uVar3 = *puVar18;
                iVar10 = 0;
                uVar19 = (uint)*(byte *)(puVar18 + 2) << 0x10 |
                         (uint)*(byte *)((int)puVar18 + 5) << 0x18 | (uint)*(byte *)(puVar18 + 1) |
                         (uint)*(byte *)((int)puVar18 + 3) << 8;
                while (iVar10 < (int)puVar4[6]) {
                  if ((uint)uVar3 == *(uint *)(puVar4[5] + iVar10 * 4)) {
                    __ptr[iVar10] = uVar19;
                    break;
                  }
                  iVar10 = iVar10 + 1;
                }
                iVar10 = 0;
                while (iVar10 < (int)puVar4[4]) {
                  if ((uint)uVar3 == *(uint *)(puVar4[3] + iVar10 * 4)) {
                    puVar8[iVar10] = uVar19;
                    break;
                  }
                  iVar10 = iVar10 + 1;
                }
                iVar5 = iVar5 + 1;
                puVar18 = puVar18 + 3;
              }
            }
            uVar19 = puVar4[4];
            if (uVar19 != 0) {
              iVar5 = 0;
              puVar15 = puVar8;
              uVar12 = *puVar8;
              while (iVar5 < (int)uVar19) {
                puVar14 = puVar15 + 1;
                uVar11 = *puVar15;
                iVar5 = iVar5 + 1;
                puVar15 = puVar14;
                if ((int)uVar11 <= (int)uVar12) {
                  uVar12 = uVar11;
                }
              }
              iVar5 = MmshGetMaxIdx(puVar4[6],__ptr,0x7fffffff - uVar12);
              uVar19 = uVar12 & ~(iVar5 >> 0x1f);
            }
            uVar19 = MmshGetMaxIdx(puVar4[6],__ptr,0x7fffffff - uVar19);
            if ((int)uVar19 < 0) {
              iVar5 = 0;
            }
            else {
              iVar5 = __ptr[uVar19];
            }
            uVar12 = MmshGetMaxIdx(puVar4[4],(int *)puVar8,0x7fffffff - iVar5);
            free(__ptr);
            free(puVar8);
            if ((int)(uVar12 & uVar19) < 0) {
              return 0xffffffff;
            }
            if (-1 < (int)uVar12) {
              iVar5 = *(int *)(puVar4[3] + uVar12 * 4);
            }
            if (-1 < (int)uVar12) {
              puVar4[7] = iVar5;
            }
            if (-1 < (int)uVar19) {
              iVar5 = *(int *)(puVar4[5] + uVar19 * 4);
            }
            if (-1 < (int)uVar19) {
              puVar4[8] = iVar5;
            }
            return 1;
          }
          iVar5 = iVar10 + 0x38;
          if (*(int *)(param_2 + 0x114) < iVar5) {
            return 0xffffffff;
          }
          iVar20 = *(int *)(param_2 + 0x110) + iVar10;
          uVar19 = (uint)*(byte *)(iVar20 + 2) << 0x10 | (uint)*(byte *)(iVar20 + 3) << 0x18 |
                   (uint)*(byte *)(*(int *)(param_2 + 0x110) + iVar10) |
                   (uint)*(byte *)(iVar20 + 1) << 8;
          if (uVar19 != 0xbc19efc0) goto code_r0x0001b114;
          if ((void *)puVar4[5] == (void *)0x0) {
            pvVar9 = malloc(4);
            puVar4[6] = 1;
            puVar4[5] = pvVar9;
          }
          else {
            iVar10 = puVar4[6];
            puVar4[6] = iVar10 + 1;
            pvVar9 = realloc((void *)puVar4[5],(iVar10 + 1) * 4);
            puVar4[5] = pvVar9;
          }
          iVar10 = puVar4[6];
          iVar17 = puVar4[5];
          goto LAB_0001b166;
        }
        puVar16 = &DAT_0002046a;
        uVar6 = 0x61;
        uStack100._2_2_ = 0x61;
        pcVar7 = 
        "/home/zhangjingzhou/sdk/v3-cdr-ips2.0-0104/CamCedarX/LIBRARY/DEMUX/STREAM/mms/CdxMmsHttpStream.c"
        ;
      }
      __android_log_print(6,"awplayer",puVar16,"aw_mms_http_streaming_start",uVar6,pcVar7,
                          uStack100._2_2_);
      return 0xffffffff;
    }
    puVar16 = &DAT_0002039f;
    uVar6 = 0x49;
  }
LAB_0001af08:
  __android_log_print(6,"awplayer",puVar16,"aw_mms_http_streaming_start",uVar6);
  return 0xffffffff;
code_r0x0001b114:
  if (uVar19 == 0xf8699e40) {
    if ((void *)puVar4[3] == (void *)0x0) {
      pvVar9 = malloc(4);
      puVar4[4] = 1;
      puVar4[3] = pvVar9;
    }
    else {
      iVar10 = puVar4[4];
      puVar4[4] = iVar10 + 1;
      pvVar9 = realloc((void *)puVar4[3],(iVar10 + 1) * 4);
      puVar4[3] = pvVar9;
    }
    iVar10 = puVar4[4];
    iVar17 = puVar4[3];
LAB_0001b166:
    *(uint *)(iVar17 + (iVar10 + -1) * 4) = (uint)*(ushort *)(iVar20 + 0x30);
  }
  goto LAB_0001b176;
}



size_t aw_asf_http_read_wrapper(void *param_1,size_t param_2,int param_3,undefined4 param_4)

{
  void *__src;
  size_t __n;
  int iVar1;
  size_t sVar2;
  undefined4 *puVar3;
  
  __n = *(size_t *)(param_3 + 0x110);
  puVar3 = *(undefined4 **)(param_3 + 0xe8);
  if (__n != 0) {
    sVar2 = *(int *)(param_3 + 0x114) - *(int *)(param_3 + 0x118);
    __src = (void *)(__n + *(int *)(param_3 + 0x118));
    __n = sVar2;
    if ((int)param_2 < (int)sVar2) {
      __n = param_2;
    }
    memcpy(param_1,__src,__n);
    iVar1 = __n + *(int *)(param_3 + 0x118);
    *(int *)(param_3 + 0x118) = iVar1;
    if (*(int *)(param_3 + 0x114) <= iVar1) {
      free(*(void **)(param_3 + 0x110));
      *(undefined4 *)(param_3 + 0x110) = 0;
      *(undefined4 *)(param_3 + 0x118) = 0;
      *(undefined4 *)(param_3 + 0x114) = 0;
    }
  }
  while( true ) {
    if ((int)param_2 <= (int)__n) {
      return __n;
    }
    iVar1 = FUN_0001ad58(puVar3);
    if (iVar1 < 1) break;
    __n = __n + iVar1;
  }
  __android_log_print(6,"awplayer",&DAT_0002053f,"aw_asf_http_read_wrapper",0x1e7,iVar1,
                      param_2 - __n,param_4);
  return 0xffffffff;
}



// WARNING: Could not reconcile some variable overlaps

size_t aw_mms_http_streaming_read(void *param_1,int param_2,int param_3)

{
  size_t sVar1;
  size_t sVar2;
  char *__s;
  size_t sVar3;
  void *__src;
  int iVar4;
  uint uVar5;
  int iVar6;
  int local_48;
  ushort local_44;
  ushort local_42;
  uint local_40;
  undefined2 local_3c;
  ushort local_3a;
  byte local_38;
  byte local_37;
  undefined2 local_36;
  undefined2 local_34;
  ushort local_32;
  int local_2c;
  
  local_2c = __stack_chk_guard;
  memset(&local_38,0,0xc);
  iVar6 = *(int *)(param_3 + 0xe4);
  iVar4 = 0;
  local_48 = 0;
LAB_0001b43c:
  do {
    if (*(int *)(param_3 + 0x74) == 1) goto LAB_0001b5e4;
    memset(&local_44,0,0xc);
    sVar1 = aw_asf_http_read_wrapper(&local_38,4,param_3,iVar4);
    if ((int)sVar1 < 1) goto LAB_0001b5e4;
    sVar1 = (size_t)local_36;
    local_42 = local_36;
    if (7 < sVar1) {
      sVar1 = 8;
    }
    local_44 = CONCAT11(local_37,local_38);
    sVar2 = aw_asf_http_read_wrapper(&local_38,sVar1,param_3,(uint)local_37);
    if ((int)sVar2 < 1) goto LAB_0001b5e4;
    local_40 = (uint)(byte)local_36 << 0x10 | (uint)local_36._1_1_ << 0x18 | (uint)local_38 |
               (uint)local_37 << 8;
    local_3c = local_34;
    if (sVar1 == 8) {
      local_3a = local_32;
    }
    else {
      local_3a = 8;
    }
    printf("sizeConfirm = 0x%02hx\n",(uint)local_3a);
    AsfStreamingType(&local_44,&local_48);
    sVar2 = local_3a - 8;
    sVar1 = sVar2;
    if (((local_44 != 0x4824) && (local_48 == 0)) &&
       (sVar1 = *(size_t *)(iVar6 + 8), (int)sVar1 < (int)sVar2)) {
      __s = "***********asfHttpCtrl->packetSize is smaller than the chunkSize, error.";
LAB_0001b55c:
      puts(__s);
      goto LAB_0001b5e4;
    }
    while( true ) {
      iVar4 = *(int *)(param_3 + 0x74);
      if (iVar4 == 1) {
        sVar1 = 0;
        goto LAB_0001b5e8;
      }
      if ((int)sVar1 < *(int *)(param_3 + 0x40) - *(int *)(param_3 + 0x60)) break;
      usleep(40000);
    }
    if ((int)sVar1 <= param_2) {
      sVar3 = aw_asf_http_read_wrapper(param_1,sVar2,param_3,iVar4);
      if ((int)sVar3 < 1) goto LAB_0001b5e4;
      if (local_48 != 1) {
        memset((void *)((int)param_1 + sVar2),0,sVar1 - sVar2);
        goto LAB_0001b5e8;
      }
      goto LAB_0001b43c;
    }
    iVar4 = *(int *)(iVar6 + 8);
    if (0x7fff < (int)sVar2 || 0x7fff < iVar4) {
      __s = "*************the asfChunkBuffer size is too small.";
      goto LAB_0001b55c;
    }
    sVar3 = aw_asf_http_read_wrapper(*(void **)(param_3 + 100),sVar2,param_3,iVar4);
    if ((int)sVar3 < 1) goto LAB_0001b5e4;
  } while (local_48 == 1);
  memset((void *)(*(int *)(param_3 + 100) + sVar2),0,sVar1 - sVar2);
  uVar5 = *(uint *)(param_3 + 0x50);
  if (uVar5 < *(uint *)(param_3 + 0x54)) {
    if ((int)(*(uint *)(param_3 + 0x54) - uVar5) < (int)sVar1) {
LAB_0001b5e4:
      sVar1 = 0xffffffff;
      goto LAB_0001b5e8;
    }
LAB_0001b59e:
    __src = *(void **)(param_3 + 100);
    sVar3 = sVar1;
  }
  else {
    sVar2 = (*(int *)(param_3 + 0x58) + 1) - uVar5;
    if ((int)sVar1 <= (int)sVar2) goto LAB_0001b59e;
    memcpy(param_1,*(void **)(param_3 + 100),sVar2);
    param_1 = *(void **)(param_3 + 0x48);
    sVar3 = sVar1 - sVar2;
    __src = (void *)(*(int *)(param_3 + 100) + sVar2);
  }
  memcpy(param_1,__src,sVar3);
LAB_0001b5e8:
  if (local_2c == __stack_chk_guard) {
    return sVar1;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined4 aw_mms_http_streaming_read_func(int param_1)

{
  void *pvVar1;
  size_t sVar2;
  void *pvVar3;
  uint uVar4;
  uint uVar5;
  
  pvVar3 = *(void **)(param_1 + 0x54);
  pvVar1 = *(void **)(param_1 + 0x50);
  if (pvVar3 <= pvVar1) {
    pvVar3 = (void *)(*(int *)(param_1 + 0x58) + 1);
  }
  if ((void *)((int)pvVar3 - (int)pvVar1) != (void *)0x0) {
    sVar2 = aw_mms_http_streaming_read(pvVar1,(int)(void *)((int)pvVar3 - (int)pvVar1),param_1);
    if (sVar2 == 0xffffffff) {
      return 0;
    }
    uVar4 = *(int *)(param_1 + 0x50) + sVar2;
    *(uint *)(param_1 + 0x50) = uVar4;
    uVar5 = uVar4;
    if (*(uint *)(param_1 + 0x58) < uVar4) {
      uVar5 = uVar4 - *(int *)(param_1 + 0x40);
    }
    if (*(uint *)(param_1 + 0x58) < uVar4) {
      *(uint *)(param_1 + 0x50) = uVar5;
    }
    pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xd4));
    *(size_t *)(param_1 + 0x60) = *(int *)(param_1 + 0x60) + sVar2;
    uVar5 = *(uint *)(param_1 + 0x28);
    *(uint *)(param_1 + 0x28) = uVar5 + sVar2;
    *(uint *)(param_1 + 0x2c) =
         *(int *)(param_1 + 0x2c) + ((int)sVar2 >> 0x1f) + (uint)CARRY4(uVar5,sVar2);
    *(size_t *)(param_1 + 0x5c) = *(int *)(param_1 + 0x5c) + sVar2;
    pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0xd4));
  }
  return 1;
}



undefined4 aw_mms_http_streaming_seek(void)

{
  return 0xffffffff;
}



int __MmsGetProbeData(int param_1)

{
  return param_1 + 4;
}



undefined4 __MmsGetIoState(int param_1)

{
  return *(undefined4 *)(param_1 + 0x18);
}



undefined4 __MmsAttribute(void)

{
  return 4;
}



undefined4 __MmsEos(int param_1)

{
  return *(undefined4 *)(param_1 + 0x20);
}



undefined8 __MmsSize(void)

{
  return 0xffffffffffffffff;
}



undefined8 FUN_0001b696(int param_1)

{
  undefined8 uVar1;
  
  pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xd4));
  uVar1 = *(undefined8 *)(param_1 + 0x38);
  pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0xd4));
  return uVar1;
}



undefined4 __MmsSeekToTime(char **param_1,undefined4 param_2,uint param_3,int param_4)

{
  char *pcVar1;
  int iVar2;
  char *pcVar3;
  char *pcVar4;
  char *pcVar5;
  int *piVar6;
  longlong lVar7;
  
  piVar6 = (int *)param_1[0x39];
  if (param_1[0x1a] == (char *)0x0) {
    __android_log_print(5,"awplayer","<%s:%u>: --- mmst cannot seek","__MmsSeekToTime",0x180);
  }
  else {
    pcVar1 = param_1[0x42];
    pcVar3 = param_1[0x43];
    if ((int)(pcVar3 + -(uint)(pcVar1 == (char *)0x0)) < 0 ==
        ((int)pcVar3 < 0 && (int)(pcVar3 + ((pcVar1 != (char *)0x0) - 1)) < 0 != (int)pcVar3 < 0)) {
      pcVar4 = param_1[0x40];
      pcVar5 = param_1[0x41];
      lVar7 = __aeabi_ldivmod((int)((ulonglong)param_3 * ZEXT48(pcVar4)),
                              param_4 * (int)pcVar4 + param_3 * (int)pcVar5 +
                              (int)((ulonglong)param_3 * ZEXT48(pcVar4) >> 0x20),pcVar1,pcVar3,
                              param_1,param_2);
      pcVar3 = (char *)((ulonglong)lVar7 >> 0x20);
      pcVar1 = (char *)lVar7;
      if ((int)(pcVar3 + (-(uint)(pcVar4 > pcVar1) - (int)pcVar5)) < 0 !=
          (lVar7 < 0 == -1 < (int)pcVar5 &&
          (int)(pcVar3 + (uint)(pcVar4 <= pcVar1) + ~(uint)pcVar5) < 0 != lVar7 < 0)) {
        pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0x35));
        pcVar4 = param_1[0x12];
        param_1[10] = pcVar1;
        param_1[0xb] = pcVar3;
        param_1[0xe] = pcVar1;
        param_1[0xf] = pcVar3;
        iVar2 = 0;
        param_1[0x14] = pcVar4;
        param_1[0x13] = pcVar4;
        param_1[0x15] = pcVar4;
        param_1[0x17] = (char *)0x0;
        param_1[0x18] = (char *)0x0;
        memset(pcVar4,0,0xc00000);
        if (param_1[0x1a] == (char *)0x1) {
          if (*piVar6 - 4U < 2) {
            iVar2 = CdxNopStreamingSeek(param_1);
          }
          else {
            iVar2 = CdxMmshStreamingSeek(param_1);
          }
        }
        pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0x35));
        if (-1 < iVar2) {
          return 0;
        }
        return 0xffffffff;
      }
    }
  }
  return 0xffffffff;
}



void __MmsSeek(int param_1,undefined4 param_2,uint param_3,uint param_4,int param_5)

{
  undefined4 *puVar1;
  int *piVar2;
  int iVar3;
  uint uVar4;
  uint uVar5;
  bool bVar6;
  undefined8 uVar7;
  longlong lVar8;
  
  piVar2 = (int *)(param_1 + 0x10);
  DataMemoryBarrier(0x1f);
  do {
    ExclusiveAccess(piVar2);
    bVar6 = (bool)hasExclusiveAccess(piVar2);
  } while (!bVar6);
  *piVar2 = *piVar2 + 1;
  DataMemoryBarrier(0x1f);
  puVar1 = (undefined4 *)(param_1 + 0x14);
  do {
    ExclusiveAccess(puVar1);
    bVar6 = (bool)hasExclusiveAccess(puVar1);
  } while (!bVar6);
  *puVar1 = 3;
  DataMemoryBarrier(0x1f);
  if (param_5 == 1) {
    uVar7 = VectorAdd(CONCAT44(param_4,param_3),*(undefined8 *)(param_1 + 0x38),8);
    param_4 = (uint)((ulonglong)uVar7 >> 0x20);
    uVar5 = (uint)uVar7;
LAB_0001b87c:
    if ((int)param_4 < 0) {
      piVar2 = (int *)(param_1 + 0x10);
      __android_log_print(5,"awplayer","<%s:%u>: we can not seek to this position!","__MmsSeek",
                          0x13d,param_2,param_3);
      DataMemoryBarrier(0x1f);
      do {
        ExclusiveAccess(piVar2);
        bVar6 = (bool)hasExclusiveAccess(piVar2);
      } while (!bVar6);
      *piVar2 = *piVar2 + -1;
      DataMemoryBarrier(0x1f);
      return;
    }
  }
  else {
    if (param_5 == 2) {
      DataMemoryBarrier(0x1f);
      do {
        ExclusiveAccess(piVar2);
        bVar6 = (bool)hasExclusiveAccess(piVar2);
      } while (!bVar6);
      *piVar2 = *piVar2 + -1;
      DataMemoryBarrier(0x1f);
      return;
    }
    uVar5 = param_3;
    if (param_5 == 0) goto LAB_0001b87c;
    uVar5 = 0;
    param_4 = 0;
  }
  while (iVar3 = *(int *)(param_1 + 0x2c), bVar6 = uVar5 <= *(uint *)(param_1 + 0x28),
        (int)((iVar3 - param_4) - (uint)!bVar6) < 0 !=
        (iVar3 < 0 == -1 < (int)param_4 && (int)(iVar3 + ~param_4 + (uint)bVar6) < 0 != iVar3 < 0))
  {
    if (*(int *)(param_1 + 0x74) != 0) {
      piVar2 = (int *)(param_1 + 0x10);
      DataMemoryBarrier(0x1f);
      do {
        ExclusiveAccess(piVar2);
        bVar6 = (bool)hasExclusiveAccess(piVar2);
      } while (!bVar6);
      *piVar2 = *piVar2 + -1;
      DataMemoryBarrier(0x1f);
      puVar1 = (undefined4 *)(param_1 + 0x14);
      do {
        ExclusiveAccess(puVar1);
        bVar6 = (bool)hasExclusiveAccess(puVar1);
      } while (!bVar6);
      *puVar1 = 0;
      DataMemoryBarrier(0x1f);
      return;
    }
    usleep(100);
  }
  lVar8 = VectorAdd(*(undefined8 *)(param_1 + 0x38),0xfffffffffff00001,8);
  uVar4 = (uint)((ulonglong)lVar8 >> 0x20);
  bVar6 = (uint)lVar8 <= uVar5;
  if ((int)((param_4 - uVar4) - (uint)!bVar6) < 0 !=
      ((int)param_4 < 0 == -1 < lVar8 &&
      (int)(param_4 + ~uVar4 + (uint)bVar6) < 0 != (int)param_4 < 0)) {
    __android_log_print(5,"awplayer",
                                                
                        "<%s:%u>: maybe the buffer is overwride by the new data, so we can not support to seek to this position"
                        ,"__MmsSeek",0x160,param_2,param_3);
  }
  pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xd4));
  uVar4 = *(int *)(param_1 + 0x4c) + (uVar5 - *(int *)(param_1 + 0x38));
  *(uint *)(param_1 + 0x4c) = uVar4;
  *(uint *)(param_1 + 0x5c) = (*(int *)(param_1 + 0x38) + *(int *)(param_1 + 0x5c)) - uVar5;
  if (*(uint *)(param_1 + 0x58) < uVar4) {
    iVar3 = -*(int *)(param_1 + 0x40);
  }
  else {
    if (*(uint *)(param_1 + 0x48) <= uVar4) goto LAB_0001b978;
    iVar3 = *(int *)(param_1 + 0x40);
  }
  *(uint *)(param_1 + 0x4c) = uVar4 + iVar3;
LAB_0001b978:
  *(uint *)(param_1 + 0x38) = uVar5;
  *(uint *)(param_1 + 0x3c) = param_4;
  pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0xd4));
  puVar1 = (undefined4 *)(param_1 + 0x14);
  do {
    ExclusiveAccess(puVar1);
    bVar6 = (bool)hasExclusiveAccess(puVar1);
  } while (!bVar6);
  *puVar1 = 0;
  DataMemoryBarrier(0x1f);
  piVar2 = (int *)(param_1 + 0x10);
  DataMemoryBarrier(0x1f);
  do {
    ExclusiveAccess(piVar2);
    bVar6 = (bool)hasExclusiveAccess(piVar2);
  } while (!bVar6);
  *piVar2 = *piVar2 + -1;
  DataMemoryBarrier(0x1f);
  return;
}



uint __MmsRead(int param_1,void *param_2,uint param_3)

{
  bool bVar1;
  void *__src;
  size_t __n;
  undefined4 *puVar2;
  uint uVar3;
  uint uVar4;
  int *piVar5;
  size_t __n_00;
  
  piVar5 = (int *)(param_1 + 0x10);
  DataMemoryBarrier(0x1f);
  do {
    ExclusiveAccess(piVar5);
    bVar1 = (bool)hasExclusiveAccess(piVar5);
  } while (!bVar1);
  *piVar5 = *piVar5 + 1;
  DataMemoryBarrier(0x1f);
  puVar2 = (undefined4 *)(param_1 + 0x14);
  do {
    ExclusiveAccess(puVar2);
    bVar1 = (bool)hasExclusiveAccess(puVar2);
  } while (!bVar1);
  *puVar2 = 2;
  DataMemoryBarrier(0x1f);
  do {
    uVar3 = *(uint *)(param_1 + 0x5c);
    if ((int)param_3 <= (int)uVar3) {
LAB_0001ba40:
      __src = *(void **)(param_1 + 0x4c);
      __n_00 = (*(int *)(param_1 + 0x58) - (int)__src) + 1;
      __n = param_3;
      if ((int)__n_00 < (int)param_3) {
        memcpy(param_2,__src,__n_00);
        __src = *(void **)(param_1 + 0x48);
        param_2 = (void *)((int)param_2 + __n_00);
        __n = param_3 - __n_00;
      }
      memcpy(param_2,__src,__n);
      uVar4 = *(int *)(param_1 + 0x4c) + param_3;
      *(uint *)(param_1 + 0x4c) = uVar4;
      uVar3 = uVar4;
      if (*(uint *)(param_1 + 0x58) < uVar4) {
        uVar3 = uVar4 - *(int *)(param_1 + 0x40);
      }
      if (*(uint *)(param_1 + 0x58) < uVar4) {
        *(uint *)(param_1 + 0x4c) = uVar3;
      }
      *(undefined4 *)(param_1 + 0x54) = *(undefined4 *)(param_1 + 0x4c);
      pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xd4));
      uVar3 = *(uint *)(param_1 + 0x38);
      *(uint *)(param_1 + 0x38) = uVar3 + param_3;
      *(uint *)(param_1 + 0x3c) =
           *(int *)(param_1 + 0x3c) + ((int)param_3 >> 0x1f) + (uint)CARRY4(uVar3,param_3);
      *(uint *)(param_1 + 0x5c) = *(int *)(param_1 + 0x5c) - param_3;
      pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0xd4));
      puVar2 = (undefined4 *)(param_1 + 0x14);
      do {
        ExclusiveAccess(puVar2);
        bVar1 = (bool)hasExclusiveAccess(puVar2);
      } while (!bVar1);
      *puVar2 = 0;
      DataMemoryBarrier(0x1f);
      piVar5 = (int *)(param_1 + 0x10);
      DataMemoryBarrier(0x1f);
      do {
        ExclusiveAccess(piVar5);
        bVar1 = (bool)hasExclusiveAccess(piVar5);
      } while (!bVar1);
      *piVar5 = *piVar5 + -1;
      DataMemoryBarrier(0x1f);
      return param_3;
    }
    if (*(int *)(param_1 + 0x20) == 1) {
      if ((int)uVar3 <= (int)param_3) {
        param_3 = uVar3;
      }
      goto LAB_0001ba40;
    }
    usleep(40000);
  } while( true );
}



undefined4 CdxMmsClose(void *param_1,int param_2)

{
  bool bVar1;
  int iVar2;
  int *piVar3;
  
  if (param_1 != (void *)0x0) {
    piVar3 = (int *)((int)param_1 + 0x10);
    *(undefined4 *)((int)param_1 + 0x74) = 1;
    *(undefined4 *)((int)param_1 + 0x78) = 1;
    DataMemoryBarrier(0x1f);
    do {
      ExclusiveAccess(piVar3);
      bVar1 = (bool)hasExclusiveAccess(piVar3);
    } while (!bVar1);
    *piVar3 = *piVar3 + -1;
    DataMemoryBarrier(0x1f);
    while( true ) {
      piVar3 = (int *)((int)param_1 + 0x10);
      DataMemoryBarrier(0x1f);
      do {
        ExclusiveAccess(piVar3);
        iVar2 = *piVar3;
        bVar1 = (bool)hasExclusiveAccess(piVar3);
      } while (!bVar1);
      *piVar3 = iVar2;
      DataMemoryBarrier(0x1f);
      if (iVar2 == 0) break;
      __android_log_print(3,"awplayer","<%s:%u>: ---- ret = %d","CdxMmsClose",0x44,iVar2);
      usleep(10000);
      param_2 = iVar2;
    }
    while (*(int *)((int)param_1 + 0x20) == 0) {
      __android_log_print(3,"awplayer","<%s:%u>: usleep","CdxMmsClose",0x4c,param_2);
      usleep(10000);
    }
    if (0 < *(int *)((int)param_1 + 0x6c)) {
      close(*(int *)((int)param_1 + 0x6c));
    }
    if (*(int *)((int)param_1 + 0x44) != 0) {
      CdxUrlFree();
      *(undefined4 *)((int)param_1 + 0x44) = 0;
    }
    if (*(void **)((int)param_1 + 0x110) != (void *)0x0) {
      free(*(void **)((int)param_1 + 0x110));
      *(undefined4 *)((int)param_1 + 0x110) = 0;
    }
    if (*(void **)((int)param_1 + 0x48) != (void *)0x0) {
      free(*(void **)((int)param_1 + 0x48));
      *(undefined4 *)((int)param_1 + 0x48) = 0;
    }
    if (*(void **)((int)param_1 + 0xf4) != (void *)0x0) {
      free(*(void **)((int)param_1 + 0xf4));
      *(undefined4 *)((int)param_1 + 0xf4) = 0;
    }
    if (*(void **)((int)param_1 + 0xe4) != (void *)0x0) {
      free(*(void **)((int)param_1 + 0xe4));
      *(undefined4 *)((int)param_1 + 0xe4) = 0;
    }
    if (*(void **)((int)param_1 + 100) != (void *)0x0) {
      free(*(void **)((int)param_1 + 100));
      *(undefined4 *)((int)param_1 + 100) = 0;
    }
    if (*(void **)((int)param_1 + 4) != (void *)0x0) {
      free(*(void **)((int)param_1 + 4));
      *(undefined4 *)((int)param_1 + 4) = 0;
    }
    if (*(void **)((int)param_1 + 0xc) != (void *)0x0) {
      free(*(void **)((int)param_1 + 0xc));
      *(undefined4 *)((int)param_1 + 0xc) = 0;
    }
    pthread_mutex_destroy((pthread_mutex_t *)((int)param_1 + 0xd4));
    pthread_mutex_destroy((pthread_mutex_t *)((int)param_1 + 0xd8));
    pthread_cond_destroy((pthread_cond_t *)((int)param_1 + 0xdc));
    free(param_1);
  }
  return 0;
}



// WARNING: Removing unreachable block (ram,0x0001bc98)

undefined ** __MmsStreamOpen(char **param_1,undefined4 param_2)

{
  bool bVar1;
  char *pcVar2;
  undefined *puVar3;
  pthread_condattr_t *__cond_attr;
  int iVar4;
  int extraout_r1;
  pthread_condattr_t *extraout_r1_00;
  char *__s;
  undefined *unaff_r7;
  undefined **ppuVar5;
  undefined4 uVar6;
  
  if (param_1 == (char **)0x0) {
    pcVar2 = "!(dataSource)";
    uVar6 = 0x1eb;
    __s = s_dataSource_0001f33e;
  }
  else {
    if (*param_1 == (char *)0x0) {
      return (undefined **)0x0;
    }
    __s = (char *)malloc(0x130);
    if ((undefined **)__s == (undefined **)0x0) {
      __android_log_print(6,"awplayer",&DAT_0002081c,"__MmsStreamOpen",0x1f7,param_2);
      return (undefined **)0x0;
    }
    memset(__s,0,0x130);
    *(undefined **)((int)__s + 0x38) = (undefined *)0x0;
    *(undefined **)((int)__s + 0x3c) = (undefined *)0x0;
    *(undefined **)((int)__s + 0x28) = (undefined *)0x0;
    *(undefined **)((int)__s + 0x2c) = (undefined *)0x0;
    unaff_r7 = (undefined *)0x1;
    *(undefined **)((int)__s + 0x100) = (undefined *)0x0;
    *(undefined **)((int)__s + 0x104) = (undefined *)0x0;
    *(undefined **)((int)__s + 0x108) = (undefined *)0x0;
    *(undefined **)((int)__s + 0x10c) = (undefined *)0x0;
    *(undefined **)((int)__s + 0x1c) = (undefined *)0x0;
    *(undefined **)((int)__s + 0x18) = (undefined *)0x1;
    puVar3 = (undefined *)malloc(0x400);
    *(undefined **)((int)__s + 8) = (undefined *)0x400;
    *(undefined **)((int)__s + 4) = puVar3;
    *(undefined **)((int)__s + 0x40) = (undefined *)0xc00000;
    puVar3 = (undefined *)malloc(0xc00000);
    *(undefined **)((int)__s + 0x48) = puVar3;
    if (puVar3 == (undefined *)0x0) {
      CdxMmsClose(__s,extraout_r1);
      return (undefined **)0x0;
    }
    ppuVar5 = (undefined **)((int)__s + 0x10);
    *(undefined **)((int)__s + 0x50) = puVar3;
    *(undefined **)((int)__s + 0x4c) = puVar3;
    *(undefined **)((int)__s + 0x58) = puVar3 + 0xbfffff;
    *(undefined **)((int)__s + 0x54) = puVar3;
    *(undefined **)((int)__s + 0x60) = (undefined *)0x0;
    *(undefined **)((int)__s + 0x5c) = (undefined *)0x0;
    do {
      ExclusiveAccess(ppuVar5);
      bVar1 = (bool)hasExclusiveAccess(ppuVar5);
    } while (!bVar1);
    *ppuVar5 = (undefined *)0x1;
    DataMemoryBarrier(0x1f);
    ppuVar5 = (undefined **)((int)__s + 0x14);
    do {
      ExclusiveAccess(ppuVar5);
      bVar1 = (bool)hasExclusiveAccess(ppuVar5);
    } while (!bVar1);
    *ppuVar5 = (undefined *)0x1;
    DataMemoryBarrier(0x1f);
    pcVar2 = strdup(*param_1);
    *(char **)((int)__s + 0xc) = pcVar2;
    puVar3 = (undefined *)malloc(0x8000);
    *(undefined **)((int)__s + 100) = puVar3;
    if (puVar3 == (undefined *)0x0) {
      return (undefined **)0x0;
    }
    pthread_mutex_init((pthread_mutex_t *)((int)__s + 0xd4),(pthread_mutexattr_t *)0x0);
    __cond_attr = (pthread_condattr_t *)
                  pthread_mutex_init((pthread_mutex_t *)((int)__s + 0xd8),(pthread_mutexattr_t *)0x0
                                    );
    if (__cond_attr == (pthread_condattr_t *)0x0) goto LAB_0001bd64;
    pcVar2 = "!(!ret)";
    uVar6 = 0x229;
    __s = &DAT_0001f306;
  }
  while( true ) {
    __android_log_assert
              (pcVar2,"awplayer","<%s:%d>CDX_CHECK(%s) failed.","__MmsStreamOpen",uVar6,__s);
    __cond_attr = extraout_r1_00;
LAB_0001bd64:
    iVar4 = pthread_cond_init((pthread_cond_t *)((int)__s + 0xdc),__cond_attr);
    if (iVar4 == 0) break;
    pcVar2 = "!(!ret)";
    uVar6 = 0x22b;
    __s = &DAT_0001f306;
  }
  *(undefined **)((int)__s + 0x20) = (undefined *)0x0;
  if (*(undefined **)((int)__s + 0x1c) == (undefined *)0x0) {
    *(undefined **)((int)__s + 0x1c) = unaff_r7;
  }
  *(undefined ***)__s = &PTR_LAB_0001b6b4_1_00023078;
  return (undefined **)__s;
}



undefined4 __MmsClose(void *param_1,int param_2)

{
  if (param_1 != (void *)0x0) {
    CdxMmsClose(param_1,param_2);
  }
  return 0;
}



longlong __MmsForceStop(int param_1,uint param_2)

{
  bool bVar1;
  int iVar2;
  uint uVar3;
  int *piVar4;
  uint *puVar5;
  
  piVar4 = (int *)(param_1 + 0x14);
  *(undefined4 *)(param_1 + 0x74) = 1;
  DataMemoryBarrier(0x1f);
  do {
    ExclusiveAccess(piVar4);
    iVar2 = *piVar4;
    bVar1 = (bool)hasExclusiveAccess(piVar4);
  } while (!bVar1);
  *piVar4 = iVar2;
  DataMemoryBarrier(0x1f);
  if (iVar2 != 4) {
    while( true ) {
      puVar5 = (uint *)(param_1 + 0x14);
      DataMemoryBarrier(0x1f);
      do {
        ExclusiveAccess(puVar5);
        uVar3 = *puVar5;
        bVar1 = (bool)hasExclusiveAccess(puVar5);
      } while (!bVar1);
      *puVar5 = uVar3;
      DataMemoryBarrier(0x1f);
      if (uVar3 == 0) break;
      usleep(10000);
    }
    do {
      ExclusiveAccess(puVar5);
      param_2 = *puVar5;
      bVar1 = (bool)hasExclusiveAccess(puVar5);
    } while (!bVar1);
    *puVar5 = 4;
    DataMemoryBarrier(0x1f);
  }
  return (longlong)((ulonglong)param_2 << 0x20);
}



undefined4 __MmsClrForceStop(int param_1)

{
  bool bVar1;
  undefined4 *puVar2;
  
  *(undefined4 *)(param_1 + 0x74) = 0;
  puVar2 = (undefined4 *)(param_1 + 0x14);
  do {
    ExclusiveAccess(puVar2);
    bVar1 = (bool)hasExclusiveAccess(puVar2);
  } while (!bVar1);
  *puVar2 = 0;
  DataMemoryBarrier(0x1f);
  return 0;
}



undefined4 __MmsControl(int param_1,int param_2,undefined4 *param_3)

{
  undefined4 uVar1;
  longlong lVar2;
  
  switch(param_2) {
  case 0x104:
    if (param_1 == 0) {
      return 0xffffffff;
    }
    memset(param_3,0,0x10);
    *param_3 = *(undefined4 *)(param_1 + 0x40);
    param_3[1] = *(undefined4 *)(param_1 + 0x5c);
    break;
  case 0x105:
    lVar2 = __MmsForceStop(param_1,param_2 - 0x104);
    return (int)lVar2;
  case 0x106:
    uVar1 = __MmsClrForceStop(param_1);
    return uVar1;
  case 0x107:
    __android_log_print(3,"awplayer","<%s:%u>: mms playlist reset stream","__MmsControl",0x10b,
                        param_2,param_3);
    pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xd4));
    *(undefined4 *)(param_1 + 0x4c) = *(undefined4 *)(param_1 + 0x11c);
    *(undefined4 *)(param_1 + 0x54) = *(undefined4 *)(param_1 + 0x120);
    *(undefined4 *)(param_1 + 0x38) = 0;
    *(undefined4 *)(param_1 + 0x3c) = 0;
    *(int *)(param_1 + 0x5c) = *(int *)(param_1 + 0x28) - *(int *)(param_1 + 0x128);
    pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0xd4));
    *(undefined4 *)(param_1 + 0x18) = 0;
    return 0;
  }
  return 0;
}



void aw_stream_set_interrupt_callback(undefined4 param_1)

{
  DAT_000230f0 = param_1;
  return;
}



undefined4 aw_stream_check_interrupt(int param_1)

{
  undefined4 uVar1;
  
  if (DAT_000230f0 == (code *)0x0) {
    usleep(param_1 * 1000);
    return 0;
  }
  uVar1 = (*DAT_000230f0)();
  return uVar1;
}



uint Connect2Server(int param_1,char *param_2,uint param_3,int param_4)

{
  uint __fd;
  undefined4 *puVar1;
  undefined4 uVar2;
  int iVar3;
  hostent *phVar4;
  uint uVar5;
  int *piVar6;
  int iVar7;
  undefined *puVar8;
  undefined4 uVar9;
  int iVar10;
  int local_d8;
  undefined auStack212 [4];
  socklen_t local_d0;
  timeval local_cc;
  undefined4 local_c4;
  undefined4 local_c0;
  int aiStack188 [32];
  undefined local_3c [4];
  in_addr aiStack56 [3];
  int local_2c;
  
  local_2c = __stack_chk_guard;
  __fd = CdxAsynSocket(0,auStack212);
  if (__fd == 1) {
    __android_log_print(5,"awplayer","<%s:%u>: +++++++ fd(%d), maybe error","connect2Server_with_af"
                        ,0x4b,1);
  }
  *(uint *)(param_1 + 0x6c) = __fd;
  if (__fd == 0xffffffff) {
    puVar1 = (undefined4 *)__errno();
    uVar9 = 0x50;
    uVar2 = *puVar1;
  }
  else {
    local_c4 = 10;
    local_c0 = 0;
    setsockopt(__fd,1,0x14,&local_c4,8);
    setsockopt(__fd,1,0x15,&local_c4,8);
    memset(local_3c,0,0x10);
    iVar3 = inet_aton(param_2,aiStack56);
    if (iVar3 != 1) {
      phVar4 = gethostbyname(param_2);
      if ((phVar4 == (hostent *)0x0) && (param_4 != 0)) {
        puVar1 = (undefined4 *)__errno();
        uVar9 = 0x71;
        uVar2 = *puVar1;
        goto LAB_0001c15c;
      }
      __memcpy_chk(aiStack56,*phVar4->h_addr_list,phVar4->h_length,0xc);
    }
    local_3c._0_2_ = 2;
    local_3c._2_2_ = (ushort)((param_3 & 0xff) << 8) | (ushort)(param_3 >> 8) & 0xff;
    uVar5 = fcntl(__fd,3);
    fcntl(__fd,4,uVar5 | 0x800);
    uVar5 = connect(__fd,(sockaddr *)local_3c,0x10);
    if ((uVar5 == 0xffffffff) && (piVar6 = (int *)__errno(), *piVar6 != 0x73)) {
      close(__fd);
      puVar1 = (undefined4 *)__errno();
      __android_log_print(6,"awplayer",&DAT_0002088a,"connect2Server_with_af",0x94,*puVar1);
      __fd = uVar5;
      goto LAB_0001c19a;
    }
    local_cc.tv_sec = 0;
    local_cc.tv_usec = 10000;
    memset(aiStack188,0,0x80);
    iVar10 = 1 << (__fd & 0x1f);
    iVar3 = 0x20;
    aiStack188[(int)__fd >> 5] = iVar10;
    while( true ) {
      iVar7 = select(__fd + 1,(fd_set *)0x0,(fd_set *)aiStack188,(fd_set *)0x0,&local_cc);
      if (iVar7 != 0) break;
      if (*(int *)(param_1 + 0x74) != 0) {
        __fd = 0xfffffffc;
        goto LAB_0001c19a;
      }
      iVar3 = iVar3 + -1;
      if (iVar3 == 0) {
        uVar2 = 0xa9;
        puVar8 = &DAT_000208b0;
LAB_0001c1b6:
        __android_log_print(6,"awplayer",puVar8,"connect2Server_with_af",uVar2);
        __fd = 0xfffffffd;
        goto LAB_0001c19a;
      }
      iVar7 = aw_stream_check_interrupt(100);
      if (iVar7 != 0) {
        uVar2 = 0xad;
        puVar8 = &DAT_00020906;
        goto LAB_0001c1b6;
      }
      memset(aiStack188,0,0x80);
      aiStack188[(int)__fd >> 5] = iVar10;
      local_cc.tv_usec = 100000;
      local_cc.tv_sec = iVar7;
    }
    if (iVar7 < 0) {
      __android_log_print(6,"awplayer",&DAT_000208e2,"connect2Server_with_af",0xba);
    }
    local_d0 = 4;
    iVar3 = getsockopt(__fd,1,4,&local_d8,&local_d0);
    if (-1 < iVar3) {
      if (0 < local_d8) {
        puVar1 = (undefined4 *)__errno();
        __fd = 0xffffffff;
        __android_log_print(6,"awplayer",&DAT_0002088a,"connect2Server_with_af",199,*puVar1);
      }
      goto LAB_0001c19a;
    }
    puVar1 = (undefined4 *)__errno();
    uVar9 = 0xc1;
    uVar2 = *puVar1;
  }
LAB_0001c15c:
  __android_log_print(6,"awplayer",&DAT_0002088a,"connect2Server_with_af",uVar9,uVar2);
  __fd = 0xfffffffe;
LAB_0001c19a:
  if (local_2c != __stack_chk_guard) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return __fd;
}



void FUN_0001c244(undefined *param_1,int param_2,uint param_3)

{
  undefined uVar1;
  uint uVar2;
  int iVar3;
  undefined *puVar4;
  
  if (0x1f2 < (int)param_3) {
    param_3 = 499;
  }
  iVar3 = 0;
  puVar4 = param_1;
  while (iVar3 < (int)param_3) {
    uVar1 = *(undefined *)(param_2 + iVar3);
    iVar3 = iVar3 + 1;
    puVar4[1] = 0;
    *puVar4 = uVar1;
    puVar4 = puVar4 + 2;
  }
  uVar2 = param_3 & ~((int)param_3 >> 0x1f);
  param_1[uVar2 * 2] = 0;
  param_1[uVar2 * 2 + 1] = 0;
  return;
}



void FUN_0001c27e(int param_1,undefined4 param_2)

{
  int iVar1;
  int iVar2;
  
  iVar2 = *(int *)(param_1 + 0x19000);
  *(char *)(param_1 + iVar2) = (char)param_2;
  iVar1 = param_1 + iVar2;
  *(char *)(iVar1 + 1) = (char)((uint)param_2 >> 8);
  *(char *)(iVar1 + 2) = (char)((uint)param_2 >> 0x10);
  *(char *)(iVar1 + 3) = (char)((uint)param_2 >> 0x18);
  *(int *)(param_1 + 0x19000) = iVar2 + 4;
  return;
}



uint FUN_0001c29c(int param_1,int param_2)

{
  int iVar1;
  
  iVar1 = param_1 + param_2;
  return (uint)*(byte *)(iVar1 + 2) << 0x10 | (uint)*(byte *)(iVar1 + 1) << 8 |
         (uint)*(byte *)(param_1 + param_2) | (uint)*(byte *)(iVar1 + 3) << 0x18;
}



undefined4
FUN_0001c2c0(int *param_1,undefined4 param_2,uint param_3,undefined4 param_4,undefined4 param_5,
            uint param_6,undefined4 param_7)

{
  int iVar1;
  int iVar2;
  undefined4 uVar3;
  int iVar4;
  undefined auStack102448 [48];
  undefined auStack102400 [102364];
  
  iVar1 = __stack_chk_guard;
  iVar2 = param_6 + 0xe;
  if (-1 < (int)(param_6 + 7)) {
    iVar2 = param_6 + 7;
  }
  iVar2 = iVar2 >> 3;
  FUN_0001c27e((int)auStack102448,1);
  FUN_0001c27e((int)auStack102448,0xb00bface);
  FUN_0001c27e((int)auStack102448,(iVar2 + 4) * 8);
  FUN_0001c27e((int)auStack102448,0x20534d4d);
  FUN_0001c27e((int)auStack102448,iVar2 + 4);
  FUN_0001c27e((int)auStack102448,*param_1);
  *param_1 = *param_1 + 1;
  FUN_0001c27e((int)auStack102448,0);
  FUN_0001c27e((int)auStack102448,0);
  FUN_0001c27e((int)auStack102448,iVar2 + 2);
  FUN_0001c27e((int)auStack102448,param_3 | 0x30000);
  FUN_0001c27e((int)auStack102448,param_4);
  FUN_0001c27e((int)auStack102448,param_5);
  __memcpy_chk(auStack102400,param_7,param_6,0x18fd4);
  if ((param_6 & 7) != 0) {
    memset(auStack102400 + param_6,0,8 - (param_6 & 7));
  }
  iVar4 = (iVar2 + 6) * 8;
  iVar2 = CdxSockAsynSend(param_2,auStack102448,iVar4,300000,0);
  if (iVar2 == iVar4) {
    uVar3 = 0;
  }
  else {
    __android_log_print(5,"awplayer","<%s:%u>: *********send comand error","MmstSendCommand",0xbd);
    uVar3 = 0xffffffff;
  }
  if (iVar1 == __stack_chk_guard) {
    return uVar3;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



int MmsGetNetworkData(int param_1,int param_2,void *param_3,size_t param_4)

{
  ssize_t sVar1;
  undefined4 uVar2;
  char *pcVar3;
  uint uVar4;
  uint uVar5;
  undefined4 uVar6;
  timeval local_130;
  uint auStack296 [32];
  uint auStack168 [33];
  
  while( true ) {
    if (*(int *)(param_1 + 0x74) == 1) {
      return -1;
    }
    memset((fd_set *)auStack296,0,0x80);
    uVar4 = *(uint *)(param_1 + 0x6c);
    uVar5 = 1 << (uVar4 & 0x1f);
    ((fd_set *)auStack296)->fds_bits[(int)uVar4 >> 5] = uVar5;
    memset(auStack168,0,0x80);
    auStack168[(int)uVar4 >> 5] = uVar5;
    local_130.tv_usec = 100000;
    local_130.tv_sec = 0;
    sVar1 = select(uVar4 + 1,(fd_set *)auStack296,(fd_set *)0x0,(fd_set *)auStack168,&local_130);
    if (sVar1 == -1) break;
    if (sVar1 != 0) {
      if ((1 << (*(uint *)(param_1 + 0x6c) & 0x1f) & auStack168[(int)*(uint *)(param_1 + 0x6c) >> 5]
          ) != 0) {
        __android_log_print(3,"awplayer","<%s:%u>: **************socket(shutdown).\n",
                            "MmsGetNetworkData",0x5a);
      }
      if ((1 << (*(uint *)(param_1 + 0x6c) & 0x1f) &
          ((fd_set *)auStack296)->fds_bits[(int)*(uint *)(param_1 + 0x6c) >> 5]) != 0) {
        sVar1 = recv(param_2,param_3,param_4,0);
        if (sVar1 == -1) {
          __errno();
          pcVar3 = "<%s:%u>: errno = %d";
          uVar6 = 0x61;
          uVar2 = 5;
LAB_0001c52a:
          __android_log_print(uVar2,"awplayer",pcVar3,"MmsGetNetworkData",uVar6);
        }
        return sVar1;
      }
    }
  }
  uVar6 = 0x4f;
  pcVar3 = "<%s:%u>: select = -1";
  uVar2 = 3;
  goto LAB_0001c52a;
}



undefined8 FUN_0001c564(int param_1,int param_2,int param_3,uint param_4)

{
  int iVar1;
  uint uVar2;
  uint uVar3;
  int iVar4;
  int iVar5;
  int iVar6;
  
  uVar2 = param_4;
  iVar4 = param_1;
  if (param_4 != 0) {
    uVar2 = 0;
    iVar5 = param_2;
    iVar6 = param_3;
    while( true ) {
      if ((param_4 <= uVar2) || (uVar3 = *(uint *)(param_1 + 0x74), uVar3 != 0)) goto LAB_0001c5be;
      iVar1 = MmsGetNetworkData(param_1,param_2,(void *)(param_3 + uVar2),param_4 - uVar2);
      if (iVar1 < 1) break;
      uVar2 = uVar2 + iVar1;
      fflush((FILE *)0x2416c);
    }
    iVar4 = 0xfa;
    __android_log_print(5,"awplayer",
                        "<%s:%u>: ****************the return value  of the recv is 0.\n","GetData",
                        0xfa,iVar5,iVar6);
    uVar2 = uVar3;
  }
LAB_0001c5be:
  return CONCAT44(iVar4,uVar2);
}



// WARNING: Could not reconcile some variable overlaps

uint FUN_0001c5d4(int param_1)

{
  int iVar1;
  int iVar2;
  char *pcVar3;
  uint uVar4;
  uint uVar5;
  size_t __n;
  undefined8 uVar6;
  undefined4 uVar7;
  uint uStack102440;
  undefined auStack102436 [4];
  char cStack102432;
  char cStack102431;
  undefined2 uStack102430;
  undefined uStack102428;
  undefined auStack102427 [102407];
  
  iVar1 = __stack_chk_guard;
  uVar5 = 0;
  uStack102440 = 0;
  uVar6 = FUN_0001c564(param_1,*(int *)(param_1 + 0x1c),(int)auStack102436,8);
  if ((int)uVar6 < 8) {
    __android_log_print(5,"awplayer","<%s:%u>: ****************MMST_PreHeader Read Failed\n",
                        "MmstStreamingRead",0x27c);
  }
  else {
    if (cStack102432 == '\x04') {
      uStack102440 = uStack102430 - 8;
      if (uStack102440 < 0x19001) {
        while (*(int *)(param_1 + 0x74) == 0) {
          if (*(int *)(param_1 + 0xd0) <= *(int *)(param_1 + 0x40) - *(int *)(param_1 + 0x5c))
          goto LAB_0001c68e;
          usleep(40000);
        }
        uVar5 = 0;
        if (*(int *)(param_1 + 0x74) != 1) {
LAB_0001c68e:
          uVar5 = *(uint *)(param_1 + 0x50);
          if (*(uint *)(param_1 + 0x54) < uVar5) {
            __n = (*(int *)(param_1 + 0x58) + 1) - uVar5;
            if (*(int *)(param_1 + 0xd0) <= (int)__n) goto LAB_0001c6a4;
            __memset_chk(&uStack102428,0,*(int *)(param_1 + 0xd0),0x19000);
            uVar6 = FUN_0001c564(param_1,*(int *)(param_1 + 0x1c),(int)&uStack102428,uStack102440);
            iVar2 = (int)uVar6;
            memcpy(*(void **)(param_1 + 0x50),&uStack102428,__n);
            memcpy(*(void **)(param_1 + 0x48),auStack102427 + (__n - 1),
                   *(int *)(param_1 + 0xd0) - __n);
          }
          else {
LAB_0001c6a4:
            uVar6 = FUN_0001c564(param_1,*(int *)(param_1 + 0x1c),uVar5,uStack102440);
            iVar2 = (int)uVar6;
            memset((void *)(*(int *)(param_1 + 0x50) + iVar2),0,*(int *)(param_1 + 0xd0) - iVar2);
          }
          uVar4 = *(int *)(param_1 + 0x50) + *(int *)(param_1 + 0xd0);
          *(uint *)(param_1 + 0x50) = uVar4;
          uVar5 = uVar4;
          if (*(uint *)(param_1 + 0x58) < uVar4) {
            uVar5 = uVar4 - *(int *)(param_1 + 0x40);
          }
          if (*(uint *)(param_1 + 0x58) < uVar4) {
            *(uint *)(param_1 + 0x50) = uVar5;
          }
          pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0xd4));
          uVar5 = *(uint *)(param_1 + 0xd0);
          *(uint *)(param_1 + 0x60) = *(int *)(param_1 + 0x60) + uVar5;
          uVar4 = *(uint *)(param_1 + 0x28);
          *(uint *)(param_1 + 0x28) = uVar4 + uVar5;
          *(uint *)(param_1 + 0x2c) =
               *(int *)(param_1 + 0x2c) + ((int)uVar5 >> 0x1f) + (uint)CARRY4(uVar4,uVar5);
          *(uint *)(param_1 + 0x5c) = *(int *)(param_1 + 0x5c) + uVar5;
          pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0xd4));
          uVar5 = (uint)((int)uStack102440 <= iVar2);
          goto LAB_0001c83c;
        }
      }
      else {
        __android_log_print(5,"awplayer","<%s:%u>: MSGTR_MPDEMUX_MMST_InvalidMMSPacketSize",
                            "MmstStreamingRead",0x286);
        uVar7 = 0x288;
        pcVar3 = "<%s:%u>: ************here1:mms packet len error.packetLen=%d\n";
LAB_0001c7a2:
        uVar5 = 0xffffffff;
        __android_log_print(5,"awplayer",pcVar3,"MmstStreamingRead",uVar7,uStack102440);
      }
    }
    else {
      uVar6 = FUN_0001c564(param_1,*(int *)(param_1 + 0x1c),(int)&uStack102440,4);
      uVar5 = (uint)uVar6;
      if (uVar5 == 0) {
        __android_log_print(5,"awplayer","<%s:%u>: MMST_packet_len Read Failed","MmstStreamingRead",
                            0x2c7);
      }
      else {
        uStack102440 = FUN_0001c29c((int)&uStack102440,0);
        uStack102440 = uStack102440 + 4;
        if (0x19000 < uStack102440) {
          uVar7 = 0x2ce;
          pcVar3 = "<%s:%u>: ************here2:mms packet len error.packetLen=%d\n";
          goto LAB_0001c7a2;
        }
        uVar6 = FUN_0001c564(param_1,*(int *)(param_1 + 0x1c),(int)&uStack102428,uStack102440);
        uVar5 = (uint)uVar6;
        if (uVar5 != 0) {
          if ((((uStack102430._1_1_ != -0x50) || ((char)uStack102430 != '\v')) ||
              (cStack102431 != -6)) || (cStack102432 != -0x32)) {
LAB_0001c834:
            uVar5 = 0xfffffffe;
            goto LAB_0001c83c;
          }
          uVar5 = FUN_0001c29c((int)&uStack102428,0x18);
          uVar5 = uVar5 & 0xffff;
          if (uVar5 == 0x1b) {
            FUN_0001c2c0((int *)(param_1 + 0x70),*(undefined4 *)(param_1 + 0x1c),0x1b,0,0,0,
                         &uStack102428);
          }
          else {
            if ((uVar5 == 0x1e) || (uVar5 != 5)) goto LAB_0001c834;
          }
          uVar5 = 1;
        }
      }
    }
  }
  __android_log_print(5,"awplayer","<%s:%u>: failed \n","MmstStreamingRead",0x2f5);
  if (uVar5 + 1 < 2) {
    close(*(int *)(param_1 + 0x6c));
  }
  else {
    uVar5 = 1;
  }
LAB_0001c83c:
  if (iVar1 == __stack_chk_guard) {
    return uVar5;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



int FUN_0001c89c(int param_1,int param_2)

{
  int iVar1;
  int iVar2;
  uint uVar3;
  int iVar4;
  undefined auStack102436 [102408];
  
  iVar1 = __stack_chk_guard;
  do {
    iVar4 = *(int *)(param_1 + 0x74);
    if (iVar4 != 0) {
      iVar4 = 0;
LAB_0001c920:
      if (iVar1 == __stack_chk_guard) {
        return iVar4;
      }
                    // WARNING: Subroutine does not return
      __stack_chk_fail();
    }
    iVar2 = MmsGetNetworkData(param_1,param_2,auStack102436,0x19000);
    if (iVar2 < 1) {
      __android_log_print(5,"awplayer",
                          "<%s:%u>: ****************the return value  of the recv is 0.\n",
                          "MmstGetAnswer",0xdd);
      iVar4 = -1;
      goto LAB_0001c920;
    }
    uVar3 = FUN_0001c29c((int)auStack102436,0x24);
    if ((uVar3 & 0xffff) != 0x1b) goto LAB_0001c920;
    FUN_0001c2c0((int *)(param_1 + 0x70),param_2,0x1b,0,0,0,auStack102436);
  } while( true );
}



uint MmstStreamingStart(undefined4 param_1,int param_2)

{
  int *piVar1;
  int iVar2;
  char *pcVar3;
  size_t sVar4;
  char *__s;
  undefined4 uVar5;
  uint __fd;
  uint uVar6;
  int iVar7;
  uint uVar8;
  undefined4 *puVar9;
  int iVar10;
  int iVar11;
  int iVar12;
  uint uVar13;
  ulonglong uVar14;
  ulonglong uVar15;
  undefined8 uVar16;
  undefined4 uVar17;
  uint uStack205960;
  uint uStack205936;
  undefined auStack205932 [4];
  char cStack205928;
  ushort uStack205926;
  char acStack205924 [1024];
  undefined4 uStack204900;
  undefined4 uStack204896;
  undefined uStack204892;
  undefined uStack204891;
  undefined uStack204890;
  undefined uStack204889;
  undefined uStack204888;
  undefined uStack204887;
  undefined uStack204886;
  undefined uStack204885;
  undefined uStack204880;
  undefined uStack204868;
  undefined auStack102500 [102408];
  
  iVar2 = __stack_chk_guard;
  iVar12 = *(int *)(param_2 + 0x44);
  pcVar3 = strchr(*(char **)(iVar12 + 0xc),0x2f);
  sVar4 = strlen(pcVar3 + 1);
  __s = (char *)malloc(sVar4 + 1);
  if (__s == (char *)0x0) {
    uVar5 = 6;
    pcVar3 = "<%s:%u>: \x1b[40;31m******************unescpath faile.\n\x1b[0m";
    uVar17 = 0x1a6;
LAB_0001ca42:
    __android_log_print(uVar5,"awplayer",pcVar3,"MmstStreamingStart",uVar17);
  }
  else {
    CdxUrlUnescapeString(__s,pcVar3 + 1);
    if (*(int *)(iVar12 + 0x10) == 0) {
      *(undefined4 *)(iVar12 + 0x10) = 0x6db;
    }
    __fd = Connect2Server(param_2,*(char **)(iVar12 + 8),*(uint *)(iVar12 + 0x10),1);
    if ((int)__fd < 0) {
      free(__s);
      goto LAB_0001d04a;
    }
    uVar13 = 0;
    piVar1 = (int *)(param_2 + 0x70);
    *piVar1 = 0;
    snprintf(acStack205924,0x3ff,
             "\x1c\x03NSPlayer/7.0.0.1956; {33715801-BAB3-9D85-24E9-03B90328270A}; Host: %s",
             *(undefined4 *)(iVar12 + 8));
    uVar6 = __strlen_chk(acStack205924,0x400);
    FUN_0001c244((undefined *)&uStack204900,(int)acStack205924,uVar6);
    iVar12 = __strlen_chk(acStack205924,0x400);
    iVar12 = FUN_0001c2c0(piVar1,__fd,1,0,0x4000b,(iVar12 + 1) * 2,&uStack204900);
    if (iVar12 < 0) {
      uVar5 = 5;
      pcVar3 = "<%s:%u>: --- send command error!";
      uVar17 = 0x1d1;
      goto LAB_0001ca42;
    }
    iVar12 = MmsGetNetworkData(param_2,__fd,&uStack204900,0x19000);
    if (0 < iVar12) {
      __android_log_print(3,"awplayer","<%s:%u>: first command","MmstStreamingStart",0x1dc);
      FUN_0001c244(&uStack204892,(int)&DAT_00021722,0x18);
      uStack204900 = 0;
      uStack204896 = 0;
      FUN_0001c2c0(piVar1,__fd,2,0,0,0x3a,&uStack204900);
      iVar12 = MmsGetNetworkData(param_2,__fd,&uStack204900,0x19000);
      if (0 < iVar12) {
        __android_log_print(3,"awplayer","<%s:%u>: ---- second command","MmstStreamingStart",499);
        sVar4 = strlen(__s);
        FUN_0001c244(&uStack204892,(int)__s,sVar4);
        uStack204900 = 0;
        uStack204896 = 0;
        sVar4 = strlen(__s);
        FUN_0001c2c0(piVar1,__fd,5,0,0,(sVar4 + 5) * 2,&uStack204900);
        free(__s);
        uVar6 = FUN_0001c89c(param_2,__fd);
        if (uVar6 == 0xffffffff) {
          close(__fd);
          __fd = uVar6;
          goto LAB_0001d04a;
        }
        memset(&uStack204900,0,0x28);
        uStack204868 = 2;
        FUN_0001c2c0(piVar1,__fd,0x15,1,0,0x28,&uStack204900);
        iVar12 = *(int *)(param_2 + 0x48);
        *(undefined4 *)(param_2 + 0x7c) = 0;
        uStack205936 = 0;
        do {
          while( true ) {
            uVar16 = FUN_0001c564(param_2,__fd,(int)auStack205932,8);
            if ((int)uVar16 == 0) goto LAB_0001d042;
            if (cStack205928 == '\x02') break;
            uVar16 = FUN_0001c564(param_2,__fd,(int)&uStack205936,4);
            if ((int)uVar16 == 0) goto LAB_0001d042;
            uStack205936 = FUN_0001c29c((int)&uStack205936,0);
            uStack205936 = uStack205936 + 4;
            if ((0x19000 < uStack205936) ||
               (uVar16 = FUN_0001c564(param_2,__fd,(int)auStack102500,uStack205936),
               (int)uVar16 == 0)) goto LAB_0001d042;
            uVar6 = FUN_0001c29c((int)auStack102500,0x18);
            if ((uVar6 & 0xffff) == 0x1b) {
              FUN_0001c2c0(piVar1,__fd,0x1b,0,0,0,auStack102500);
            }
          }
          uStack205936 = uStack205926 - 8;
          if ((((int)uStack205936 < 0) || ((int)(0x2000 - uVar13) < (int)uStack205936)) ||
             (uVar16 = FUN_0001c564(param_2,__fd,iVar12 + uVar13,uStack205936), (int)uVar16 == 0))
          goto LAB_0001d042;
          uVar13 = uVar13 + uStack205936;
          iVar10 = iVar12 + uVar13;
        } while ((*(char *)(iVar10 + -1) != '\x01') || (*(char *)(iVar10 + -2) != '\x01'));
        if (uVar13 != 0) {
          uVar6 = 0xffffffff;
          *(uint *)(param_2 + 0x50) = *(int *)(param_2 + 0x50) + uVar13;
          iVar10 = *(int *)(param_2 + 0x48);
          *(uint *)(param_2 + 0x5c) = *(int *)(param_2 + 0x5c) + uVar13;
          *(uint *)(param_2 + 0x60) = *(int *)(param_2 + 0x60) + uVar13;
          uVar8 = *(uint *)(param_2 + 0x28);
          iVar12 = 0x1e;
          *(uint *)(param_2 + 0x28) = uVar8 + uVar13;
          *(uint *)(param_2 + 0x2c) =
               *(int *)(param_2 + 0x2c) + ((int)uVar13 >> 0x1f) + (uint)CARRY4(uVar8,uVar13);
          while (iVar12 < (int)uVar13) {
            iVar11 = iVar10 + iVar12;
            iVar7 = iVar10 + iVar12 + 8;
            uVar15 = (ulonglong)*(byte *)(iVar11 + 1) << 8 |
                     (ulonglong)*(byte *)(iVar11 + 2) << 0x10 |
                     (ulonglong)*(byte *)(iVar10 + iVar12) |
                     (ulonglong)*(byte *)(iVar11 + 3) << 0x18 |
                     (ulonglong)*(byte *)(iVar11 + 4) << 0x20 |
                     (ulonglong)*(byte *)(iVar11 + 5) << 0x28 |
                     (ulonglong)*(byte *)(iVar11 + 6) << 0x30 |
                     (ulonglong)*(byte *)(iVar11 + 7) << 0x38;
            iVar11 = iVar10 + iVar12 + 0x10;
            uVar14 = (ulonglong)*(byte *)(iVar7 + 1) << 8 | (ulonglong)*(byte *)(iVar7 + 2) << 0x10
                     | (ulonglong)*(byte *)(iVar10 + iVar12 + 8) |
                     (ulonglong)*(byte *)(iVar7 + 3) << 0x18 |
                     (ulonglong)*(byte *)(iVar7 + 4) << 0x20 |
                     (ulonglong)*(byte *)(iVar7 + 5) << 0x28 |
                     (ulonglong)*(byte *)(iVar7 + 6) << 0x30 |
                     (ulonglong)*(byte *)(iVar7 + 7) << 0x38;
            uStack205960 = (uint)*(byte *)(iVar11 + 1) << 8 | (uint)*(byte *)(iVar11 + 2) << 0x10 |
                           (uint)*(byte *)(iVar10 + iVar12 + 0x10) |
                           (uint)*(byte *)(iVar11 + 3) << 0x18;
            if (((uint)(uVar14 ^ 0x6cce6200aa00d9a6) | (uint)((uVar14 ^ 0x6cce6200aa00d9a6) >> 0x20)
                ) != 0 || ((uint)(uVar15 ^ 0x11cf668e75b22630) |
                          (uint)((uVar15 ^ 0x11cf668e75b22630) >> 0x20)) != 0 &&
                          ((uint)(uVar15 ^ 0x11cf668e75b22636) |
                          (uint)((uVar15 ^ 0x11cf668e75b22636) >> 0x20)) != 0) {
              if (((uint)(uVar15 ^ 0x11cfa9478cabdca1) |
                  (uint)((uVar15 ^ 0x11cfa9478cabdca1) >> 0x20)) == 0 &&
                  ((uint)(uVar14 ^ 0x6553200cc000e48e) |
                  (uint)((uVar14 ^ 0x6553200cc000e48e) >> 0x20)) == 0) {
                uVar6 = FUN_0001c29c(iVar10,iVar12 + 0x5c);
              }
              else {
                if (((uint)(uVar15 ^ 0x11cfa9b7b7dc0791) |
                    (uint)((uVar15 ^ 0x11cfa9b7b7dc0791) >> 0x20)) == 0 &&
                    ((uint)(uVar14 ^ 0x6553200cc000e68e) |
                    (uint)((uVar14 ^ 0x6553200cc000e68e) >> 0x20)) == 0) {
                  if (*(int *)(param_2 + 0x7c) < 0x14) {
                    *(uint *)(param_2 + (*(int *)(param_2 + 0x7c) + 0x20) * 4) =
                         (uint)*(ushort *)(iVar10 + iVar12 + 0x48);
                    *(int *)(param_2 + 0x7c) = *(int *)(param_2 + 0x7c) + 1;
                  }
                }
              }
            }
            iVar12 = iVar12 + uStack205960;
          }
          *(uint *)(param_2 + 0xd0) = uVar6;
          memset(&uStack204900,0,0x28);
          iVar11 = *(int *)(param_2 + 0x7c);
          iVar10 = 1;
          iVar12 = param_2;
          puVar9 = &uStack204900;
          while( true ) {
            if (iVar11 <= iVar10) break;
            uVar5 = *(undefined4 *)(iVar12 + 0x84);
            iVar10 = iVar10 + 1;
            *(undefined *)((int)puVar9 + 2) = 0xff;
            *(undefined *)((int)puVar9 + 3) = 0xff;
            *(char *)(puVar9 + 1) = (char)uVar5;
            *(undefined *)((int)puVar9 + 5) = 0;
            iVar12 = iVar12 + 4;
            puVar9 = (undefined4 *)((int)puVar9 + 6);
          }
          FUN_0001c2c0(piVar1,__fd,0x33,iVar11,~(~(*(uint *)(param_2 + 0x80) & 0xffff) << 0x10),
                       (iVar11 + -1) * 6 + 2,&uStack204900);
          FUN_0001c89c(param_2,__fd);
          memset(&uStack204900,0,0x28);
          uStack204892 = 0xff;
          uStack204891 = 0xff;
          uStack204890 = 0xff;
          uStack204889 = 0xff;
          uStack204888 = 0xff;
          uStack204887 = 0xff;
          uStack204886 = 0xff;
          uStack204885 = 0xff;
          uStack204880 = 4;
          FUN_0001c2c0(piVar1,__fd,7,1,~(~(*(uint *)(param_2 + 0x80) & 0xffff) << 0x10),0x18,
                       &uStack204900);
          iVar12 = MmsGetNetworkData(param_2,__fd,&uStack204900,0x19000);
          if (0 < iVar12) {
            *(uint *)(param_2 + 0x1c) = __fd;
            goto LAB_0001d04a;
          }
        }
      }
    }
LAB_0001d042:
    close(__fd);
  }
  __fd = 0xffffffff;
LAB_0001d04a:
  if (iVar2 == __stack_chk_guard) {
    return __fd;
  }
                    // WARNING: Subroutine does not return
  __stack_chk_fail();
}



undefined4 AsfStreamStart(undefined4 param_1,char **param_2)

{
  int iVar1;
  char *pcVar2;
  char *pcVar3;
  undefined4 uVar4;
  
  iVar1 = CdxUrlNew();
  if (iVar1 != 0) {
    pcVar2 = (char *)CdxCheck4Proxies();
    param_2[0x11] = pcVar2;
    CdxUrlFree(iVar1);
    pcVar2 = *(char **)(param_2[0x11] + 4);
    uVar4 = *(undefined4 *)(param_2[0x11] + 0x10);
    iVar1 = strcasecmp(pcVar2,"mmst");
    if ((iVar1 == 0) || (iVar1 = strcasecmp(pcVar2,"mms"), iVar1 == 0)) {
      __android_log_print(3,"awplayer","<%s:%u>: --- Trying mmst","AsfStreamStart",0x315);
      pcVar3 = (char *)MmstStreamingStart(param_1,(int)param_2);
      *(undefined4 *)(param_2[0x11] + 0x10) = uVar4;
      param_2[0x1a] = (char *)0x0;
      param_2[7] = pcVar3;
      if (-1 < (int)pcVar3) {
        return 0;
      }
      __android_log_print(5,"awplayer","<%s:%u>: *******************ASF/TCP failed, is not mmst.\n",
                          "AsfStreamStart",0x31e);
      if (pcVar3 == (char *)0xfffffffe) {
        return 0xffffffff;
      }
    }
    iVar1 = strcasecmp(pcVar2,"mmsh");
    if (((iVar1 == 0) || (iVar1 = strcasecmp(pcVar2,"mmshttp"), iVar1 == 0)) ||
       (iVar1 = strcasecmp(pcVar2,"mms"), iVar1 == 0)) {
      __android_log_print(3,"awplayer","<%s:%u>: ********************Trying ASF/MMSH...\n",
                          "AsfStreamStart",0x329);
      pcVar2 = MmshStreamingStart(param_1,param_2);
      *(undefined4 *)(param_2[0x11] + 0x10) = uVar4;
      param_2[0x1a] = (char *)0x1;
      param_2[7] = pcVar2;
      if (-1 < (int)pcVar2) {
        return 0;
      }
      __android_log_print(3,"awplayer","<%s:%u>: *********************ASF/MMSH failed\n",
                          "AsfStreamStart",0x332);
    }
  }
  return 0xffffffff;
}



undefined4 CdxReadAsfStream(char **param_1)

{
  bool bVar1;
  bool bVar2;
  uint uVar3;
  undefined4 uVar4;
  char *pcVar5;
  char **ppcVar6;
  char **ppcVar7;
  int *piVar8;
  undefined4 uVar9;
  
  ppcVar7 = param_1 + 4;
  DataMemoryBarrier(0x1f);
  do {
    ExclusiveAccess(ppcVar7);
    bVar1 = (bool)hasExclusiveAccess(ppcVar7);
  } while (!bVar1);
  *ppcVar7 = *ppcVar7 + 1;
  DataMemoryBarrier(0x1f);
  uVar3 = AsfStreamStart(param_1[3],param_1);
  ppcVar6 = param_1 + 5;
  do {
    ExclusiveAccess(ppcVar6);
    bVar1 = (bool)hasExclusiveAccess(ppcVar6);
  } while (!bVar1);
  *ppcVar6 = (char *)0x0;
  DataMemoryBarrier(0x1f);
  piVar8 = (int *)param_1[0x39];
  if ((int)uVar3 < 0) {
    DataMemoryBarrier(0x1f);
    do {
      ExclusiveAccess(ppcVar7);
      bVar1 = (bool)hasExclusiveAccess(ppcVar7);
    } while (!bVar1);
    *ppcVar7 = *ppcVar7 + -1;
    DataMemoryBarrier(0x1f);
    pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0x36));
    param_1[6] = (char *)0x2;
    pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0x36));
    param_1[8] = (char *)0x1;
  }
  else {
    bVar1 = true;
    while (param_1[0x1e] != (char *)0x1) {
      if ((int)(param_1[0x10] + -(int)param_1[0x17]) < 0x300000) {
        usleep(40000);
      }
      else {
        if (param_1[0x1a] == (char *)0x0) {
          uVar3 = FUN_0001c5d4((int)param_1);
        }
        else {
          if (param_1[0x1a] == (char *)0x1) {
            if (*piVar8 - 4U < 2) {
              bVar2 = MmshNopStreamingReadFunc((int)param_1,0);
              uVar3 = (uint)bVar2;
            }
            else {
              uVar3 = MmshStreamingReadFunc((int)param_1,0);
            }
          }
        }
        if (uVar3 == 0) {
          pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0x36));
          param_1[6] = (char *)0x3;
          pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0x36));
          uVar9 = 0x3a2;
          pcVar5 = "<%s:%u>: read the stream end.\n";
          uVar4 = 5;
LAB_0001d2f2:
          __android_log_print(uVar4,"awplayer",pcVar5,"CdxReadAsfStream",uVar9);
          goto LAB_0001d340;
        }
        if (uVar3 == 0xffffffff) {
          pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0x36));
          param_1[6] = (char *)0x2;
          pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0x36));
          uVar9 = 0x3aa;
          pcVar5 = "<%s:%u>: \x1b[40;31mread the stream error.\n\x1b[0m";
          uVar4 = 6;
          goto LAB_0001d2f2;
        }
        if ((bVar1) && (0x3ff < (int)param_1[0x17])) {
          memcpy(param_1[1],"mms-allwinner",0xd);
          bVar1 = false;
          memcpy(param_1[1] + 0xd,param_1[0x12],0x3f3);
          pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0x36));
          param_1[6] = (char *)0x0;
          pthread_cond_signal((pthread_cond_t *)(param_1 + 0x37));
          pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0x36));
        }
      }
    }
    pthread_mutex_lock((pthread_mutex_t *)(param_1 + 0x36));
    param_1[6] = (char *)0x2;
    pthread_mutex_unlock((pthread_mutex_t *)(param_1 + 0x36));
LAB_0001d340:
    ppcVar7 = param_1 + 4;
    DataMemoryBarrier(0x1f);
    do {
      ExclusiveAccess(ppcVar7);
      bVar1 = (bool)hasExclusiveAccess(ppcVar7);
    } while (!bVar1);
    *ppcVar7 = *ppcVar7 + -1;
    DataMemoryBarrier(0x1f);
    DataMemoryBarrier(0x1f);
    do {
      ExclusiveAccess(ppcVar7);
      pcVar5 = *ppcVar7;
      bVar1 = (bool)hasExclusiveAccess(ppcVar7);
    } while (!bVar1);
    *ppcVar7 = pcVar5;
    DataMemoryBarrier(0x1f);
    __android_log_print(3,"awplayer","<%s:%u>: ---read thread ref = %d","CdxReadAsfStream",0x3bc,
                        pcVar5);
    param_1[8] = (char *)0x1;
  }
  return 0;
}



undefined8 FUN_0001d3d0(char *param_1)

{
  char *pcVar1;
  
  pcVar1 = param_1;
  if (param_1 == (char *)0x0) {
    pcVar1 = "__FileStreamSize";
    param_1 = (char *)__android_log_assert
                                ("!(stream)","awplayer","<%s:%d>CDX_CHECK(%s) failed.",
                                 "__FileStreamSize",0x144,"stream");
  }
  return CONCAT44(*(undefined4 *)(pcVar1 + 0x24),*(undefined4 *)(param_1 + 0x20));
}



undefined8 FUN_0001d698(uint *param_1,uint param_2,undefined4 param_3)

{
  bool bVar1;
  undefined4 uVar2;
  uint uVar3;
  int iVar4;
  
  do {
    DataMemoryBarrier(0x1f);
    do {
      ExclusiveAccess(param_1);
      uVar3 = *param_1;
      if (uVar3 != 0) goto LAB_0001d6f4;
      bVar1 = (bool)hasExclusiveAccess(param_1);
    } while (!bVar1);
    *param_1 = param_2;
    uVar3 = 0;
    DataMemoryBarrier(0x1f);
LAB_0001d6f4:
    iVar4 = 1 - uVar3;
    if (1 < uVar3) {
      iVar4 = 0;
    }
    if (iVar4 != 0) {
      uVar2 = 0;
      goto LAB_0001d702;
    }
    DataMemoryBarrier(0x1f);
    do {
      ExclusiveAccess(param_1);
      uVar3 = *param_1;
      bVar1 = (bool)hasExclusiveAccess(param_1);
    } while (!bVar1);
    *param_1 = uVar3;
    DataMemoryBarrier(0x1f);
    if (uVar3 == 3) {
      param_1 = (uint *)0x53;
      __android_log_print(5,"awplayer","<%s:%u>: file is closing.","WaitIdleAndSetState",0x53,
                          param_2,param_3);
      uVar2 = 0xffffffff;
LAB_0001d702:
      return CONCAT44(param_1,uVar2);
    }
  } while( true );
}



undefined4 FUN_0001d710(undefined *param_1,undefined4 param_2,uint param_3,uint param_4,int param_5)

{
  char *pcVar1;
  uint uVar2;
  int __fd;
  undefined4 *puVar3;
  int __whence;
  uint uVar4;
  char *pcVar5;
  uint *puVar6;
  uint uVar7;
  undefined4 unaff_r7;
  uint uVar8;
  uint uVar9;
  int iVar10;
  bool bVar11;
  undefined8 uVar12;
  ulonglong uVar13;
  longlong lVar14;
  undefined4 uVar15;
  undefined4 in_stack_ffffffbc;
  
  if (param_1 == (undefined *)0x0) {
    pcVar1 = "!(stream)";
    uVar15 = 0xe2;
    pcVar5 = "stream";
LAB_0001d902:
    __android_log_assert
              (pcVar1,"awplayer","<%s:%d>CDX_CHECK(%s) failed.","__FileStreamSeek",uVar15,pcVar5);
LAB_0001d908:
    puVar3 = (undefined4 *)__errno();
    uVar15 = *puVar3;
    *(undefined4 *)(pcVar5 + 0x10) = uVar15;
    uVar15 = __android_log_print(6,"awplayer",&DAT_00020e7f,"__FileStreamSeek",0x11d,uVar15,param_5)
    ;
    lVar14 = CONCAT44(unaff_r7,uVar15);
LAB_0001d93a:
    puVar3 = (undefined4 *)(pcVar5 + 4);
    do {
      ExclusiveAccess(puVar3);
      bVar11 = (bool)hasExclusiveAccess(puVar3);
    } while (!bVar11);
    *puVar3 = 0;
    DataMemoryBarrier(0x1f);
    if (lVar14 < 0) {
      uVar15 = 0xffffffff;
    }
    else {
      uVar15 = 0;
    }
  }
  else {
    puVar6 = (uint *)(param_1 + 4);
    uVar12 = FUN_0001d698(puVar6,2,param_3);
    if ((int)uVar12 == 0) {
      iVar10 = param_5;
      if (param_5 == 1) {
        uVar13 = lseek64(*(int *)(param_1 + 0x14),CONCAT44(in_stack_ffffffbc,1),
                         (int)((ulonglong)uVar12 >> 0x20));
        uVar12 = VectorSub((uVar13 & 0xffffffff00000000) + (uVar13 & 0xffffffff),
                           *(undefined8 *)(param_1 + 0x18),8);
        uVar2 = (int)((ulonglong)uVar12 >> 0x20) + param_4 + CARRY4((uint)uVar12,param_3);
        __whence = *(int *)(param_1 + 0x24);
        if ((-1 < (int)uVar2) &&
           (bVar11 = (uint)uVar12 + param_3 <= *(uint *)(param_1 + 0x20),
           (int)((__whence - uVar2) - (uint)!bVar11) < 0 ==
           (__whence < 0 == -1 < (int)uVar2 &&
           (int)(__whence + ~uVar2 + (uint)bVar11) < 0 != __whence < 0))) {
          __fd = *(int *)(param_1 + 0x14);
LAB_0001d8d6:
          lVar14 = lseek64(__fd,CONCAT44(in_stack_ffffffbc,iVar10),__whence);
          unaff_r7 = (undefined4)((ulonglong)lVar14 >> 0x20);
          pcVar5 = param_1;
          if (lVar14 < 0) goto LAB_0001d908;
          goto LAB_0001d93a;
        }
        __android_log_print(6,"awplayer",&DAT_00020e2b,"__FileStreamSeek",0xff);
        puVar3 = (undefined4 *)(param_1 + 4);
        syscall(0xe0);
        CdxDumpThreadStack();
        do {
          ExclusiveAccess(puVar3);
          bVar11 = (bool)hasExclusiveAccess(puVar3);
        } while (!bVar11);
        *puVar3 = 0;
        DataMemoryBarrier(0x1f);
      }
      else {
        if (param_5 == 2) {
          uVar2 = *(uint *)(param_1 + 0x18);
          uVar4 = *(uint *)(param_1 + 0x1c);
          uVar9 = *(uint *)(param_1 + 0x20) + uVar2;
          iVar10 = *(int *)(param_1 + 0x24) + uVar4 + CARRY4(*(uint *)(param_1 + 0x20),uVar2);
          uVar7 = uVar9 + param_3;
          uVar8 = iVar10 + param_4 + CARRY4(uVar9,param_3);
          __whence = (uVar8 - uVar4) - (uint)(uVar2 > uVar7);
          if ((__whence < 0 ==
               ((int)uVar8 < 0 == -1 < (int)uVar4 &&
               (int)(uVar8 + ~uVar4 + (uint)(uVar2 <= uVar7)) < 0 != (int)uVar8 < 0)) &&
             ((int)((iVar10 - uVar8) - (uint)(uVar7 > uVar9)) < 0 ==
              (iVar10 < 0 == -1 < (int)uVar8 &&
              (int)(iVar10 + ~uVar8 + (uint)(uVar7 <= uVar9)) < 0 != iVar10 < 0))) {
            __fd = *(int *)(param_1 + 0x14);
            iVar10 = (int)uVar12;
            goto LAB_0001d8d6;
          }
          uVar15 = 0x10c;
        }
        else {
          if (param_5 != 0) {
            param_5 = 0x115;
            pcVar1 = "!(0)";
            uVar15 = 0x115;
            pcVar5 = "0";
            goto LAB_0001d902;
          }
          __whence = *(int *)(param_1 + 0x24);
          if ((-1 < (int)param_4) &&
             ((int)((__whence - param_4) - (uint)(param_3 > *(uint *)(param_1 + 0x20))) < 0 ==
              (__whence < 0 == -1 < (int)param_4 &&
              (int)(__whence + ~param_4 + (uint)(param_3 <= *(uint *)(param_1 + 0x20))) < 0 !=
              __whence < 0))) {
            VectorAdd(CONCAT44(param_4,param_3),*(undefined8 *)(param_1 + 0x18),8);
            __fd = *(int *)(param_1 + 0x14);
            goto LAB_0001d8d6;
          }
          uVar15 = 0xf2;
        }
        __android_log_print(6,"awplayer",&DAT_00020dea,"__FileStreamSeek",uVar15);
        syscall(0xe0);
        puVar3 = (undefined4 *)(param_1 + 4);
        CdxDumpThreadStack();
        do {
          ExclusiveAccess(puVar3);
          bVar11 = (bool)hasExclusiveAccess(puVar3);
        } while (!bVar11);
        *puVar3 = 0;
        DataMemoryBarrier(0x1f);
      }
    }
    else {
      DataMemoryBarrier(0x1f);
      do {
        ExclusiveAccess(puVar6);
        uVar2 = *puVar6;
        bVar11 = (bool)hasExclusiveAccess(puVar6);
      } while (!bVar11);
      *puVar6 = uVar2;
      DataMemoryBarrier(0x1f);
      __android_log_print(6,"awplayer",&DAT_00020dc1,"__FileStreamSeek",0xe7,uVar2);
      *(undefined4 *)(param_1 + 0x10) = 1;
    }
    uVar15 = 0xffffffff;
  }
  return uVar15;
}



ssize_t FUN_0001da94(undefined *param_1,void *param_2,uint param_3)

{
  uint uVar1;
  int __whence;
  int iVar2;
  uint uVar3;
  undefined4 *puVar4;
  ssize_t sVar5;
  undefined4 uVar6;
  uint *puVar7;
  int iVar8;
  bool bVar9;
  uint uVar10;
  longlong lVar11;
  undefined8 uVar12;
  ulonglong uVar13;
  char *in_stack_ffffffc4;
  
  uVar12 = CONCAT44(param_2,param_1);
  if (param_1 == (undefined *)0x0) {
    in_stack_ffffffc4 = "stream";
    uVar12 = __android_log_assert
                       ("!(stream)","awplayer","<%s:%d>CDX_CHECK(%s) failed.","__FileStreamRead",
                        0x6a);
    param_1 = "stream";
  }
  uVar13 = lseek64(*(int *)((int)uVar12 + 0x14),CONCAT44(in_stack_ffffffc4,1),
                   (int)((ulonglong)uVar12 >> 0x20));
  uVar1 = *(uint *)(param_1 + 0x24);
  lVar11 = VectorSub((uVar13 & 0xffffffff00000000) + (uVar13 & 0xffffffff),
                     *(undefined8 *)(param_1 + 0x18),8);
  iVar8 = (int)((ulonglong)lVar11 >> 0x20);
  uVar10 = (uint)lVar11;
  iVar2 = (iVar8 - uVar1) - (uint)(*(uint *)(param_1 + 0x20) > uVar10);
  if (iVar2 < 0 ==
      (lVar11 < 0 == -1 < (int)uVar1 &&
      (int)(iVar8 + ~uVar1 + (uint)(*(uint *)(param_1 + 0x20) <= uVar10)) < 0 != lVar11 < 0)) {
    __android_log_print(3,"awplayer","<%s:%u>: eos, pos(%lld)","__FileStreamRead",0x72);
    sVar5 = 0;
  }
  else {
    puVar7 = (uint *)(param_1 + 4);
    uVar12 = FUN_0001d698(puVar7,1,iVar2);
    if ((int)uVar12 == 0) {
      uVar1 = *(uint *)(param_1 + 0x20);
      iVar2 = *(int *)(param_1 + 0x24);
      uVar3 = iVar8 + (uint)CARRY4(uVar10,param_3);
      bVar9 = uVar10 + param_3 <= uVar1;
      if ((int)((iVar2 - uVar3) - (uint)!bVar9) < 0 !=
          (iVar2 < 0 == -1 < (int)uVar3 && (int)(iVar2 + ~uVar3 + (uint)bVar9) < 0 != iVar2 < 0)) {
        param_3 = uVar1 - uVar10;
      }
      sVar5 = read(*(int *)(param_1 + 0x14),param_2,param_3);
      if (sVar5 < (int)param_3) {
        uVar13 = lseek64(*(int *)(param_1 + 0x14),CONCAT44(in_stack_ffffffc4,1),__whence);
        uVar13 = VectorSub((uVar13 & 0xffffffff00000000) + (uVar13 & 0xffffffff),
                           *(undefined8 *)(param_1 + 0x18),8);
        if (((uint)(uVar13 ^ *(ulonglong *)(param_1 + 0x20)) |
            (uint)((uVar13 ^ *(ulonglong *)(param_1 + 0x20)) >> 0x20)) == 0) {
          __android_log_print(3,"awplayer","<%s:%u>: eos, ret(%d), pos(%lld)...","__FileStreamRead",
                              0x87,sVar5,uVar13);
          *(undefined4 *)(param_1 + 0x10) = 3;
        }
        else {
          uVar12 = __errno();
          uVar6 = *(undefined4 *)uVar12;
          *(undefined4 *)(param_1 + 0x10) = uVar6;
          uVar13 = lseek64(*(int *)(param_1 + 0x14),CONCAT44(in_stack_ffffffc4,1),
                           (int)((ulonglong)uVar12 >> 0x20));
          lVar11 = (uVar13 & 0xffffffff00000000) + (uVar13 & 0xffffffff);
          VectorSub(lVar11,*(undefined8 *)(param_1 + 0x18),8);
          __android_log_print((int)lVar11,6,"awplayer",&DAT_00020f75,"__FileStreamRead",0x8e,sVar5,
                              uVar6);
        }
      }
      puVar4 = (undefined4 *)(param_1 + 4);
      do {
        ExclusiveAccess(puVar4);
        bVar9 = (bool)hasExclusiveAccess(puVar4);
      } while (!bVar9);
      *puVar4 = 0;
      DataMemoryBarrier(0x1f);
    }
    else {
      DataMemoryBarrier(0x1f);
      do {
        ExclusiveAccess(puVar7);
        uVar1 = *puVar7;
        bVar9 = (bool)hasExclusiveAccess(puVar7);
      } while (!bVar9);
      *puVar7 = uVar1;
      DataMemoryBarrier(0x1f);
      sVar5 = -1;
      __android_log_print(6,"awplayer",&DAT_00020dc1,"__FileStreamRead",0x78,uVar1);
    }
  }
  return sVar5;
}



int __FileStreamConnect(char *param_1)

{
  byte *pbVar1;
  bool bVar2;
  int iVar3;
  int *piVar4;
  uint *puVar5;
  char *pcVar6;
  undefined4 uVar7;
  ssize_t sVar8;
  undefined4 *puVar9;
  void *pvVar10;
  int iVar11;
  int iVar12;
  int __whence;
  int __whence_00;
  uint __whence_01;
  int __whence_02;
  uint extraout_r1;
  int __whence_03;
  char *pcVar13;
  undefined4 uVar14;
  char *pcVar15;
  char *pcVar16;
  char *pcVar17;
  int iVar18;
  undefined8 uVar19;
  ulonglong uVar20;
  __off64_t _Var21;
  char *in_stack_ffffe7bc;
  char *pcVar22;
  ulonglong in_stack_ffffe7c0;
  int local_1828;
  char acStack6180 [1023];
  char acStack5157 [8];
  char acStack5149 [5113];
  int local_24;
  
  local_24 = __stack_chk_guard;
  if (param_1 == (char *)0x0) {
    param_1 = "stream";
    in_stack_ffffe7bc = "stream";
    __android_log_assert
              ("!(stream)","awplayer","<%s:%d>CDX_CHECK(%s) failed.","__FileStreamConnect",0x166);
  }
  pcVar15 = *(char **)(param_1 + 0x2c);
  iVar3 = strncmp(pcVar15,"file://",7);
  if (iVar3 == 0) {
    iVar3 = open(pcVar15 + 7,0x20000);
    *(int *)(param_1 + 0x14) = iVar3;
    if (iVar3 < 1) {
      piVar4 = (int *)__errno();
      uVar14 = 0x16e;
      pcVar15 = "<%s:%u>: \x1b[40;31mopen file failure, errno(%d)\x1b[0m";
      local_1828 = *piVar4;
      goto LAB_0001defe;
    }
    *(undefined4 *)(param_1 + 0x18) = 0;
    *(undefined4 *)(param_1 + 0x1c) = 0;
    uVar20 = lseek64(iVar3,CONCAT44(in_stack_ffffe7bc,2),__whence);
    pcVar15 = "awplayer";
    pcVar17 = "__FileStreamConnect";
    *(int *)(param_1 + 0x20) = (int)uVar20;
    *(int *)(param_1 + 0x24) = (int)(uVar20 >> 0x20);
    uVar20 = uVar20 & 0xffffffff00000000;
    __android_log_print(3,"awplayer","<%s:%u>: \t*************impl->size=%lld","__FileStreamConnect"
                        ,0x175);
    _Var21 = lseek64(*(int *)(param_1 + 0x14),ZEXT48(in_stack_ffffe7bc) << 0x20,__whence_00);
    if ((int)_Var21 != 0) {
      puVar5 = (uint *)__errno((int)_Var21,(int)((ulonglong)_Var21 >> 0x20));
      pcVar13 = "<%s:%d>check (%s) failed:errno(%d)";
      uVar14 = 0x177;
      uVar20 = uVar20 & 0xffffffff00000000 | (ulonglong)*puVar5;
      pcVar6 = "!(ret == 0)";
      pcVar22 = "ret == 0";
      pcVar16 = pcVar17;
      goto LAB_0001e060;
    }
    if (*(void **)(param_1 + 0x2c) != (void *)0x0) {
      free(*(void **)(param_1 + 0x2c));
      *(undefined4 *)(param_1 + 0x2c) = 0;
    }
    memset(acStack5157 + 1,0,0x1400);
    uVar19 = 0;
    uVar14 = *(undefined4 *)(param_1 + 0x20);
    uVar7 = *(undefined4 *)(param_1 + 0x24);
    __sprintf_chk(acStack5157 + 1,0,0x1400,"fd://%d?offset=%lld&length=%lld",
                  *(undefined4 *)(param_1 + 0x14));
    pcVar16 = strdup(acStack5157 + 1);
    *(char **)(param_1 + 0x2c) = pcVar16;
    __android_log_print(3,"awplayer","<%s:%u>: impl->filePath=%s","__FileStreamConnect",0x181,
                        pcVar16,uVar19,uVar14,uVar7);
LAB_0001e114:
    puVar9 = (undefined4 *)(param_1 + 4);
    do {
      ExclusiveAccess(puVar9);
      bVar2 = (bool)hasExclusiveAccess(puVar9);
    } while (!bVar2);
    *puVar9 = 0;
    DataMemoryBarrier(0x1f);
    pvVar10 = malloc(0x20000);
    *(undefined4 *)(param_1 + 0xc) = 0x20000;
    *(undefined4 *)(param_1 + 0x10) = 0;
    uVar19 = VectorAdd(*(undefined8 *)(param_1 + 0x20),0xffffffffffffffff,8);
    *(void **)(param_1 + 8) = pvVar10;
    if ((uint)uVar19 < 0x1ffff && (int)((ulonglong)uVar19 >> 0x20) == 0) {
      __android_log_print(5,"awplayer",
                          "<%s:%u>: File too small, size(%lld), will read all for probe...",
                          "__FileStreamConnect",0x1c6,pcVar16,*(undefined8 *)(param_1 + 0x20),uVar14
                          ,uVar7);
      *(undefined4 *)(param_1 + 0xc) = *(undefined4 *)(param_1 + 0x20);
    }
    sVar8 = read(*(int *)(param_1 + 0x14),*(void **)(param_1 + 8),*(size_t *)(param_1 + 0xc));
    if (*(int *)(param_1 + 0xc) <= sVar8) {
      pcVar15 = acStack5157 + 1;
      iVar18 = *(int *)(param_1 + 8);
      iVar3 = 0;
      memset(pcVar15,0,0x400);
      snprintf(pcVar15,0x400,":%d:[",0x10);
      do {
        iVar11 = __strlen_chk(pcVar15,0x400);
        iVar12 = __strlen_chk(pcVar15,0x400);
        pbVar1 = (byte *)(iVar18 + iVar3);
        iVar3 = iVar3 + 1;
        snprintf(pcVar15 + iVar11,0x400 - iVar12,"%02hhx ",(uint)*pbVar1);
      } while (iVar3 != 0x10);
      iVar3 = __strlen_chk(pcVar15,0x400);
      acStack5157[iVar3] = ']';
      __android_log_print(3,"awplayer","<%s:%u>: %s","__FileStreamConnect",0x1d1);
      _Var21 = lseek64(*(int *)(param_1 + 0x14),ZEXT48(pcVar15) << 0x20,__whence_03);
      iVar3 = (int)_Var21;
      if (iVar3 == -1) {
        puVar9 = (undefined4 *)__errno();
        __android_log_print(5,"awplayer","<%s:%u>: io fail errno(%d)","__FileStreamConnect",0x1d6,
                            *puVar9);
      }
      else {
        *(undefined4 *)(param_1 + 0x10) = 0;
      }
      goto LAB_0001e26c;
    }
    piVar4 = (int *)__errno();
    pcVar15 = "<%s:%u>: io fail, errno=%d";
    local_1828 = *piVar4;
    uVar7 = 5;
    uVar14 = 0x1cc;
LAB_0001df02:
    __android_log_print(uVar7,"awplayer",pcVar15,"__FileStreamConnect",uVar14,local_1828);
  }
  else {
    iVar3 = strncmp(pcVar15,"fd://",5);
    if (iVar3 != 0) {
      pcVar16 = (char *)0x1bb;
      pcVar6 = "!(0)";
      pcVar13 = "<%s:%d>check (%s) failed:uri(%s) not file stream...";
      pcVar17 = "__FileStreamConnect";
      uVar14 = 0x1bb;
      param_1 = "0";
      uVar20 = in_stack_ffffe7c0 & 0xffffffff00000000 | ZEXT48(pcVar15);
      pcVar22 = "0";
LAB_0001e060:
      __android_log_assert(pcVar6,"awplayer",pcVar13,pcVar17,uVar14,pcVar22,uVar20);
LAB_0001e064:
      snprintf(acStack6180,0x400,"/proc/self/fd/%d",pcVar16);
      strcpy(acStack5157 + 1,"file://");
      sVar8 = readlink(acStack6180,acStack5149,0x3f8);
      if (sVar8 == -1) {
        puVar9 = (undefined4 *)__errno();
        __android_log_print(6,"awplayer",&DAT_00021264,"FdToFilepath",0x46,*puVar9);
      }
      else {
        pcVar15 = strdup(acStack5157 + 1);
      }
      *(char **)(param_1 + 0x28) = pcVar15;
      pcVar16 = *(char **)(param_1 + 0x14);
      uVar14 = *(undefined4 *)(param_1 + 0x20);
      uVar7 = *(undefined4 *)(param_1 + 0x24);
      __android_log_print(3,"awplayer","<%s:%u>: (%d/%lld/%lld) path:\'%s\'","__FileStreamConnect",
                          0x1b7,pcVar16,*(undefined4 *)(param_1 + 0x18),
                          *(undefined4 *)(param_1 + 0x1c),uVar14,uVar7,pcVar15);
      goto LAB_0001e114;
    }
    iVar3 = sscanf(pcVar15,"fd://%d?offset=%lld&length=%lld",&local_1828,param_1 + 0x18,
                   param_1 + 0x20);
    if (iVar3 != 3) {
      uVar14 = 0x18a;
      pcVar15 = "<%s:%u>: \x1b[40;31msscanf failure...(%s)\x1b[0m";
      local_1828 = *(int *)(param_1 + 0x2c);
LAB_0001defe:
      uVar7 = 6;
      goto LAB_0001df02;
    }
    if (local_1828 < 1) {
      uVar14 = 0x191;
      pcVar15 = "<%s:%u>: \x1b[40;31minvalid fd(%d)\x1b[0m";
      goto LAB_0001defe;
    }
    iVar3 = dup(local_1828);
    *(int *)(param_1 + 0x14) = iVar3;
    if (iVar3 < 1) {
      piVar4 = (int *)__errno();
      uVar14 = 0x199;
      pcVar15 = "<%s:%u>: \x1b[40;31mdup fd failure, errno(%d)\x1b[0m";
      local_1828 = *piVar4;
      goto LAB_0001defe;
    }
    uVar20 = *(ulonglong *)(param_1 + 0x18);
    if (*(int *)(param_1 + 0x1c) < 0) {
      __android_log_print(5,"awplayer","<%s:%u>: invalid offset(%lld)","__FileStreamConnect",0x1a0);
      *(undefined4 *)(param_1 + 0x18) = 0;
      *(undefined4 *)(param_1 + 0x1c) = 0;
      in_stack_ffffe7c0 = uVar20;
    }
    __whence_01 = *(uint *)(param_1 + 0x24);
    if ((int)(-(uint)(*(int *)(param_1 + 0x20) != 0) - __whence_01) < 0 ==
        ((int)__whence_01 < 0 && (int)(~__whence_01 + (uint)(*(int *)(param_1 + 0x20) == 0)) < 0)) {
      __android_log_print(5,"awplayer","<%s:%u>: invalid size(%lld), try to get it myself...",
                          "__FileStreamConnect",0x1a7);
      uVar20 = lseek64(*(int *)(param_1 + 0x14),CONCAT44(in_stack_ffffe7bc,2),__whence_02);
      in_stack_ffffe7c0 =
           VectorSub((uVar20 & 0xffffffff00000000) + (uVar20 & 0xffffffff),
                     *(undefined8 *)(param_1 + 0x18),8);
      *(ulonglong *)(param_1 + 0x20) = in_stack_ffffe7c0;
      __android_log_print(5,"awplayer","<%s:%u>: got it, size(%lld)","__FileStreamConnect",0x1ac);
      __whence_01 = extraout_r1;
    }
    pcVar15 = (char *)0x0;
    _Var21 = lseek64(*(int *)(param_1 + 0x14),ZEXT48(in_stack_ffffe7bc) << 0x20,__whence_01);
    if (-1 < (int)_Var21) {
      pcVar16 = *(char **)(param_1 + 0x14);
      memset(acStack6180,0,0x400);
      memset(acStack5157 + 1,0,0x400);
      if ((int)pcVar16 < 1) {
        pcVar15 = (char *)0x3f;
        pcVar6 = "!(fd > 0)";
        pcVar13 = "<%s:%d>check (%s) failed:Are u kidding? fd(%d)";
        pcVar17 = "FdToFilepath";
        uVar14 = 0x3f;
        param_1 = "fd > 0";
        uVar20 = in_stack_ffffe7c0 & 0xffffffff00000000 | ZEXT48(pcVar16);
        pcVar22 = "fd > 0";
        goto LAB_0001e060;
      }
      goto LAB_0001e064;
    }
    __errno((int)_Var21,(int)((ulonglong)_Var21 >> 0x20));
    __android_log_print(6,"awplayer",&DAT_000211d6,"__FileStreamConnect",0x1b2);
  }
  iVar3 = -1;
LAB_0001e26c:
  if (local_24 != __stack_chk_guard) {
                    // WARNING: Subroutine does not return
    __stack_chk_fail();
  }
  return iVar3;
}


